(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.picc = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(exports){function getTrigger(root){var selector=root.getAttribute("trigger")||"[aria-controls]",trigger=root.querySelector(selector);return trigger&&trigger.hasAttribute("aria-controls")?trigger:void console.warn('no trigger found for selector: "'+selector+'"')}function getContent(root,trigger){var contentId=trigger.getAttribute("aria-controls"),content=document.getElementById(contentId);return content?content:void console.warn('no content element found with id: "'+contentId+'"')}function getAriaBoolean(el,attr){return el&&el.hasAttribute(attr)&&"false"!==el.getAttribute(attr)}var EXPANDED="aria-expanded",HIDDEN="aria-hidden",TOGGLE_EVENTS=["click"];exports.ARIAAccordion=document.registerElement("aria-accordion",{prototype:Object.create(HTMLElement.prototype,{attachedCallback:{value:function(){var trigger=this.__trigger=getTrigger(this);if(trigger){var content=this.__content=getContent(this,trigger);if(content){"BUTTON"===trigger.nodeName||trigger.hasAttribute("role")||trigger.setAttribute("role","button"),trigger.hasAttribute(EXPANDED)||trigger.setAttribute(EXPANDED,getAriaBoolean(this,EXPANDED));var toggle=this.toggle.bind(this),toggleAndCancel=this.__toggleAndCancel=function(e){return toggle(),e.preventDefault(),!1};TOGGLE_EVENTS.forEach(function(event){trigger.addEventListener(event,toggleAndCancel)}),this.update()}}}},detachedCallback:{value:function(){var trigger=this.__trigger;if(trigger){var toggleAndCancel=this.__toggleAndCancel;TOGGLE_EVENTS.forEach(function(event){trigger.removeEventListener(event,toggleAndCancel)})}}},update:{value:function(){var expanded=this.expanded;this.setAttribute(EXPANDED,expanded),this.__trigger.setAttribute(EXPANDED,expanded),this.__content.setAttribute(HIDDEN,!expanded)}},expanded:{get:function(){return getAriaBoolean(this.__trigger,EXPANDED)},set:function(value){value=!!value,value!==this.expanded&&this.__trigger&&(this.__trigger.setAttribute(EXPANDED,value),this.update(),this.dispatchEvent(new CustomEvent(value?"open":"close")))}},open:{value:function(){this.expanded=!0}},close:{value:function(){this.expanded=!1}},toggle:{value:function(){this.expanded=!this.expanded}},trigger:{get:function(){return this.__trigger}},content:{get:function(){return this.__content}}})})}(window);
},{}],2:[function(require,module,exports){
!function(){try{new CustomEvent("foo")}catch(err){var createEvent=document.createCustomEvent||document.createEvent;window.CustomEvent=function(event,params){var evt;return params=params||{bubbles:!1,cancelable:!1,detail:void 0},evt=createEvent.call(document,"CustomEvent"),evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt},window.CustomEvent.prototype=window.Event.prototype}}(this);
},{}],3:[function(require,module,exports){
require("document-register-element"),require("./compat/custom-event"),require("./aria-accordion"),require("./picc-meter"),require("./picc-range"),require("./picc-slider"),require("./multi-select");
},{"./aria-accordion":1,"./compat/custom-event":2,"./multi-select":4,"./picc-meter":5,"./picc-range":6,"./picc-slider":7,"document-register-element":15}],4:[function(require,module,exports){
!function(exports){function onchange(e){this.__updating||(this.value=getValue(e.target))}function getValue(multiselect){return[].filter.call(multiselect.options,function(option){return option.selected}).map(function(option){return option.value})}function setValue(multiselect,values){var changed=!1,map=values.reduce(function(map,d){return map[d]=!0,map},{});[].forEach.call(multiselect.options,function(option){var selected=!!map[option.value];option.selected!==selected&&(option.selected=selected,changed=!0)}),changed&&multiselect.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}function pollSourceSelect(){var value=getValue(this.__select);this.__value.length>value.length&&value.push(null),compare(this.__value,value)||(this.value=value)}function removeEmptyOption(select){select.options[0].value||select.removeChild(select.options[0])}function parseValues(d){return Array.isArray(d)?d:d?String(d).split(/,/g):[d]}function nullish(d){return null===d||void 0===d}function compare(a,b){if(Array.isArray(a)&&Array.isArray(b))for(var i=0,len=a.length;len>i;i++)if(-1===b.indexOf(a[i]))return!1;return String(a)===String(b)}var ITEM_CLASS="multi-select_item",d3=require("../d3");exports.MultiSelect=document.registerElement("multi-select",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){}},attachedCallback:{value:function(){var select=this.querySelector("select");return select?(select.removeAttribute("multiple"),this.__select=select.cloneNode(!0),removeEmptyOption(this.__select),select.name="",this.__select.setAttribute("multiple","multiple"),this.createTemplate(),this.insertBefore(this.__select,this.firstChild),this.value=select.value,this.__select.addEventListener("change",this.__onchange=onchange.bind(this)),this.__select.style.display="none",this.__select.setAttribute("aria-hidden","true"),void(this.__pollID=setInterval(pollSourceSelect.bind(this),200))):console.error("no <select> found in <multi-select>!")}},attributeChangedCallback:{value:function(attr,oldValue,newValue){}},detachedCallback:{value:function(){this.__select.removeEventListener("change",this.__onchange),clearTimeout(this.__pollID)}},update:{value:function(){function add(){values.push(null),set(values,!0)}var root=d3.select(this),values=this.value,set=function(v,focus){this.value=v,focus&&this.querySelector("."+ITEM_CLASS+":last-child select").focus()}.bind(this),items=root.selectAll("."+ITEM_CLASS).data(values),template=this.__template;items.exit().remove(),items.enter().append(function(){return template.cloneNode(!0)}).classed(ITEM_CLASS,!0),items.select("select").property("value",function(d){return nullish(d)?"":String(d)}).on("change",function(d,i){values[i]=this.value,set(values)}),items.selectAll("button").on("click.cancel",function(){d3.event.preventDefault()}),items.each(function(value,i){function remove(){item.remove(),values.splice(i,1),set(values)}var item=d3.select(this);item.select(".button-remove").on("click",remove),item.select(".button-add").on("click",add)})}},createTemplate:{value:function(){if(!this.__template){var html=this.innerHTML,template=this.__template=document.createElement("div");for(template.className=ITEM_CLASS,template.innerHTML=html;this.firstChild;)this.removeChild(this.firstChild);return template}return this.__template}},value:{get:function(){return Array.isArray(this.__value)?this.__value.slice():this.__value||[null]},set:function(value){compare(this.__value,value)||(this.__value=parseValues(value),this.__updating=!0,this.update(),setValue(this.__select,this.__value),this.__updating=!1)}}})})}(this);
},{"../d3":8}],5:[function(require,module,exports){
function deferUpdate(meter,delay){delay||(delay=50),meter.__timeout||(meter.__timeout=setTimeout(function(){delete meter.__timeout,meter.update()},delay))}function getAttr(node,attr,fallback){return node.hasAttribute(attr)?node.getAttribute(attr)||fallback:fallback}function getBar(meter){var bar=meter.querySelector("."+CLASS_PREFIX+"bar");return bar||(bar=meter.appendChild(document.createElement("div")),bar.className=CLASS_PREFIX+"bar"),bar}function getLine(meter){var line=meter.querySelector("."+CLASS_PREFIX+"line");return line||(line=meter.appendChild(document.createElement("div")),line.className=CLASS_PREFIX+"line",line.appendChild(document.createElement("span")).setAttribute("class","label")),line}function number(value,fallback){var num=String(value).length?+value:NaN;return arguments.length<2&&(fallback=NaN),isNaN(num)?fallback:num}function classify(el,classes){for(var klass in classes)el.classList[classes[klass]?"add":"remove"](klass)}var CLASS_PREFIX="picc-meter-";window.PICCMeter=document.registerElement("picc-meter",{prototype:Object.create(HTMLElement.prototype,{attachedCallback:{value:function(){this.min=getAttr(this,"min",0),this.max=getAttr(this,"max",1),this.value=getAttr(this,"value"),this.average=getAttr(this,"average"),this.update()}},attributeChangedCallback:{value:function(attr,prev,value){switch(attr){case"min":case"max":case"value":case"average":return void(this[attr]=value)}}},update:{value:function(){var min=this.min,max=this.max,value=this.value,average=this.average,bar=getBar(this),line=getLine(this);if("number"!=typeof value||isNaN(value))bar.style.setProperty("display","none"),bar.style.removeProperty("height"),line.style.setProperty("display","none"),line.style.removeProperty("bottom"),classify(this,{no_data:!0,above_average:!1,below_average:!1,about_average:!1});else{classify(this,{no_data:!1});var scale=function(v){return(v-min)/(max-min)},percent=function(v){return(100*scale(v)).toFixed(1)+"%"};if(bar.style.removeProperty("display"),bar.style.setProperty("height",percent(Math.min(value,max))),this.hasAttribute("average-range")){var range=this.getAttribute("average-range"),numbers=range.split("..").map(Number);if(numbers.some(isNaN))console.warn("invalid average-range:",range,numbers),classify(this,{above_average:!1,below_average:!1,about_average:!1});else{var lo=numbers[0],hi=numbers[1];classify(this,{above_average:value>hi,below_average:lo>value,about_average:value>=lo&&hi>=value})}}else classify(this,{above_average:!1,below_average:!1,about_average:!1});isNaN(average)?line.style.setProperty("display","none"):(line.style.removeProperty("display"),line.style.setProperty("bottom",percent(average)))}delete this.__timeout,this.dispatchEvent(new CustomEvent("update"))}},min:{get:function(){return this.__min},set:function(value){this.__min=number(value,0),deferUpdate(this)}},max:{get:function(){return this.__max},set:function(value){this.__max=number(value,1),deferUpdate(this)}},value:{get:function(){return this.__value},set:function(value){this.__value=number(value),deferUpdate(this)}},average:{get:function(){return this.__average},set:function(value){this.__average=number(value),deferUpdate(this)}}})});
},{}],6:[function(require,module,exports){
function deferUpdate(meter,delay){delay||(delay=50),meter.__timeout||(meter.__timeout=setTimeout(function(){delete meter.__timeout,meter.update()},delay))}function getAttr(node,attr,fallback){return node.hasAttribute(attr)?node.getAttribute(attr)||fallback:fallback}function number(value,fallback){var num=+value;return isNaN(value)?fallback:num}function classify(el,classes){for(var klass in classes)el.classList[classes[klass]?"add":"remove"](klass)}var ELEMENT_NAME="picc-range",CLASS_PREFIX=ELEMENT_NAME+"-",LABEL_TYPES=["min","max","lower","middle","upper"];window.PICCRange=document.registerElement(ELEMENT_NAME,{prototype:Object.create(HTMLElement.prototype,{attachedCallback:{value:function(){var bar=this.appendChild(document.createElement("div"));bar.className=CLASS_PREFIX+"bar",LABEL_TYPES.forEach(function(type){var label=this.appendChild(document.createElement("span"));label.className=[CLASS_PREFIX+"label",[CLASS_PREFIX,"label-",type].join("")].join(" "),label.appendChild(document.createElement("span"))},this),this.min=getAttr(this,"min",0),this.max=getAttr(this,"max",1),this.lower=getAttr(this,"lower"),this.middle=getAttr(this,"middle"),this.upper=getAttr(this,"upper"),this.update()}},attributeChangedCallback:{value:function(attr,prev,value){switch(attr){case"min":case"max":case"lower":case"middle":case"upper":return void(this[attr]=value)}}},update:{value:function(){var min=this.min,max=this.max,scale=function(v){return(v-min)/(max-min)},percent=function(v){return(100*scale(v)).toFixed(1)+"%"},bar=this.querySelector("."+CLASS_PREFIX+"bar");bar.style.setProperty("left",percent(this.lower)),bar.style.setProperty("right",percent(this.min+this.max-this.upper)),LABEL_TYPES.forEach(function(type){var label=this.querySelector("."+CLASS_PREFIX+"label-"+type);if(label){var value=this[type];if("number"!=typeof value||isNaN(value))label.style.setProperty("display","none");else{label.style.removeProperty("display"),label.style.setProperty("left",percent(value));var span=label.querySelector("span");span&&(span.textContent=String(Math.round(value)))}}},this),delete this.__timeout}},min:{get:function(){return this.__min},set:function(value){this.__min=number(value,0),deferUpdate(this)}},max:{get:function(){return this.__max},set:function(value){this.__max=number(value),deferUpdate(this)}},lower:{get:function(){return this.__lower},set:function(value){this.__lower=number(value),deferUpdate(this)}},middle:{get:function(){return this.__middle},set:function(value){this.__middle=number(value),deferUpdate(this)}},upper:{get:function(){return this.__upper},set:function(value){this.__upper=number(value),deferUpdate(this)}}})});
},{}],7:[function(require,module,exports){
function click(e){2!==e.button&&(this.__dragging=getClosestHandle.call(this,e),move.call(this,e),this.__dragging=null,this.dispatchEvent(new CustomEvent("change")))}function engage(e){return 2===e.button?void e.preventDefault():(this.__dragging=getClosestHandle.call(this,e),this.__dragging.setAttribute("aria-grabbed",!0),void("focus"===e.type?(window.addEventListener("keyup",getListener(keypress,this)),this.addEventListener("blur",release,!0)):(window.addEventListener("mousemove",getListener(move,this)),window.addEventListener("mouseup",getListener(release,this)),window.addEventListener("touchmove",getListener(move,this)),window.addEventListener("touchend",getListener(release,this)))))}function move(e){if(!this.__dragging)return void console.warn("move() while not dragging");var handle=this.__dragging,x=getMouseX.call(this,e),property=handle===this.__left?"lower":"upper",width=this.getBoundingClientRect().width;x=Math.max(0,Math.min(x,width));var value=this.min+x/width*(this.max-this.min);this.step&&(value=roundTo(value,this.step)),this[property]=value,this.update(),this.setAttribute("aria-valuenow",value);var event=new CustomEvent("drag");event.property=property,event.value=value,this.dispatchEvent(event),e.preventDefault();try{window.getSelection().removeAllRanges()}catch(err){console.warn("unable to clear ranges:",err)}}function release(e){this.__dragging?this.__dragging.removeAttribute("aria-grabbed"):console.warn("release() while not dragging"),this.__dragging=!1,this.removeAttribute("aria-valuenow"),"blur"===e.type?(window.removeEventListener("keyup",getListener(keypress,this)),this.removeEventListener("blur",release,!0)):(window.removeEventListener("mousemove",getListener(move,this)),window.removeEventListener("mouseup",getListener(release,this)),window.removeEventListener("touchmove",getListener(move,this)),window.removeEventListener("touchend",getListener(release,this))),this.dispatchEvent(new CustomEvent("change")),e.preventDefault()}function keypress(e){switch(e.keyCode){case 37:nudge.call(this,-1);break;case 39:nudge.call(this,1);break;case 36:case 35:switch(this.__dragging){case this.__left:this.lower=this.min;break;case this.__right:this.upper=this.max}}}function getListener(fn,obj){var name=fn.name||fn.toString().match(/function (\w+)/)[1],key="__listener_"+name;return obj[key]||(obj[key]=fn.bind(obj))}function registerElement(name,proto,parent){parent||(parent=HTMLElement);for(var key in proto)"function"==typeof proto[key]&&(proto[key]={value:proto[key]},0===key.indexOf("__")&&(proto[key].enumerable=!1));return document.registerElement(name,{prototype:Object.create(parent.prototype,proto)})}function getAttr(name,fallback){return this.hasAttribute(name)?this.getAttribute(name):fallback}function property(name,parse){var key="__"+name;return{get:function(){return this[key]},set:function(value){parse&&(value=parse.call(this,value,name)),value!==this[key]&&(this[key]=value,this.update())}}}function createHandle(which){var div=document.createElement("div");return div.classList.add(CLASS_PREFIX+"handle"),div.classList.add(CLASS_PREFIX+"handle_"+which),div.setAttribute("tabindex",0),div.appendChild(createLabel()),this.appendChild(div)}function createRange(){var div=document.createElement("div");return div.className=CLASS_PREFIX+"range",this.appendChild(div)}function createMark(klass){var div=document.createElement("div");return div.className=CLASS_PREFIX+klass,div.appendChild(createLabel()),this.appendChild(div)}function createLabel(){var label=document.createElement("span");return label.className=CLASS_PREFIX+"label",label}function getLabel(parent){return parent.querySelector("."+CLASS_PREFIX+"label")}function getClosestHandle(e){switch(e.target){case this.__left:return this.__left;case this.__right:return this.__right}var x=getMouseX.call(this,e),left=this.__left.getBoundingClientRect().left,right=this.__right.getBoundingClientRect().left,dl=Math.abs(x-left),dr=Math.abs(x-right);return dr>dl?this.__left:this.__right}function getMouseX(e){var rect=this.getBoundingClientRect(),x=(rect.width,e.touches&&e.touches.length?e.touches[0].clientX:e.clientX);return x-rect.left}function nudge(multiplier){var handle=this.__dragging;if(handle){var property=handle===this.__left?"lower":"upper",step=this.step||.1;this[property]+=step*multiplier}}function clamp(x,min,max){return min>x?min:x>max?max:x}function roundTo(value,step){return Math.round(value/step)*step}function percent(value){return value.toFixed(2)+"%"}function formatDollars(n){return n>=1e3?"$"+roundFloat(n/1e3)+"K":"$"+Math.round(n)}function formatPercent(n){return Math.round(100*n)+"%"}function roundFloat(n){return n.toFixed(1).replace(/\.0$/,"")}var ELEMENT_NAME="picc-slider",CLASS_PREFIX=ELEMENT_NAME+"-";window.PICCSlider=registerElement(ELEMENT_NAME,{createdCallback:function(){this.__range=createRange.call(this),this.__mark=createMark.call(this,"average"),this.__left=createHandle.call(this,"min"),this.__right=createHandle.call(this,"max"),this.setAttribute("role","slider"),this.min=getAttr.call(this,"min",0),this.max=getAttr.call(this,"max",100),this.lower=getAttr.call(this,"lower",this.min),this.upper=getAttr.call(this,"upper",this.max),this.step=getAttr.call(this,"step",1),this.average=getAttr.call(this,"average"),this.format=getAttr.call(this,"format")},attachedCallback:function(){this.addEventListener("click",click),this.addEventListener("mousedown",engage),this.addEventListener("touchstart",engage),this.update()},detachedCallback:function(){this.removeEventListener("click",click),this.removeEventListener("mousedown",enagage),this.removeEventListener("touchstart",enagage)},attributeChangedCallback:function(attr,prev,value){switch(attr){case"min":case"max":case"value":case"step":case"average":case"format":this[attr]=value,this.update()}},update:function(){var min=this.min,max=this.max;this.__dragging===this.__left&&this.__lower>=this.__upper?this.__lower=this.__upper-this.step:this.__dragging===this.__right&&this.__upper<=this.__lower&&(this.__upper=this.__lower+this.step),this.__lower=Math.min(Math.max(this.__lower,min),max),this.__upper=Math.max(Math.min(this.__upper,max),min);var lower=this.lower,upper=this.upper,average=this.average,x=function(value){return 100*(value-min)/(max-min)},left=percent(x(lower)),right=percent(x(upper));this.__left.style.setProperty("left",left),this.__right.style.setProperty("left",right),this.__range.style.setProperty("left",left),this.__range.style.setProperty("right",percent(x(max-upper)));var mark=this.__mark,labels=[{el:getLabel(this.__left),value:lower},{el:getLabel(this.__right),value:upper},{el:getLabel(mark),value:average}],format=function(){return""};switch(this.format){case"%":format=formatPercent;break;case"$":format=formatDollars}var nudgeThreshold=12,outerRect=this.getBoundingClientRect();outerRect.left+nudgeThreshold,outerRect.right;if(labels.forEach(function(d,i){var label=d.el;return label?void(label.textContent=format(d.value)):console.warn("no label:",i)}),isNaN(average))mark.style.setProperty("display","none");else{var p=percent(x(average));mark.style.setProperty("left",p),mark.style.removeProperty("display")}this.setAttribute("aria-valuemin",lower),this.setAttribute("aria-valuemax",upper)},value:property("value",function(v){return v=clamp(+v,this.min,this.max),this.step&&(v=roundTo(v,this.step)),v}),min:property("min",Number),max:property("max",Number),lower:property("lower",Number),upper:property("upper",Number),step:property("step",Number),average:property("average",Number),format:property("format",String)});
},{}],8:[function(require,module,exports){
!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.d3=factory()}(this,function(){"use strict";function _dsv(delimiter){function parse(text,f){var o;return parseRows(text,function(row,i){if(o)return o(row,i-1);var a=new Function("d","return {"+row.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a})}function parseRows(text,f){function token(){if(I>=N)return EOF;if(eol)return eol=!1,EOL;var j=I;if(34===text.charCodeAt(j)){for(var i=j;i++<N;)if(34===text.charCodeAt(i)){if(34!==text.charCodeAt(i+1))break;++i}I=i+2;var c=text.charCodeAt(i+1);return 13===c?(eol=!0,10===text.charCodeAt(i+2)&&++I):10===c&&(eol=!0),text.slice(j+1,i).replace(/""/g,'"')}for(;N>I;){var c=text.charCodeAt(I++),k=1;if(10===c)eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&(++I,++k);else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}for(var t,eol,EOL={},EOF={},rows=[],N=text.length,I=0,n=0;(t=token())!==EOF;){for(var a=[];t!==EOL&&t!==EOF;)a.push(t),t=token();f&&null==(a=f(a,n++))||rows.push(a)}return rows}function format(rows){if(Array.isArray(rows[0]))return formatRows(rows);var fieldSet=Object.create(null),fields=[];return rows.forEach(function(row){for(var field in row)(field+="")in fieldSet||fields.push(fieldSet[field]=field)}),[fields.map(formatValue).join(delimiter)].concat(rows.map(function(row){return fields.map(function(field){return formatValue(row[field])}).join(delimiter)})).join("\n")}function formatRows(rows){return rows.map(formatRow).join("\n")}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);return{parse:parse,parseRows:parseRows,format:format,formatRows:formatRows}}function dispatch(){return new Dispatch(arguments)}function Dispatch(types){function parseType(type){var i=(type+="").indexOf("."),name=type;if(i>=0?type=type.slice(0,i):name+=".",type&&!callbacksByType.hasOwnProperty(type))throw new Error("unknown type: "+type);return{type:type,name:name}}function applier(type){return function(){for(var callback,callbackValue,callbacks=callbacksByType[type],i=-1,n=callbacks.length;++i<n;)(callbackValue=(callback=callbacks[i]).value)&&callbackValue.apply(this,arguments);return that}}var type,i=-1,n=types.length,callbacksByType={},callbackByName={},that=this;for(that.on=function(type,callback){if(type=parseType(type),arguments.length<2)return(callback=callbackByName[type.name])&&callback.value;if(type.type){var i,callbacks=callbacksByType[type.type],callback0=callbackByName[type.name];callback0&&(callback0.value=null,i=callbacks.indexOf(callback0),callbacksByType[type.type]=callbacks=callbacks.slice(0,i).concat(callbacks.slice(i+1)),delete callbackByName[type.name]),callback&&(callback={value:callback},callbackByName[type.name]=callback,callbacks.push(callback))}else if(null==callback)for(var otherType in callbacksByType)if(callback=callbackByName[otherType+type.name]){callback.value=null;var callbacks=callbacksByType[otherType],i=callbacks.indexOf(callback);callbacksByType[otherType]=callbacks.slice(0,i).concat(callbacks.slice(i+1)),delete callbackByName[callback.name]}return that};++i<n;){if(type=types[i]+"",!type||type in that)throw new Error("illegal or duplicate type: "+type);callbacksByType[type]=[],that[type]=applier(type)}}function xhr(url,callback){function respond(){var result,status=request.status;if(!status&&hasResponse(request)||status>=200&&300>status||304===status){if(response)try{result=response.call(xhr,request)}catch(e){return void event.error.call(xhr,e)}else result=request;event.load.call(xhr,result)}else event.error.call(xhr,request)}var xhr,mimeType,response,responseType,event=dispatch("beforesend","progress","load","error"),headers=new Map,request=new XMLHttpRequest;return"undefined"==typeof XDomainRequest||"withCredentials"in request||!/^(http(s)?:)?\/\//.test(url)||(request=new XDomainRequest),"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){request.readyState>3&&respond()},request.onprogress=function(e){event.progress.call(xhr,e)},xhr={header:function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers.get(name):(null==value?headers["delete"](name):headers.set(name,value+""),xhr)},mimeType:function(value){return arguments.length?(mimeType=null==value?null:value+"",xhr):mimeType},responseType:function(value){return arguments.length?(responseType=value,xhr):responseType},response:function(value){return response=value,xhr},get:function(data,callback){return xhr.send("GET",data,callback)},post:function(data,callback){return xhr.send("POST",data,callback)},send:function(method,data,callback){return callback||"function"!=typeof data||(callback=data,data=null),callback&&1===callback.length&&(callback=fixCallback(callback)),request.open(method,url,!0),null==mimeType||headers.has("accept")||headers.set("accept",mimeType+",*/*"),request.setRequestHeader&&headers.forEach(function(value,name){request.setRequestHeader(name,value)}),null!=mimeType&&request.overrideMimeType&&request.overrideMimeType(mimeType),null!=responseType&&(request.responseType=responseType),callback&&xhr.on("error",callback).on("load",function(request){callback(null,request)}),event.beforesend.call(xhr,request),request.send(null==data?null:data),xhr},abort:function(){return request.abort(),xhr},on:function(){var value=event.on.apply(event,arguments);return value===event?xhr:value}},callback?xhr.get(callback):xhr}function fixCallback(callback){return function(error,request){callback(null==error?request:null)}}function hasResponse(request){var type=request.responseType;return type&&"text"!==type?request.response:request.responseText}function xhrDsv(defaultMimeType,dsv){return function(url,row,callback){arguments.length<3&&(callback=row,row=null);var r=xhr(url).mimeType(defaultMimeType);return r.row=function(_){return arguments.length?r.response(responseOf(dsv,row=_)):row},r.row(row),callback?r.get(callback):r}}function responseOf(dsv,row){return function(request){return dsv.parse(request.responseText,row)}}function xhrType(defaultMimeType,response){return function(url,callback){var r=xhr(url).mimeType(defaultMimeType).response(response);return callback?r.get(callback):r}}function sum(array,f){var a,s=0,n=array.length,i=-1;if(1===arguments.length)for(;++i<n;)isNaN(a=+array[i])||(s+=a);else for(;++i<n;)isNaN(a=+f.call(array,array[i],i))||(s+=a);return s}function _range(start,stop,step){(n=arguments.length)<3&&(step=1,2>n&&(stop=start,start=0));var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),k=_scale(Math.abs(step)),range=new Array(n);for(start*=k,step*=k;++i<n;)range[i]=(start+i*step)/k;return range}function _scale(x){for(var k=1;x*k%1;)k*=10;return k}function quantile(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v}function _ascending(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function descending(a,b){return a>b?-1:b>a?1:b>=a?0:NaN}function bisector(compare){return 1===compare.length&&(compare=ascendingComparator(compare)),{left:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);hi>lo;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);hi>lo;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}function ascendingComparator(f){return function(d,x){return _ascending(f(d),x)}}function formatDecimal(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function _exponent(x){return x=formatDecimal(Math.abs(x)),x?x[1]:NaN}function formatPrefixAuto(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,p+i-1)[0]}function formatRounded(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return 0>exponent?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}function formatDefault(x,p){x=x.toPrecision(p);out:for(var i1,n=x.length,i=1,i0=-1;n>i;++i)switch(x[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;case"e":break out;default:i0>0&&(i0=0)}return i0>0?x.slice(0,i0)+x.slice(i1+1):x}function formatSpecifier(specifier){return new FormatSpecifier(specifier)}function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match,fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zero=!!match[5],width=match[6]&&+match[6],comma=!!match[7],precision=match[8]&&+match[8].slice(1),type=match[9]||"";"n"===type?(comma=!0,type="g"):formatTypes[type]||(type=""),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="="),this.fill=fill,this.align=align,this.sign=sign,this.symbol=symbol,this.zero=zero,this.width=width,this.comma=comma,this.precision=precision,this.type=type}function formatGroup(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}function _identity(x){return x}function _locale(locale){function format(specifier){specifier=formatSpecifier(specifier);var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,type=specifier.type,prefix="$"===symbol?currency[0]:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currency[1]:/[%p]/.test(type)?"%":"",formatType=formatTypes[type],maybeSuffix=!type||/[defgprs%]/.test(type);return precision=null==precision?type?6:12:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),function(value){var valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{value=+value;var valueNegative=(0>value||0>1/value)&&(value*=-1,!0);if(value=formatType(value,precision),valuePrefix=(valueNegative?"("===sign?sign:"-":"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=valueSuffix+("s"===type?prefixes[8+prefixExponent/3]:"")+(valueNegative&&"("===sign?")":""),maybeSuffix)for(var c,i=-1,n=value.length;++i<n;)if(c=value.charCodeAt(i),48>c||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=width>length?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":return valuePrefix+value+valueSuffix+padding;case"=":return valuePrefix+padding+value+valueSuffix;case"^":return padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length)}return padding+valuePrefix+value+valueSuffix}}function formatPrefix(specifier,value){var f=format((specifier=formatSpecifier(specifier),specifier.type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(_exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}var group=locale.grouping&&locale.thousands?formatGroup(locale.grouping,locale.thousands):_identity,currency=locale.currency,decimal=locale.decimal;return{format:format,formatPrefix:formatPrefix}}function precisionRound(step,max){return Math.max(0,_exponent(Math.abs(max))-_exponent(Math.abs(step)))+1}function precisionPrefix(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_exponent(value)/3)))-_exponent(Math.abs(step)))}function precisionFixed(step){return Math.max(0,-_exponent(Math.abs(step)))}function newInterval(floori,offseti,count){function interval(date){return floori(date=new Date(+date)),date}return interval.floor=interval,interval.round=function(date){var d0=new Date(+date),d1=new Date(date-1);return floori(d0),floori(d1),offseti(d1,1),d1-date>date-d0?d0:d1},interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),date},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var range=[];if(start=new Date(start-1),stop=new Date(+stop),step=null==step?1:Math.floor(step),!(stop>start&&step>0))return range;for(offseti(start,1),floori(start),stop>start&&range.push(new Date(+start));offseti(start,step),floori(start),stop>start;)range.push(new Date(+start));return range},interval.filter=function(test){return newInterval(function(date){for(;floori(date),!test(date);)date.setTime(date-1)},function(date,step){for(;--step>=0;)for(;offseti(date,1),!test(date););})},count&&(interval.count=function(start,end){return _t0.setTime(+start),_t1.setTime(+end),floori(_t0),floori(_t1),Math.floor(count(_t0,_t1))}),interval}function weekday(i){return newInterval(function(date){date.setHours(0,0,0,0),date.setDate(date.getDate()-(date.getDay()+7-i)%7)},function(date,step){date.setDate(date.getDate()+7*step)},function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5})}function utcWeekday(i){return newInterval(function(date){date.setUTCHours(0,0,0,0),date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7)},function(date,step){date.setUTCDate(date.getUTCDate()+7*step)},function(start,end){return(end-start)/6048e5})}function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}function __locale(locale){function newFormat(specifier,formats){return function(date){for(var c,pad,format,string=[],i=-1,j=0,n=specifier.length;++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])&&(c=specifier.charAt(++i)),(format=formats[c])&&(c=format(date,null==pad?"e"===c?" ":"0":pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,newDate){return function(string){var d=newYear(1900),i=parseSpecifier(d,specifier,string,0);if(i!=string.length)return null;if("p"in d&&(d.H=d.H%12+12*d.p),"Z"in d){if("w"in d&&("W"in d||"U"in d)){var day=utcDate(newYear(d.y)).getUTCDay();"W"in d&&(d.U=d.W,d.w=(d.w+6)%7,--day),d.m=0,d.d=d.w+7*d.U-(day+6)%7}return d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)}if("w"in d&&("W"in d||"U"in d)){var day=newDate(newYear(d.y)).getDay();"W"in d&&(d.U=d.W,d.w=(d.w+6)%7,--day),d.m=0,d.d=d.w+7*d.U-(day+6)%7}return newDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;n>i;){if(j>=m)return-1;if(c=specifier.charCodeAt(i++),37===c){if(c=specifier.charAt(i++),parse=parses[c in pads?specifier.charAt(i++):c],!parse||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)}function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)}function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)}function parsePeriod(d,string,i){var n=periodLookup.get(string.slice(i,i+=2).toLowerCase());return null==n?-1:(d.p=n,i)}function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]}function formatWeekday(d){return locale_weekdays[d.getDay()]}function formatShortMonth(d){return locale_shortMonths[d.getMonth()]}function formatMonth(d){return locale_months[d.getMonth()]}function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]}function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]}function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]}function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]}function formatUTCMonth(d){return locale_months[d.getUTCMonth()]}function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]}var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,S:formatSeconds,U:formatWeekNumberSunday,w:formatWeekdayNumber,W:formatWeekNumberMonday,x:null,X:null,y:_formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,S:formatUTCSeconds,U:formatUTCWeekNumberSunday,w:formatUTCWeekdayNumber,W:formatUTCWeekNumberMonday,x:null,X:null,y:_formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,S:parseSeconds,U:parseWeekNumberSunday,w:parseWeekdayNumber,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.parse=newParse(specifier,localDate),f.toString=function(){return specifier},f},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.parse=newParse(specifier,utcDate),f.toString=function(){return specifier},f}}}function pad(value,fill,width){var sign=0>value?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(width>length?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(_requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){for(var map=new Map,i=-1,n=names.length;++i<n;)map.set(names[i].toLowerCase(),i);return map}function parseWeekdayNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){return/^[+-]\d{4}$/.test(string=string.slice(i,i+5))?(d.Z=-string,i+5):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+day.count(year(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekNumberSunday(d,p){return pad(sunday.count(year(d),d),p,2)}function formatWeekdayNumber(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(monday.count(year(d),d),p,2)}function _formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+utcDay.count(utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekNumberSunday(d,p){return pad(utcSunday.count(utcYear(d),d),p,2)}function formatUTCWeekdayNumber(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(utcMonday.count(utcYear(d),d),p,2)}function _formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function interpolateNumber(a,b){return a=+a,b-=a,function(t){return a+b*t}}function interpolate(a,b){for(var f,i=interpolators.length;--i>=0&&!(f=interpolators[i](a,b)););return f}function interpolateObject(a,b){var k,i={},c={};for(k in a)k in b?i[k]=interpolate(a[k],b[k]):c[k]=a[k];for(k in b)k in a||(c[k]=b[k]);return function(t){for(k in i)c[k]=i[k](t);return c}}function interpolateArray(a,b){var i,x=[],c=[],na=a.length,nb=b.length,n0=Math.min(a.length,b.length);for(i=0;n0>i;++i)x.push(interpolate(a[i],b[i]));for(;na>i;++i)c[i]=a[i];for(;nb>i;++i)c[i]=b[i];return function(t){for(i=0;n0>i;++i)c[i]=x[i](t);return c}}function Color(){}function color(format){var m;return format=(format+"").trim().toLowerCase(),(m=reHex3.exec(format))?(m=parseInt(m[1],16),rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m)):(m=reHex6.exec(format))?rgbn(parseInt(m[1],16)):(m=reRgbInteger.exec(format))?rgb(m[1],m[2],m[3]):(m=reRgbPercent.exec(format))?rgb(2.55*m[1],2.55*m[2],2.55*m[3]):(m=reHslPercent.exec(format))?hsl(m[1],.01*m[2],.01*m[3]):named.has(format)?rgbn(named.get(format)):null}function rgbn(n){return rgb(n>>16&255,n>>8&255,255&n)}function rgb(r,g,b){return 1===arguments.length&&(r instanceof Color||(r=color(r)),r?(r=r.rgb(),b=r.b,g=r.g,r=r.r):r=g=b=NaN),new Rgb(r,g,b)}function Rgb(r,g,b){this.r=+r,this.g=+g,this.b=+b}function _format(r,g,b){return"#"+(isNaN(r)?"00":(r=Math.round(r))<16?"0"+Math.max(0,r).toString(16):Math.min(255,r).toString(16))+(isNaN(g)?"00":(g=Math.round(g))<16?"0"+Math.max(0,g).toString(16):Math.min(255,g).toString(16))+(isNaN(b)?"00":(b=Math.round(b))<16?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16))}function hsl(h,s,l){if(1===arguments.length)if(h instanceof Hsl)l=h.l,s=h.s,h=h.h;else if(h instanceof Color||(h=color(h)),h){if(h instanceof Hsl)return h;h=h.rgb();var r=h.r/255,g=h.g/255,b=h.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),range=max-min;l=(max+min)/2,range?(s=.5>l?range/(max+min):range/(2-max-min),h=r===max?(g-b)/range+6*(b>g):g===max?(b-r)/range+2:(r-g)/range+4,h*=60):(h=NaN,s=l>0&&1>l?0:h)}else h=s=l=NaN;return new Hsl(h,s,l)}function Hsl(h,s,l){this.h=+h,this.s=+s,this.l=+l}function hsl2rgb(h,m1,m2){return 255*(60>h?m1+(m2-m1)*h/60:180>h?m2:240>h?m1+(m2-m1)*(240-h)/60:m1)}function cubehelix(h,s,l){if(1===arguments.length)if(h instanceof Cubehelix)l=h.l,s=h.s,h=h.h;else{h instanceof Rgb||(h=rgb(h));var r=h.r/255,g=h.g/255,b=h.b/255;l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB);var bl=b-l,k=(E*(g-l)-C*bl)/D;s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*_rad2deg-120:NaN,0>h&&(h+=360)}return new Cubehelix(h,s,l)}function Cubehelix(h,s,l){this.h=+h,this.s=+s,this.l=+l}function interpolateRgb(a,b){a=rgb(a),b=rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return _format(Math.round(ar+br*t),Math.round(ag+bg*t),Math.round(ab+bb*t))}}function interpolate0(b){return function(){return b}}function interpolate1(b){return function(t){return b(t)+""}}function interpolateString(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:interpolateNumber(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?interpolate1(q[0].x):interpolate0(b):(b=q.length,function(t){for(var o,i=0;b>i;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function interpolateRound(a,b){return a=+a,b-=a,function(t){return Math.round(a+b*t)}}function tickRange(domain,count){null==count&&(count=10);var start=domain[0],stop=domain[domain.length-1];start>stop&&(error=stop,stop=start,start=error);var span=stop-start,step=Math.pow(10,Math.floor(Math.log(span/count)/Math.LN10)),error=span/count/step;return error>=e10?step*=10:error>=e5?step*=5:error>=e2&&(step*=2),[Math.ceil(start/step)*step,Math.floor(stop/step)*step+step/2,step]}function ticks(domain,count){return _range.apply(null,tickRange(domain,count))}function nice(domain,step){if(domain=domain.slice(),!step)return domain;var t,i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1];return x0>x1&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=Math.floor(x0/step)*step,domain[i1]=Math.ceil(x1/step)*step,domain}function __tickFormat(domain,count,specifier){var range=tickRange(domain,count);if(null==specifier)specifier=",."+precisionFixed(range[2])+"f";else switch(specifier=formatSpecifier(specifier),specifier.type){case"s":var value=Math.max(Math.abs(range[0]),Math.abs(range[1]));return null==specifier.precision&&(specifier.precision=precisionPrefix(range[2],value)),formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null==specifier.precision&&(specifier.precision=precisionRound(range[2],Math.max(Math.abs(range[0]),Math.abs(range[1])))-("e"===specifier.type));break;case"f":case"%":null==specifier.precision&&(specifier.precision=precisionFixed(range[2])-2*("%"===specifier.type))}return ___format(specifier)}function uninterpolateClamp(a,b){return b=(b-=a=+a)||1/b,function(x){return Math.max(0,Math.min(1,(x-a)/b))}}function uninterpolateNumber(a,b){return b=(b-=a=+a)||1/b,function(x){return(x-a)/b}}function bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function polylinear(domain,range,uninterpolate,interpolate){var k=Math.min(domain.length,range.length)-1,u=new Array(k),i=new Array(k),j=-1;for(domain[k]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++j<k;)u[j]=uninterpolate(domain[j],domain[j+1]),i[j]=interpolate(range[j],range[j+1]);return function(x){var j=bisectRight(domain,x,1,k)-1;return i[j](u[j](x))}}function newLinear(domain,range,interpolate,clamp){function rescale(){var linear=Math.min(domain.length,range.length)>2?polylinear:bilinear,uninterpolate=clamp?uninterpolateClamp:uninterpolateNumber;return output=linear(domain,range,uninterpolate,interpolate),input=linear(range,domain,uninterpolate,interpolateNumber),scale}function scale(x){return output(x)}var output,input;return scale.invert=function(y){return input(y)},scale.domain=function(x){return arguments.length?(domain=x.map(Number),rescale()):domain.slice()},scale.range=function(x){return arguments.length?(range=x.slice(),rescale()):range.slice()},scale.rangeRound=function(x){return scale.range(x).interpolate(interpolateRound)},scale.clamp=function(x){return arguments.length?(clamp=!!x,rescale()):clamp},scale.interpolate=function(x){return arguments.length?(interpolate=x,rescale()):interpolate},scale.ticks=function(count){return ticks(domain,count)},scale.tickFormat=function(count,specifier){return __tickFormat(domain,count,specifier)},scale.nice=function(count){return domain=nice(domain,tickRange(domain,count)[2]),rescale()},scale.copy=function(){return newLinear(domain,range,interpolate,clamp)},rescale()}function rebind(scale,linear){return scale.range=function(){var x=linear.range.apply(linear,arguments);return x===linear?scale:x},scale.rangeRound=function(){var x=linear.rangeRound.apply(linear,arguments);return x===linear?scale:x},scale.clamp=function(){var x=linear.clamp.apply(linear,arguments);return x===linear?scale:x},scale.interpolate=function(){var x=linear.interpolate.apply(linear,arguments);return x===linear?scale:x},scale}function _linear(){return newLinear([0,1],[0,1],interpolate,!1)}function _newDate(t){return new Date(t)}function newTime(linear,timeInterval,tickFormat,format){function scale(x){return linear(x)}function tickInterval(interval,start,stop,step){switch(null==interval&&(interval=10),typeof interval){case"number":interval=chooseTickInterval(start,stop,interval),
step=interval[1],interval=interval[0];break;case"string":step=null==step?1:Math.floor(step);break;default:return interval}return isFinite(step)&&step>0?timeInterval(interval,step):null}return scale.invert=function(x){return _newDate(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain(x),scale):linear.domain().map(_newDate)},scale.ticks=function(interval,step){var t,domain=linear.domain(),t0=domain[0],t1=domain[domain.length-1];return t0>t1&&(t=t0,t0=t1,t1=t),(interval=tickInterval(interval,t0,t1,step))?interval.range(t0,t1+1):[]},scale.tickFormat=function(specifier){return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval,step){var t,domain=linear.domain(),i0=0,i1=domain.length-1,t0=domain[i0],t1=domain[i1];return t0>t1&&(t=i0,i0=i1,i1=t,t=t0,t0=t1,t1=t),(interval=tickInterval(interval,t0,t1,step))&&(domain[i0]=+interval.floor(t0),domain[i1]=+interval.ceil(t1),linear.domain(domain)),scale},scale.copy=function(){return newTime(linear.copy(),timeInterval,tickFormat,format)},rebind(scale,linear)}function chooseTickInterval(start,stop,count){var target=Math.abs(stop-start)/count,i=bisectTickIntervals(tickIntervals,target);return i===tickIntervals.length?["years",tickRange([start/millisecondsPerYear,stop/millisecondsPerYear],count)[2]]:i?tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i]:["milliseconds",tickRange([start,stop],count)[2]]}function _tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?sunday(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}function millisecond(step){return{range:function(start,stop){return _range(Math.ceil(start/step)*step,stop,step).map(_newDate)},floor:function(date){return _newDate(Math.floor(date/step)*step)},ceil:function(date){return _newDate(Math.ceil(date/step)*step)}}}function _timeInterval(interval,step){switch(interval){case"milliseconds":return millisecond(step);case"seconds":return step>1?second.filter(function(d){return d.getSeconds()%step===0}):second;case"minutes":return step>1?minute.filter(function(d){return d.getMinutes()%step===0}):minute;case"hours":return step>1?hour.filter(function(d){return d.getHours()%step===0}):hour;case"days":return step>1?day.filter(function(d){return(d.getDate()-1)%step===0}):day;case"weeks":return step>1?sunday.filter(function(d){return sunday.count(0,d)%step===0}):sunday;case"months":return step>1?month.filter(function(d){return d.getMonth()%step===0}):month;case"years":return step>1?year.filter(function(d){return d.getFullYear()%step===0}):year}}function time(){return newTime(_linear(),_timeInterval,_tickFormat,__format).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function tickFormat(date){return(utcSecond(date)<date?formatUTCMillisecond:utcMinute(date)<date?formatUTCSecond:utcHour(date)<date?formatUTCMinute:utcDay(date)<date?formatUTCHour:utcMonth(date)<date?utcSunday(date)<date?formatUTCDay:formatUTCWeek:utcYear(date)<date?formatUTCMonth:formatUTCYear)(date)}function timeInterval(interval,step){switch(interval){case"milliseconds":return millisecond(step);case"seconds":return step>1?utcSecond.filter(function(d){return d.getUTCSeconds()%step===0}):utcSecond;case"minutes":return step>1?utcMinute.filter(function(d){return d.getUTCMinutes()%step===0}):utcMinute;case"hours":return step>1?utcHour.filter(function(d){return d.getUTCHours()%step===0}):utcHour;case"days":return step>1?utcDay.filter(function(d){return(d.getUTCDate()-1)%step===0}):utcDay;case"weeks":return step>1?utcSunday.filter(function(d){return utcSunday.count(0,d)%step===0}):utcSunday;case"months":return step>1?utcMonth.filter(function(d){return d.getUTCMonth()%step===0}):utcMonth;case"years":return step>1?utcYear.filter(function(d){return d.getUTCFullYear()%step===0}):utcYear}}function utcTime(){return newTime(_linear(),timeInterval,tickFormat,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function newThreshold(domain,range,n){function scale(x){return x>=x?range[bisectRight(domain,x,0,n)]:void 0}return scale.domain=function(x){return arguments.length?(domain=x.slice(),n=Math.min(domain.length,range.length-1),scale):domain.slice()},scale.range=function(x){return arguments.length?(range=x.slice(),n=Math.min(domain.length,range.length-1),scale):range.slice()},scale.invertExtent=function(y){return y=range.indexOf(y),[domain[y-1],domain[y]]},scale.copy=function(){return newThreshold(domain,range)},scale}function threshold(){return newThreshold([.5],[0,1],1)}function newPow(linear,exponent,domain){function powp(x){return 0>x?-Math.pow(-x,exponent):Math.pow(x,exponent)}function powb(x){return 0>x?-Math.pow(-x,1/exponent):Math.pow(x,1/exponent)}function scale(x){return linear(powp(x))}return scale.invert=function(x){return powb(linear.invert(x))},scale.exponent=function(x){return arguments.length?(exponent=+x,scale.domain(domain)):exponent},scale.domain=function(x){return arguments.length?(domain=x.map(Number),linear.domain(domain.map(powp)),scale):domain.slice()},scale.ticks=function(count){return ticks(domain,count)},scale.tickFormat=function(count,specifier){return __tickFormat(domain,count,specifier)},scale.nice=function(count){return scale.domain(nice(domain,tickRange(domain,count)[2]))},scale.copy=function(){return newPow(linear.copy(),exponent,domain)},rebind(scale,linear)}function sqrt(){return newPow(_linear(),.5,[0,1])}function pow(){return newPow(_linear(),1,[0,1])}function newQuantize(x0,x1,range){function scale(x){return range[Math.max(0,Math.min(i,Math.floor(kx*(x-x0))))]}function rescale(){return kx=range.length/(x1-x0),i=range.length-1,scale}var kx,i;return scale.domain=function(x){return arguments.length?(x0=+x[0],x1=+x[x.length-1],rescale()):[x0,x1]},scale.range=function(x){return arguments.length?(range=x.slice(),rescale()):range.slice()},scale.invertExtent=function(y){return y=range.indexOf(y),y=0>y?NaN:y/kx+x0,[y,y+1/kx]},scale.copy=function(){return newQuantize(x0,x1,range)},rescale()}function quantize(){return newQuantize(0,1,[0,1])}function newQuantile(domain,range){function rescale(){var k=0,q=range.length;for(thresholds=[];++k<q;)thresholds[k-1]=quantile(domain,k/q);return scale}function scale(x){return isNaN(x=+x)?void 0:range[bisectRight(thresholds,x)]}var thresholds;return scale.domain=function(x){if(!arguments.length)return domain;domain=[];for(var v,i=0,n=x.length;n>i;++i)v=x[i],null==v||isNaN(v=+v)||domain.push(v);return domain.sort(_ascending),rescale()},scale.range=function(x){return arguments.length?(range=x.slice(),rescale()):range.slice()},scale.quantiles=function(){return thresholds},scale.invertExtent=function(y){return y=range.indexOf(y),0>y?[NaN,NaN]:[y>0?thresholds[y-1]:domain[0],y<thresholds.length?thresholds[y]:domain[domain.length-1]]},scale.copy=function(){return newQuantile(domain,range)},rescale()}function _quantile(){return newQuantile([],[])}function steps(length,start,step){for(var steps=new Array(length),i=-1;++i<length;)steps[i]=start+step*i;return steps}function newOrdinal(domain,ranger){function scale(x){var k=x+"",i=index.get(k);if(!i){if("range"!==ranger.t)return;index.set(k,i=domain.push(x))}return range[(i-1)%range.length]}var index,range,rangeBand;return scale.domain=function(x){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(var xi,xk,i=-1,n=x.length;++i<n;)index.has(xk=(xi=x[i])+"")||index.set(xk,domain.push(xi));return scale[ranger.t].apply(scale,ranger.a)},scale.range=function(x){return arguments.length?(range=x.slice(),rangeBand=0,ranger={t:"range",a:arguments},scale):range.slice()},scale.rangePoints=function(x,padding){padding=arguments.length<2?0:+padding;var start=+x[0],stop=+x[1],step=domain.length<2?(start=(start+stop)/2,0):(stop-start)/(domain.length-1+padding);return range=steps(domain.length,start+step*padding/2,step),rangeBand=0,ranger={t:"rangePoints",a:arguments},scale},scale.rangeRoundPoints=function(x,padding){padding=arguments.length<2?0:+padding;var start=+x[0],stop=+x[1],step=domain.length<2?(start=stop=Math.round((start+stop)/2),0):(stop-start)/(domain.length-1+padding)|0;return range=steps(domain.length,start+Math.round(step*padding/2+(stop-start-(domain.length-1+padding)*step)/2),step),rangeBand=0,ranger={t:"rangeRoundPoints",a:arguments},scale},scale.rangeBands=function(x,padding,outerPadding){padding=arguments.length<2?0:+padding,outerPadding=arguments.length<3?padding:+outerPadding;var reverse=+x[1]<+x[0],start=+x[reverse-0],stop=+x[1-reverse],step=(stop-start)/(domain.length-padding+2*outerPadding);return range=steps(domain.length,start+step*outerPadding,step),reverse&&range.reverse(),rangeBand=step*(1-padding),ranger={t:"rangeBands",a:arguments},scale},scale.rangeRoundBands=function(x,padding,outerPadding){padding=arguments.length<2?0:+padding,outerPadding=arguments.length<3?padding:+outerPadding;var reverse=+x[1]<+x[0],start=+x[reverse-0],stop=+x[1-reverse],step=Math.floor((stop-start)/(domain.length-padding+2*outerPadding));return range=steps(domain.length,start+Math.round((stop-start-(domain.length-padding)*step)/2),step),reverse&&range.reverse(),rangeBand=Math.round(step*(1-padding)),ranger={t:"rangeRoundBands",a:arguments},scale},scale.rangeBand=function(){return rangeBand},scale.rangeExtent=function(){var t=ranger.a[0],start=t[0],stop=t[t.length-1];return start>stop&&(t=stop,stop=start,start=t),[start,stop]},scale.copy=function(){return newOrdinal(domain,ranger)},scale.domain(domain)}function ordinal(){return newOrdinal([],{t:"range",a:[[]]})}function newLog(linear,base,domain){function log(x){return(domain[0]<0?-Math.log(x>0?0:-x):Math.log(0>x?0:x))/Math.log(base)}function pow(x){return domain[0]<0?-Math.pow(base,-x):Math.pow(base,x)}function scale(x){return linear(log(x))}return scale.invert=function(x){return pow(linear.invert(x))},scale.base=function(x){return arguments.length?(base=+x,scale.domain(domain)):base},scale.domain=function(x){return arguments.length?(domain=x.map(Number),linear.domain(domain.map(log)),scale):domain.slice()},scale.nice=function(){var x=nice(linear.domain(),1);return linear.domain(x),domain=x.map(pow),scale},scale.ticks=function(){var u=domain[0],v=domain[domain.length-1];u>v&&(i=u,u=v,v=i);var k,t,i=Math.floor(log(u)),j=Math.ceil(log(v)),n=base%1?2:base,ticks=[];if(isFinite(j-i))if(u>0){for(--j,k=1;n>k;++k){if((t=pow(i)*k)<u)continue;ticks.push(t)}for(;++i<j;)for(k=1;n>k;++k)ticks.push(pow(i)*k);for(k=1;n>k&&!((t=pow(i)*k)>v);++k)ticks.push(t)}else{for(++i,k=n-1;k>=1;--k){if((t=pow(i)*k)<u)continue;ticks.push(t)}for(;++i<j;)for(k=n-1;k>=1;--k)ticks.push(pow(i)*k);for(k=n-1;k>=1&&!((t=pow(i)*k)>v);--k)ticks.push(t)}return ticks},scale.tickFormat=function(count,specifier){if(null==specifier?specifier=10===base?tickFormat10:tickFormatOther:"function"!=typeof specifier&&(specifier=___format(specifier)),null==count)return specifier;var e,k=Math.min(base,scale.ticks().length/count),f=domain[0]>0?(e=1e-12,Math.ceil):(e=-1e-12,Math.floor);return function(d){return pow(f(log(d)+e))/d>=k?specifier(d):""}},scale.copy=function(){return newLog(linear.copy(),base,domain)},rebind(scale,linear)}function log(){return newLog(_linear(),10,[1,10])}function newIdentity(domain){function scale(x){return+x}return scale.invert=scale,scale.domain=scale.range=function(x){return arguments.length?(domain=x.map(Number),scale):domain.slice()},scale.ticks=function(count){return ticks(domain,count)},scale.tickFormat=function(count,specifier){return __tickFormat(domain,count,specifier)},scale.copy=function(){return newIdentity(domain)},scale}function __identity(){return newIdentity([0,1])}function category20c(){return ordinal().range(["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"])}function category20b(){return ordinal().range(["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"])}function category20(){return ordinal().range(["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"])}function category10(){return ordinal().range(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"])}function _defaultView(node){return node&&(node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView)}function selection_dispatch(type,params){function dispatchConstant(){return dispatchEvent(this,type,params)}function dispatchFunction(){return dispatchEvent(this,type,params.apply(this,arguments))}return this.each("function"==typeof params?dispatchFunction:dispatchConstant)}function dispatchEvent(node,type,params){var window=_defaultView(node),event=window.CustomEvent;event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function _requote(string){return string.replace(requoteRe,"\\$&")}function selection_event(type,listener,capture){function add(){for(var ancestor=root,i=arguments.length>>1,ancestors=new Array(i);--i>=0;)ancestor=ancestor[arguments[(i<<1)+1]],ancestors[i]=i?ancestor._parent:ancestor;var l=listenerOf(listener,ancestors,arguments);filter&&(l=filterListenerOf(l)),remove.call(this),this.addEventListener(type,this[key]=l,l._capture=capture),l._listener=listener}function remove(){var l=this[key];l&&(this.removeEventListener(type,l,l._capture),delete this[key])}function removeAll(){var match,re=new RegExp("^__on([^.]+)"+_requote(type)+"$");for(var name in this)if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l._capture),delete this[name]}}var filter,n=arguments.length,key="__on"+type,root=this._root;return 2>n?(n=this.node()[key])&&n._listener:(3>n&&(capture=!1),(n=type.indexOf("."))>0&&(type=type.slice(0,n)),(filter=filterEvents.has(type))&&(type=filterEvents.get(type)),this.each(listener?n?add:noop:n?remove:removeAll))}function listenerOf(listener,ancestors,args){return function(event1){for(var i=ancestors.length,event0=_event;--i>=0;)args[i<<1]=ancestors[i].__data__;_event=event1;try{listener.apply(ancestors[0],args)}finally{_event=event0}}}function filterListenerOf(listener){return function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener(event)}}function noop(){}function selection_datum(value){return arguments.length?this.property("__data__",value):this.node().__data__}function selection_remove(){return this.each(function(){var parent=this.parentNode;parent&&parent.removeChild(this)})}function selectorOf(selector){return function(){return this.querySelector(selector)}}function namespace(name){var i=name.indexOf(":"),prefix=name;return i>=0&&(prefix=name.slice(0,i),name=name.slice(i+1)),namespaces.has(prefix)?{space:namespaces.get(prefix),local:name}:name}function selection_append(creator,selector){function append(){return this.appendChild(creator.apply(this,arguments))}function insert(){return this.insertBefore(creator.apply(this,arguments),selector.apply(this,arguments)||null)}return"function"!=typeof creator&&(creator=creatorOf(creator)),this.select(arguments.length<2?append:("function"!=typeof selector&&(selector=selectorOf(selector)),insert))}function creatorOf(name){function creator(){var document=this.ownerDocument,uri=this.namespaceURI;return uri?document.createElementNS(uri,name):document.createElement(name)}function creatorNS(){return this.ownerDocument.createElementNS(name.space,name.local)}return name=namespace(name),name.local?creatorNS:creator}function selection_html(value){function setConstant(){this.innerHTML=value}function setFunction(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}return arguments.length?(null==value&&(value=""),this.each("function"==typeof value?setFunction:setConstant)):this.node().innerHTML}function selection_text(value){function setConstant(){this.textContent=value}function setFunction(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}return arguments.length?(null==value&&(value=""),this.each("function"==typeof value?setFunction:setConstant)):this.node().textContent}function selection_class(name,value){function setConstant(){for(var i=-1;++i<n;)name[i](this,value)}function setFunction(){for(var i=-1,x=value.apply(this,arguments);++i<n;)name[i](this,x)}name=(name+"").trim().split(/^|\s+/);var n=name.length;if(arguments.length<2){var node=this.node(),i=-1;if(value=node.classList){for(;++i<n;)if(!value.contains(name[i]))return!1}else for(value=node.getAttribute("class");++i<n;)if(!classedRe(name[i]).test(value))return!1;return!0}return name=name.map(classerOf),this.each("function"==typeof value?setFunction:setConstant)}function classerOf(name){var re;return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);re||(re=classedRe(name));var c=node.getAttribute("class")||"";value?(re.lastIndex=0,re.test(c)||node.setAttribute("class",collapse(c+" "+name))):node.setAttribute("class",collapse(c.replace(re," ")))}}function collapse(string){return string.trim().replace(/\s+/g," ")}function classedRe(name){return new RegExp("(?:^|\\s+)"+_requote(name)+"(?:\\s+|$)","g")}function selection_property(name,value){function remove(){delete this[name]}function setConstant(){this[name]=value}function setFunction(){var x=value.apply(this,arguments);null==x?delete this[name]:this[name]=x}return arguments.length<2?this.node()[name]:this.each(null==value?remove:"function"==typeof value?setFunction:setConstant)}function selection_style(name,value,priority){function remove(){this.style.removeProperty(name)}function setConstant(){this.style.setProperty(name,value,priority)}function setFunction(){var x=value.apply(this,arguments);null==x?this.style.removeProperty(name):this.style.setProperty(name,x,priority)}var n=arguments.length;return 2>n?_defaultView(n=this.node()).getComputedStyle(n,null).getPropertyValue(name):(3>n&&(priority=""),this.each(null==value?remove:"function"==typeof value?setFunction:setConstant))}function selection_attr(name,value){function remove(){this.removeAttribute(name)}function removeNS(){this.removeAttributeNS(name.space,name.local)}function setConstant(){this.setAttribute(name,value)}function setConstantNS(){this.setAttributeNS(name.space,name.local,value)}function setFunction(){var x=value.apply(this,arguments);null==x?this.removeAttribute(name):this.setAttribute(name,x)}function setFunctionNS(){var x=value.apply(this,arguments);null==x?this.removeAttributeNS(name.space,name.local):this.setAttributeNS(name.space,name.local,x)}if(name=namespace(name),arguments.length<2){var node=this.node();return name.local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}return this.each(null==value?name.local?removeNS:remove:"function"==typeof value?name.local?setFunctionNS:setFunction:name.local?setConstantNS:setConstant)}function selection_each(callback){function visit(nodes,depth){var node,i=-1,n=nodes.length;if(--depth)for(var stack0=2*depth,stack1=stack0+1;++i<n;)(node=nodes[i])&&(stack[stack0]=node._parent.__data__,stack[stack1]=i,visit(node,depth));else for(;++i<n;)(node=nodes[i])&&(stack[0]=node.__data__,stack[1]=i,callback.apply(node,stack))}var depth=this._depth,stack=new Array(depth);return visit(this._root,depth),this}function selection_empty(){return!this.node()}function selection_size(){var size=0;return this.each(function(){++size}),size}function selection_node(){return firstNode(this._root,this._depth)}function firstNode(nodes,depth){var node,i=-1,n=nodes.length;if(--depth){for(;++i<n;)if((node=nodes[i])&&(node=firstNode(node,depth)))return node}else for(;++i<n;)if(node=nodes[i])return node}function selection_nodes(){var nodes=new Array(this.size()),i=-1;return this.each(function(){nodes[++i]=this}),nodes}function selection_call(){var callback=arguments[0];return callback.apply(arguments[0]=this,arguments),this}function arrayify(selection){return selection._root=arrayifyNode(selection._root,selection._depth)}function arrayifyNode(nodes,depth){var node,i=-1,n=nodes.length;if(--depth)for(;++i<n;)(node=nodes[i])&&(nodes[i]=arrayifyNode(node,depth));else if(!Array.isArray(nodes)){for(var array=new Array(n);++i<n;)array[i]=nodes[i];array._parent=nodes._parent,nodes=array}return nodes}function selection_sort(comparator){function compare(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}function visit(nodes,depth){if(--depth)for(var node,i=-1,n=nodes.length;++i<n;)(node=nodes[i])&&visit(node,depth);else nodes.sort(compare)}return comparator||(comparator=ascending),visit(arrayify(this),this._depth),this.order()}function ascending(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function selection_order(){return orderNode(this._root,this._depth),this}function orderNode(nodes,depth){var node,next,i=nodes.length;if(--depth)for(;--i>=0;)(node=nodes[i])&&orderNode(node,depth);else for(next=nodes[--i];--i>=0;)(node=nodes[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),next=node)}function emptyOf(selection){return new Selection(emptyNode(arrayify(selection),selection._depth),selection._depth)}function emptyNode(nodes,depth){var node,i=-1,n=nodes.length,empty=new Array(n);if(--depth)for(;++i<n;)(node=nodes[i])&&(empty[i]=emptyNode(node,depth));return empty._parent=nodes._parent,empty}function selection_exit(){return this._exit||(this._exit=emptyOf(this))}function selection_enter(){return this._enter||(this._enter=emptyOf(this),this._enter._update=this),this._enter}function selection_data(value,key){function visit(update,enter,exit,depth){var n,node,i=-1;if(depth--){var stack0=2*depth,stack1=stack0+1;for(n=update.length;++i<n;)(node=update[i])&&(stack[stack0]=node._parent.__data__,stack[stack1]=i,visit(node,enter[i],exit[i],depth))}else{var before,j=0;for(bind(update,enter,exit,value.apply(update._parent,stack)),n=update.length;++i<n;)if(before=enter[i]){for(i>=j&&(j=i+1);!(node=update[j])&&++j<n;);before._next=node||null}}}function bindIndex(update,enter,exit,data){var node,i=0,nodeLength=update.length,dataLength=data.length,minLength=Math.min(nodeLength,dataLength);for(enter.length=0,enter.length=dataLength,exit.length=0,exit.length=nodeLength;minLength>i;++i)(node=update[i])?node.__data__=data[i]:enter[i]=new EnterNode(update._parent,data[i]);for(;dataLength>i;++i)enter[i]=new EnterNode(update._parent,data[i]);for(;nodeLength>i;++i)(node=update[i])&&(exit[i]=update[i]);update.length=dataLength}function bindKey(update,enter,exit,data){var i,node,keyValue,dataLength=data.length,nodeLength=update.length,nodeByKeyValue=new Map,keyStack=new Array(2).concat(stack),keyValues=new Array(nodeLength);for(enter.length=0,enter.length=dataLength,exit.length=0,exit.length=nodeLength,i=0;nodeLength>i;++i)(node=update[i])&&(keyStack[0]=node.__data__,keyStack[1]=i,keyValues[i]=keyValue=key.apply(node,keyStack),nodeByKeyValue.has(keyValue)?exit[i]=node:nodeByKeyValue.set(keyValue,node));for(update.length=0,update.length=dataLength,i=0;dataLength>i;++i)keyStack[0]=data[i],keyStack[1]=i,keyValue=key.apply(update._parent,keyStack),(node=nodeByKeyValue.get(keyValue))?node!==!0&&(update[i]=node,node.__data__=data[i]):enter[i]=new EnterNode(update._parent,data[i]),nodeByKeyValue.set(keyValue,!0);for(i=0;nodeLength>i;++i)(node=nodeByKeyValue.get(keyValues[i]))!==!0&&(exit[i]=node)}if(!value){var data=new Array(this.size()),i=-1;return this.each(function(d){data[++i]=d}),data}var depth=this._depth-1,stack=new Array(2*depth),bind=key?bindKey:bindIndex;return"function"!=typeof value&&(value=valueOf_(value)),visit(this._root,this.enter()._root,this.exit()._root,depth),this}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}function valueOf_(value){return function(){return value}}function selection_filter(filter){function visit(nodes,depth){var node,subnodes,i=-1,n=nodes.length;if(--depth){var stack0=2*depth,stack1=stack0+1;for(subnodes=new Array(n);++i<n;)(node=nodes[i])&&(stack[stack0]=node._parent.__data__,stack[stack1]=i,subnodes[i]=visit(node,depth))}else for(subnodes=[];++i<n;)(node=nodes[i])&&(stack[0]=node.__data__,stack[1]=i,filter.apply(node,stack)&&subnodes.push(node));return subnodes._parent=nodes._parent,subnodes}var depth=this._depth,stack=new Array(2*depth);return"function"!=typeof filter&&(filter=filterOf(filter)),new Selection(visit(this._root,depth),depth)}function selection_selectAll(selector){function visit(nodes,depth){var node,subnode,i=-1,n=nodes.length,subnodes=new Array(n);if(--depth)for(var stack0=2*depth,stack1=stack0+1;++i<n;)(node=nodes[i])&&(stack[stack0]=node._parent.__data__,stack[stack1]=i,subnodes[i]=visit(node,depth));else for(;++i<n;)(node=nodes[i])&&(stack[0]=node.__data__,stack[1]=i,subnodes[i]=subnode=selector.apply(node,stack),subnode._parent=node);return subnodes._parent=nodes._parent,subnodes}var depth=this._depth,stack=new Array(2*depth);return"function"!=typeof selector&&(selector=selectorAllOf(selector)),new Selection(visit(this._root,depth),depth+1)}function selectorAllOf(selector){return function(){return this.querySelectorAll(selector)}}function selection_select(selector){function visit(nodes,update,depth){var node,subnode,i=-1,n=nodes.length,subnodes=new Array(n);if(--depth)for(var stack0=2*depth,stack1=stack0+1;++i<n;)(node=nodes[i])&&(stack[stack0]=node._parent.__data__,stack[stack1]=i,subnodes[i]=visit(node,update&&update[i],depth));else for(;++i<n;)(node=nodes[i])&&(stack[0]=node.__data__,stack[1]=i,(subnode=selector.apply(node,stack))&&("__data__"in node&&(subnode.__data__=node.__data__),update&&(update[i]=subnode,delete nodes[i]),subnodes[i]=subnode));return subnodes._parent=nodes._parent,subnodes}var depth=this._depth,stack=new Array(2*depth);return"function"!=typeof selector&&(selector=selectorOf(selector)),new Selection(visit(this._root,this._update&&this._update._root,depth),depth)}function Selection(root,depth){this._root=root,this._depth=depth,this._enter=this._update=this._exit=null}function _selection(){return new Selection([document.documentElement],1)}function select(selector){return new Selection(["string"==typeof selector?document.querySelector(selector):selector],1)}function selectAll(selector){return new Selection("string"==typeof selector?document.querySelectorAll(selector):selector,1)}var __scale={get category10(){return category10},get category20(){return category20},get category20b(){return category20b},get category20c(){return category20c},get identity(){return __identity},get linear(){return _linear},get log(){return log},get ordinal(){return ordinal},get pow(){return pow},get quantile(){return _quantile},get quantize(){return quantize},get sqrt(){return sqrt},get threshold(){return threshold},get time(){return time},get utcTime(){return utcTime}},csv=_dsv(","),tsv=_dsv("	");dispatch.prototype=Dispatch.prototype,xhrDsv("text/tab-separated-values",tsv),xhrDsv("text/csv",csv);var prefixExponent,json=xhrType("application/json",function(request){return JSON.parse(request.responseText)}),ascendingBisect=bisector(_ascending),bisectRight=ascendingBisect.right,enUs={decimal:".",thousands:",",grouping:[3],currency:["$",""]},formatTypes={"":formatDefault,"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:formatPrefixAuto,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],_defaultLocale=_locale(enUs),___format=_defaultLocale.format,formatPrefix=_defaultLocale.formatPrefix,_enUs={dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},_t0=new Date,_t1=new Date,second=newInterval(function(date){date.setMilliseconds(0)},function(date,step){date.setTime(+date+1e3*step)},function(start,end){return(end-start)/1e3}),minute=newInterval(function(date){date.setSeconds(0,0)},function(date,step){date.setTime(+date+6e4*step)},function(start,end){return(end-start)/6e4}),hour=newInterval(function(date){date.setMinutes(0,0,0)},function(date,step){date.setTime(+date+36e5*step)},function(start,end){return(end-start)/36e5}),day=newInterval(function(date){date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step)},function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864e5}),sunday=weekday(0),monday=weekday(1),month=newInterval(function(date){date.setHours(0,0,0,0),date.setDate(1)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),year=newInterval(function(date){date.setHours(0,0,0,0),date.setMonth(0,1)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()}),utcSecond=newInterval(function(date){date.setUTCMilliseconds(0)},function(date,step){date.setTime(+date+1e3*step)},function(start,end){return(end-start)/1e3}),utcMinute=newInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+6e4*step)},function(start,end){return(end-start)/6e4}),utcHour=newInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+36e5*step)},function(start,end){return(end-start)/36e5}),utcDay=newInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864e5}),utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcMonth=newInterval(function(date){date.setUTCHours(0,0,0,0),date.setUTCDate(1)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),utcYear=newInterval(function(date){date.setUTCHours(0,0,0,0),date.setUTCMonth(0,1)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,_requoteRe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,defaultLocale=__locale(_enUs),__format=defaultLocale.format,utcFormat=defaultLocale.utcFormat,reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,reRgbPercent=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,reHslPercent=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/;
color.prototype=Color.prototype={displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}};var named=(new Map).set("aliceblue",15792383).set("antiquewhite",16444375).set("aqua",65535).set("aquamarine",8388564).set("azure",15794175).set("beige",16119260).set("bisque",16770244).set("black",0).set("blanchedalmond",16772045).set("blue",255).set("blueviolet",9055202).set("brown",10824234).set("burlywood",14596231).set("cadetblue",6266528).set("chartreuse",8388352).set("chocolate",13789470).set("coral",16744272).set("cornflowerblue",6591981).set("cornsilk",16775388).set("crimson",14423100).set("cyan",65535).set("darkblue",139).set("darkcyan",35723).set("darkgoldenrod",12092939).set("darkgray",11119017).set("darkgreen",25600).set("darkgrey",11119017).set("darkkhaki",12433259).set("darkmagenta",9109643).set("darkolivegreen",5597999).set("darkorange",16747520).set("darkorchid",10040012).set("darkred",9109504).set("darksalmon",15308410).set("darkseagreen",9419919).set("darkslateblue",4734347).set("darkslategray",3100495).set("darkslategrey",3100495).set("darkturquoise",52945).set("darkviolet",9699539).set("deeppink",16716947).set("deepskyblue",49151).set("dimgray",6908265).set("dimgrey",6908265).set("dodgerblue",2003199).set("firebrick",11674146).set("floralwhite",16775920).set("forestgreen",2263842).set("fuchsia",16711935).set("gainsboro",14474460).set("ghostwhite",16316671).set("gold",16766720).set("goldenrod",14329120).set("gray",8421504).set("green",32768).set("greenyellow",11403055).set("grey",8421504).set("honeydew",15794160).set("hotpink",16738740).set("indianred",13458524).set("indigo",4915330).set("ivory",16777200).set("khaki",15787660).set("lavender",15132410).set("lavenderblush",16773365).set("lawngreen",8190976).set("lemonchiffon",16775885).set("lightblue",11393254).set("lightcoral",15761536).set("lightcyan",14745599).set("lightgoldenrodyellow",16448210).set("lightgray",13882323).set("lightgreen",9498256).set("lightgrey",13882323).set("lightpink",16758465).set("lightsalmon",16752762).set("lightseagreen",2142890).set("lightskyblue",8900346).set("lightslategray",7833753).set("lightslategrey",7833753).set("lightsteelblue",11584734).set("lightyellow",16777184).set("lime",65280).set("limegreen",3329330).set("linen",16445670).set("magenta",16711935).set("maroon",8388608).set("mediumaquamarine",6737322).set("mediumblue",205).set("mediumorchid",12211667).set("mediumpurple",9662683).set("mediumseagreen",3978097).set("mediumslateblue",8087790).set("mediumspringgreen",64154).set("mediumturquoise",4772300).set("mediumvioletred",13047173).set("midnightblue",1644912).set("mintcream",16121850).set("mistyrose",16770273).set("moccasin",16770229).set("navajowhite",16768685).set("navy",128).set("oldlace",16643558).set("olive",8421376).set("olivedrab",7048739).set("orange",16753920).set("orangered",16729344).set("orchid",14315734).set("palegoldenrod",15657130).set("palegreen",10025880).set("paleturquoise",11529966).set("palevioletred",14381203).set("papayawhip",16773077).set("peachpuff",16767673).set("peru",13468991).set("pink",16761035).set("plum",14524637).set("powderblue",11591910).set("purple",8388736).set("rebeccapurple",6697881).set("red",16711680).set("rosybrown",12357519).set("royalblue",4286945).set("saddlebrown",9127187).set("salmon",16416882).set("sandybrown",16032864).set("seagreen",3050327).set("seashell",16774638).set("sienna",10506797).set("silver",12632256).set("skyblue",8900331).set("slateblue",6970061).set("slategray",7372944).set("slategrey",7372944).set("snow",16775930).set("springgreen",65407).set("steelblue",4620980).set("tan",13808780).set("teal",32896).set("thistle",14204888).set("tomato",16737095).set("turquoise",4251856).set("violet",15631086).set("wheat",16113331).set("white",16777215).set("whitesmoke",16119285).set("yellow",16776960).set("yellowgreen",10145074),darker=.7,brighter=1/darker,____prototype=rgb.prototype=Rgb.prototype=new Color;____prototype.brighter=function(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k)},____prototype.darker=function(k){return k=null==k?darker:Math.pow(darker,k),new Rgb(this.r*k,this.g*k,this.b*k)},____prototype.rgb=function(){return this},____prototype.displayable=function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255},____prototype.toString=function(){return _format(this.r,this.g,this.b)};var ___prototype=hsl.prototype=Hsl.prototype=new Color;___prototype.brighter=function(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k)},___prototype.darker=function(k){return k=null==k?darker:Math.pow(darker,k),new Hsl(this.h,this.s,this.l*k)},___prototype.rgb=function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(.5>l?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(120>h?h+240:h-120,m1,m2))},___prototype.displayable=function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1};var deg2rad=Math.PI/180,_rad2deg=180/Math.PI,A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A,prototype=cubehelix.prototype=Cubehelix.prototype=new Color;prototype.brighter=function(k){return k=null==k?brighter:Math.pow(brighter,k),new Cubehelix(this.h,this.s,this.l*k)},prototype.darker=function(k){return k=null==k?darker:Math.pow(darker,k),new Cubehelix(this.h,this.s,this.l*k)},prototype.rgb=function(){var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)))};var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g"),interpolators=[function(a,b){var c,t=typeof b;return("string"===t?(c=color(b))?(b=c,interpolateRgb):interpolateString:b instanceof color?interpolateRgb:Array.isArray(b)?interpolateArray:"object"===t&&isNaN(b)?interpolateObject:interpolateNumber)(a,b)}],e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),millisecondsPerSecond=1e3,millisecondsPerMinute=60*millisecondsPerSecond,millisecondsPerHour=60*millisecondsPerMinute,millisecondsPerDay=24*millisecondsPerHour,millisecondsPerWeek=7*millisecondsPerDay,millisecondsPerMonth=30*millisecondsPerDay,millisecondsPerYear=365*millisecondsPerDay,tickIntervals=[["seconds",1,millisecondsPerSecond],["seconds",5,5*millisecondsPerSecond],["seconds",15,15*millisecondsPerSecond],["seconds",30,30*millisecondsPerSecond],["minutes",1,millisecondsPerMinute],["minutes",5,5*millisecondsPerMinute],["minutes",15,15*millisecondsPerMinute],["minutes",30,30*millisecondsPerMinute],["hours",1,millisecondsPerHour],["hours",3,3*millisecondsPerHour],["hours",6,6*millisecondsPerHour],["hours",12,12*millisecondsPerHour],["days",1,millisecondsPerDay],["days",2,2*millisecondsPerDay],["weeks",1,millisecondsPerWeek],["months",1,millisecondsPerMonth],["months",3,3*millisecondsPerMonth],["years",1,millisecondsPerYear]],bisectTickIntervals=bisector(function(method){return method[2]}).right,formatMillisecond=__format(".%L"),formatSecond=__format(":%S"),formatMinute=__format("%I:%M"),formatHour=__format("%I %p"),formatDay=__format("%a %d"),formatWeek=__format("%b %d"),formatMonth=__format("%B"),formatYear=__format("%Y"),formatUTCMillisecond=utcFormat(".%L"),formatUTCSecond=utcFormat(":%S"),formatUTCMinute=utcFormat("%I:%M"),formatUTCHour=utcFormat("%I %p"),formatUTCDay=utcFormat("%a %d"),formatUTCWeek=utcFormat("%b %d"),formatUTCMonth=utcFormat("%B"),formatUTCYear=utcFormat("%Y"),tickFormat10=___format(".0e"),tickFormatOther=___format(","),requoteRe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,filterEvents=new Map,_event=null;if("undefined"!=typeof document){var _element=document.documentElement;"onmouseenter"in _element||filterEvents.set("mouseenter","mouseover").set("mouseleave","mouseout")}var namespaces=(new Map).set("svg","http://www.w3.org/2000/svg").set("xhtml","http://www.w3.org/1999/xhtml").set("xlink","http://www.w3.org/1999/xlink").set("xml","http://www.w3.org/XML/1998/namespace").set("xmlns","http://www.w3.org/2000/xmlns/");EnterNode.prototype={appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next||this._next)}};var filterOf=function(selector){return function(){return this.matches(selector)}};if("undefined"!=typeof document){var element=document.documentElement;if(!element.matches){var vendorMatches=element.webkitMatchesSelector||element.msMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector;filterOf=function(selector){return function(){return vendorMatches.call(this,selector)}}}}Selection.prototype=_selection.prototype={select:selection_select,selectAll:selection_selectAll,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,"class":selection_class,classed:selection_class,text:selection_text,html:selection_html,append:selection_append,insert:selection_append,remove:selection_remove,datum:selection_datum,event:selection_event,on:selection_event,dispatch:selection_dispatch};const functor=function(x){return"function"==typeof x?x:function(){return x}};var d3_bundle={get event(){return _event},select:select,selectAll:selectAll,functor:functor,scale:__scale,format:___format,range:_range,ascending:_ascending,descending:descending,sum:sum,json:json,xhr:xhr};return d3_bundle});
},{}],9:[function(require,module,exports){
var formdb=require("formdb");module.exports=function(){var form=new formdb.Form("#search-form");picc.form.minifyQueryString(form),picc.ready(function(){if(location.hash.length>1){var id=location.hash.substr(1);picc.ui.expandAccordions(function(){return this.id&&this.id===id}),location.hash="",location.hash="#"+id}})};
},{"formdb":16}],10:[function(require,module,exports){
"use strict";function getter(key){if("string"!=typeof key)return function(d){return d[key]};if(key.indexOf(".")>-1){var bits=key.split("."),len=bits.length;return function(d){if(key in d)return d[key];for(var i=0;len>i;i++)if(d=d[bits[i]],null===d||void 0===d)return d;return d}}return function(d){return d[key]}}"undefined"!=typeof window&&(require("aight"),require("./components"));var querystring=require("querystring"),d3=require("./d3"),async=require("async"),formdb=require("formdb"),picc={};picc.d3=d3,picc.errors={NO_SCHOOL_ID:"No school ID was provided.",NO_SUCH_SCHOOL:"No school found."},picc.RACE_ETHNICITY_LABELS={aian:"American Indian/Alaska Native",asian:"Asian",asian_pacific_islander:"Asian/Pacific Islander",black:"Black",black_non_hispanic:"Black non-Hispanic",hispanic:"Hispanic",nhpi:"Native Hawaiian/Pacific Islander",non_resident_alien:"Non-resident alien",two_or_more:"Two or more races",unknown:"Unknown",white:"White",white_non_hispanic:"White non-Hispanic"},picc.API=function(){function addAPIKey(params){var param="api_key";return"object"==typeof params?(API.key&&(params[param]=API.key),collapseArrays(params),params=querystring.stringify(params)):API.key&&(params+=["&",param,"=",API.key].join("")),params}function join(list,glue){for(var i=0;i<list.length;i++){var str=String(list[i]);str.charAt(0)===glue?list[i]=str.substr(1):str.charAt(str.length-1)===glue&&(list[i]=str.substr(0,str.length-1))}return list.join(glue)}function collapseArrays(obj,glue){glue||(glue=",");for(var key in obj)Array.isArray(obj[key])&&(obj[key]=obj[key].join(glue));return obj}var API={url:"/api/v1/",key:""},errors=picc.errors,schoolEndpoint="schools/",idField="id";return API.get=function(uri,params,done){2===arguments.length?(done=params,params=addAPIKey({})):params&&(params=addAPIKey(params)),params&&(uri=join([uri,params],"?"));var url=API.url?join([API.url,uri],"/"):uri;return console.info('[API] get: "%s"',url),d3.json(url,function(error,data){return data&&data.errors&&data.errors.length&&(error=data.errors[0]),done(error,data)})},API.endpoint=function(uri){return function(params,done){return API.get(uri,params,done)}},API.search=API.endpoint(schoolEndpoint),API.getSchool=function(id,done){var params={};return params[idField]=id,API.get(schoolEndpoint,params,function(error,res){var meta=res.metadata||res;return error||!meta.total?done(error?error.responseText||error||errors.NO_SUCH_SCHOOL:errors.NO_SUCH_SCHOOL):(res.total>1&&console.warn('More than one school found for ID: "'+id+'"'),done(null,res.results[0]))})},API.getAll=function(urls,done){return Object.keys(urls).forEach(function(key){var url=urls[key];urls[key]=Array.isArray(url)?function(done){var method=url.shift();return"string"==typeof method&&(method=API[method]),url.push(done),method.apply(API,url)}:function(done){return API.get(url,done)}}),async.parallel(urls,done)},API}();var NA="--";picc.format=function(){var formatter=function(fmt,_empty){var round=!1;return"string"==typeof fmt&&(round=!!fmt.match(/d$/),fmt=d3.format(fmt)),function(key,empty){return empty=empty||_empty,"string"==typeof empty&&(empty=d3.functor(empty)),key=key?picc.access(key):function(v){return v},function(d){var value=key.call(this,d);return empty&&""===value||isNaN(String(value))?empty.call(d):(round&&(value=Math.round(value)),fmt.call(d,value,key))}}},map=function(keys,fallback){return function(key){return keys[key]||fallback}},range=function(ranges){var i,len=ranges.length;return function(value){for(value=+value,i=0;len>i;i++){var range=ranges[i];if(value>=range[0]&&value<range[1])return range[2]}}};return{dollars:formatter("$,d",NA),percent:formatter(".0%",NA),number:formatter(",d",NA),plural:function(key,singular,plural){return key=picc.access(key),plural||(plural=singular+"s"),function(d){return 1==key.call(this,d)?singular:plural}},map:function(key,values,empty){return formatter(map(values)).call(this,key,empty)},control:formatter(map({1:"Public",2:"Private",3:"For-Profit"},"control unknown")),controlClass:formatter(map({1:"icon-public",2:"icon-private",3:"icon-profit"},"")),preddeg:formatter(map({2:"2",3:"4"},"")),empty:function(key){return key=picc.access(key),function(d){return!key.call(this,d)}},notEmpty:function(key){return key=picc.access(key),function(d){return!!key.call(this,d)}},sizeCategory:formatter(range([[0,2e3,"Small"],[2e3,15e3,"Medium"],[15e3,1/0,"Large"]]),"size unknown"),sizeCategoryClass:formatter(range([[0,2e3,"icon-small"],[2e3,15e3,"icon-medium"],[15e3,1/0,"icon-large"]]),""),locale:formatter(map({11:"City",12:"City",13:"City",21:"Suburban",22:"Suburban",23:"Suburban",31:"Town",32:"Town",33:"Town",41:"Rural",42:"Rural",43:"Rural"},"locale unknown")),localeClass:formatter(map({11:"icon-city",12:"icon-city",13:"icon-city",21:"icon-suburban",22:"icon-suburban",23:"icon-suburban",31:"icon-town",32:"icon-town",33:"icon-town",41:"icon-rural",42:"icon-rural",43:"icon-rural"},"")),href:function(key){return key=picc.access(key),function(d){var url=key.call(this,d);return url?0!==String(url).indexOf("http")?"http://"+url:url:null}}}}(),picc.fields={ID:"id",NAME:"school.name",CITY:"school.city",STATE:"school.state",ZIP_CODE:"school.zip",SCHOOL_URL:"school.school_url",LOCATION:"location",OWNERSHIP:"school.ownership",LOCALE:"school.locale",REGION_ID:"school.region_id",RELIGIOUS:"school.religious_affiliation",OPERATING:"school.operating",SIZE:"2013.student.size",ONLINE_ONLY:"school.online_only",WOMEN_ONLY:"school.women_only",MEN_ONLY:"school.men_only",MINORITY_SERVING:"school.minority_serving",PREDOMINANT_DEGREE:"school.degrees_awarded.predominant",HIGHEST_DEGREE:"school.degrees_awarded.highest",UNDER_INVESTIGATION:"school.under_investigation",NET_PRICE:"2013.cost.avg_net_price.overall",NET_PRICE_BY_INCOME:"2013.cost.net_price",COMPLETION_RATE:"2013.completion.rate_suppressed.overall",RETENTION_RATE:"2013.student.retention_rate",REPAYMENT_RATE:"2013.repayment.3_yr_repayment_suppressed.overall",AVERAGE_TOTAL_DEBT:"2013.aid.median_debt_suppressed.completers.overall",MONTHLY_LOAN_PAYMENT:"2013.aid.median_debt_suppressed.completers.monthly_payments",AID_PERCENTAGE:"2013.aid.federal_loan_rate",PELL_PERCENTAGE:"2013.aid.pell_grant_rate",MEDIAN_EARNINGS:"2011.earnings.10_yrs_after_entry.median",EARNINGS_GT_25K:"2011.earnings.6_yrs_after_entry.percent_greater_than_25000",PROGRAM_PERCENTAGE:"2013.academics.program_percentage",PROGRAM_OFFERED:"2013.academics.program",DEGREE_OFFERED:"2013.academics.program_available",PART_TIME_SHARE:"2013.student.part_time_share",FEMALE_SHARE:"2013.student.demographics.female_share",RACE_ETHNICITY:"2013.student.demographics.race_ethnicity",AGE_ENTRY:"2013.student.demographics.age_entry",ACT_25TH_PCTILE:"2013.admissions.act_scores.25th_percentile.cumulative",ACT_75TH_PCTILE:"2013.admissions.act_scores.75th_percentile.cumulative",ACT_MIDPOINT:"2013.admissions.act_scores.midpoint.cumulative",SAT_CUMULATIVE_AVERAGE:"2013.admissions.sat_scores.average.overall",SAT_READING_25TH_PCTILE:"2013.admissions.sat_scores.25th_percentile.critical_reading",SAT_READING_75TH_PCTILE:"2013.admissions.sat_scores.75th_percentile.critical_reading",SAT_READING_MIDPOINT:"2013.admissions.sat_scores.midpoint.critical_reading",SAT_MATH_25TH_PCTILE:"2013.admissions.sat_scores.25th_percentile.math",SAT_MATH_75TH_PCTILE:"2013.admissions.sat_scores.75th_percentile.math",SAT_MATH_MIDPOINT:"2013.admissions.sat_scores.midpoint.math",SAT_WRITING_25TH_PCTILE:"2013.admissions.sat_scores.25th_percentile.writing",SAT_WRITING_75TH_PCTILE:"2013.admissions.sat_scores.75th_percentile.writing",SAT_WRITING_MIDPOINT:"2013.admissions.sat_scores.midpoint.writing",NET_PRICE_CALC_URL:"school.price_calculator_url"},picc.access=function(key){return"function"==typeof key?key:getter(key)},picc.access.composed=function(key0,key1,key2){var keys=[].slice.call(arguments),len=keys.length;return function(d){var _keys=keys.map(function(key){return"function"==typeof key?key.call(this,d):key},this),_key=_keys.join(".");if(_key in d)return d[_key];for(var value=d,i=0;len>i;i++){var key=keys[i];if("function"==typeof key&&(key=key.call(this,d),null===key))return key;if(value=getter(key)(value),void 0===value||null===value)break}return value}},picc.access.publicPrivate=function(d){var ownership=picc.access(picc.fields.OWNERSHIP)(d);switch(+ownership){case 1:return"public";case 2:case 3:return"private"}return null},picc.access.yearDesignation=function(d){var degree=picc.access(picc.fields.PREDOMINANT_DEGREE)(d);switch(+degree){case 2:return"lt_four_year";case 3:return"four_year"}return null},picc.access.nationalStat=function(stat,suffix){return suffix?(suffix=picc.access(suffix),function(d){var key=suffix.apply(this,arguments);return this.getAttribute(["data",stat,key].join("-"))}):function(){return this.getAttribute("data-"+stat)}},picc.access.netPrice=picc.access.composed(picc.fields.NET_PRICE),picc.access.netPriceByIncomeLevel=function(level){return picc.access.composed(picc.fields.NET_PRICE_BY_INCOME,picc.access.publicPrivate,"by_income_level",level)},picc.access.earningsMedian=picc.access.composed(picc.fields.MEDIAN_EARNINGS),picc.access.earnings25k=picc.access.composed(picc.fields.EARNINGS_GT_25K),picc.access.completionRate=picc.access.composed(picc.fields.COMPLETION_RATE),picc.access.partTimeShare=picc.access.composed(picc.fields.PART_TIME_SHARE),picc.access.retentionRate=function(d){var retention=picc.access(picc.fields.RETENTION_RATE)(d);return retention.four_year.full_time||retention.lt_four_year.full_time},picc.access.size=picc.access.composed(picc.fields.SIZE),picc.access.location=picc.access(picc.fields.LOCATION),picc.access.specialDesignations=function(d){var designations=[],SPECIAL_DESIGNATIONS=picc.SPECIAL_DESIGNATIONS||{};+picc.access(picc.fields.WOMEN_ONLY)(d)?designations.push(SPECIAL_DESIGNATIONS.women_only):+picc.access(picc.fields.MEN_ONLY)(d)&&designations.push(SPECIAL_DESIGNATIONS.men_only);var religious=picc.access(picc.fields.RELIGIOUS)(d);religious in picc.RELIGIOUS_AFFILIATIONS_BY_NUMBER&&designations.push(picc.RELIGIOUS_AFFILIATIONS_BY_NUMBER[religious]);var minorityServing=picc.access(picc.fields.MINORITY_SERVING)(d);if(minorityServing)for(var key in SPECIAL_DESIGNATIONS)+minorityServing[key]&&designations.push(SPECIAL_DESIGNATIONS[key]);return designations},picc.access.programAreas=function(d,metadata){if(metadata||(metadata=d.metadata),!metadata||!metadata.dictionary)return[];var dictionary=metadata.dictionary,field=picc.fields.PROGRAM_PERCENTAGE,programs=picc.access(field)(d);return programs?(field=field.replace(/^\d+\./,""),Object.keys(programs||{}).map(function(key){var value=programs[key],dictKey=[field,key].join("."),name=dictionary[dictKey]?dictionary[dictKey].label||key:key;return{program:name,percent:value}}).filter(function(d){return+d.percent>0})):[]},picc.nullify=function(value){return"NULL"===value?null:value},picc.template=function(template){return template=String(template),function(data){return template.replace(/{\s*(\w+)\s*}/g,function(_k,key){return picc.access(key)(data)})}},picc.template.resolve=function(template,data){return picc.template(template).call(this,data)},picc.school={},picc.school.directives=function(){var access=picc.access,format=picc.format,percent=format.percent(),fields=picc.fields,href=function(d){var name=access(fields.NAME)(d);return name=name?name.replace(/\W+/g,"-"):"(unknown)",[picc.BASE_URL,"/school/?",d.id,"-",name].join("")},underInvestigation={"@aria-hidden":function(d){var flag=access(fields.UNDER_INVESTIGATION)(d);return 1!==+flag}},years=format.preddeg(fields.PREDOMINANT_DEGREE);return{title:{link:{text:access(fields.NAME),"@href":href}},school_link:{"@href":format.href(fields.SCHOOL_URL),text:function(d){var url=picc.access(fields.SCHOOL_URL)(d);return url?url.split("/").shift().replace(/^www\./,""):url}},share_link:{"@href":function(d){return picc.template.resolve(this.getAttribute("data-href"),{url:encodeURIComponent(document.location.href)})}},response_link:{"@href":function(d){var href=format.href(fields.SCHOOL_URL)(d);if(href){var suffix="/CollegeScorecard";return href+="/"===href.substr(-1)?suffix.substr(1):suffix}return""}},name:access(fields.NAME),city:access(fields.CITY),state:access(fields.STATE),under_investigation:underInvestigation,under_investigation2:underInvestigation,size_number:format.number(fields.SIZE),control:{"@class":format.controlClass(fields.OWNERSHIP),value:format.control(fields.OWNERSHIP)},locale_name:{"@class":format.localeClass(fields.LOCALE),value:format.locale(fields.LOCALE)},years:{"@class":function(d){return years(d)?"n-year":"certificate"},number:years,label:function(d){return years(d)?"Year":"Certificate"}},size_category:{"@class":format.sizeCategoryClass(fields.SIZE),value:format.sizeCategory(fields.SIZE)},special_designations:access.specialDesignations,average_cost:format.dollars(access.netPrice),average_cost_meter:{"@value":access.netPrice,label:format.dollars(function(){return this.average})},net_price_income1:format.dollars(access.netPriceByIncomeLevel("0-30000")),net_price_income2:format.dollars(access.netPriceByIncomeLevel("30001-48000")),net_price_income3:format.dollars(access.netPriceByIncomeLevel("48001-75000")),net_price_income4:format.dollars(access.netPriceByIncomeLevel("75001-110000")),net_price_income5:format.dollars(access.netPriceByIncomeLevel("110001-plus")),advantage_rate:format.percent(fields.EARNINGS_GT_25K),grad_rate:format.percent(access.completionRate),grad_rate_meter:{"@value":access.completionRate,label:format.percent(function(){return this.average})},average_salary:format.dollars(access.earningsMedian),average_salary_meter:{"@value":access.earningsMedian,label:format.dollars(function(){return this.average})},repayment_rate_percent:format.percent(fields.REPAYMENT_RATE),repayment_rate_meter:{"@value":access(fields.REPAYMENT_RATE),label:format.percent(function(){return this.average})},average_total_debt:format.dollars(fields.AVERAGE_TOTAL_DEBT),average_monthly_loan_payment:format.dollars(fields.MONTHLY_LOAN_PAYMENT),federal_aid_percentage:format.percent(fields.AID_PERCENTAGE),pell_grant_percentage:format.percent(fields.PELL_PERCENTAGE),earnings_gt_25k:format.percent(access.earnings25k),earnings_gt_25k_meter:{"@value":access.earnings25k,label:format.percent(function(){return this.average})},retention_rate_value:format.percent(access.retentionRate),retention_rate_meter:{"@value":access.retentionRate,label:format.percent(function(){return this.average})},full_time_percent:format.number(function(d){var pt=access.partTimeShare(d);return null===pt?null:100*(1-pt)}),part_time_percent:format.number(function(d){var pt=access.partTimeShare(d);return null===pt?null:100*pt}),gender_values:function(d){var female=access(fields.FEMALE_SHARE)(d);return null===female?[]:(female=+female,[{label:"Female",value:female,percent:percent(female)},{label:"Male",value:1-female,percent:percent(1-female)}])},race_ethnicity_values:function(d){if(!d.metadata)return[];var values=access(fields.RACE_ETHNICITY)(d);return values?Object.keys(values).map(function(key){var value=picc.nullify(values[key]),label=picc.RACE_ETHNICITY_LABELS[key]||key;return{key:key,label:label,value:value,percent:value>=.005?percent(value):"<1%"}}).filter(function(d){return d.value>0}):[]},available_programs:function(d){var areas=access.programAreas(d);return areas.sort(function(a,b){return d3.ascending(a.program,b.program)})},num_available_programs:format.number(function(d){return access.programAreas(d).length}),popular_programs:function(d){var areas=access.programAreas(d);if(areas.length){var total=d3.sum(areas,picc.access("percent"));areas.forEach(function(d){d.value=+d.percent/total,d.percent=percent(d.value)})}return areas.sort(function(a,b){return d3.descending(a.value,b.value)}).slice(0,5)},programs_plural:format.plural(function(d){return access.programAreas(d).length},"Program"),age_entry:function(d){var age=picc.access(fields.AGE_ENTRY)(d);return age?age:NA},more_link:{"@href":href},act_scores_visible:{"@aria-hidden":format.empty(fields.ACT_MIDPOINT)},act_scores_invisible:{"@aria-hidden":format.notEmpty(fields.ACT_MIDPOINT)},act_scores:{"@lower":access(fields.ACT_25TH_PCTILE),"@upper":access(fields.ACT_75TH_PCTILE)},sat_reading_scores_visible:{"@aria-hidden":format.empty(fields.SAT_READING_MIDPOINT)},sat_reading_scores_invisible:{"@aria-hidden":format.notEmpty(fields.SAT_READING_MIDPOINT)},sat_reading_scores:{"@lower":access(fields.SAT_READING_25TH_PCTILE),"@upper":access(fields.SAT_READING_75TH_PCTILE)},sat_math_scores_visible:{"@aria-hidden":format.empty(fields.SAT_MATH_MIDPOINT)},sat_math_scores_invisible:{"@aria-hidden":format.notEmpty(fields.SAT_MATH_MIDPOINT)},sat_math_scores:{"@lower":access(fields.SAT_MATH_25TH_PCTILE),"@upper":access(fields.SAT_MATH_75TH_PCTILE)},sat_writing_scores_visible:{"@aria-hidden":format.empty(fields.SAT_WRITING_MIDPOINT)},sat_writing_scores_invisible:{"@aria-hidden":format.notEmpty(fields.SAT_WRITING_MIDPOINT)},sat_writing_scores:{"@lower":access(fields.SAT_WRITING_25TH_PCTILE),"@upper":access(fields.SAT_WRITING_75TH_PCTILE)},net_price_calculator:{"@href":format.href(fields.NET_PRICE_CALC_URL)}}}(),picc.form={},picc.form.mappings={sort:{advantage:picc.fields.EARNINGS_GT_25K,salary:picc.fields.MEDIAN_EARNINGS,name:picc.fields.NAME,size:picc.fields.SIZE,avg_net_price:picc.fields.NET_PRICE,completion_rate:picc.fields.COMPLETION_RATE},control:{"public":1,"private":2,profit:3},size:{small:"..1999",medium:"2000..15000",large:"15001.."},degree:{a:"2",b:"3"}},picc.form.minifyQueryString=function(form){return"object"!=typeof form&&(form=new formdb.Form(form)),form.on("submit",function(data,e){var url=[form.element.action,querystring.stringify(data)].join("?").replace("?&","?").replace(/&{2,}/g,"&").replace(/&$/,"");return window.location=url,e.preventDefault(),!1}),form},picc.form.prepareParams=function(){function mapSize(value){return Array.isArray(value)?value.map(mapSize):picc.form.mappings.size[value]}function mapControl(value){return Array.isArray(value)?value.map(mapControl):picc.form.mappings.control[value]}function empty(value){return""===value||null===value||void 0===value||Array.isArray(value)&&empty(value[0])}var fields=picc.fields,alias={name:fields.NAME,avg_net_price:fields.NET_PRICE+"__range",completion_rate:fields.COMPLETION_RATE+"__range",median_earnings:fields.MEDIAN_EARNINGS+"__range",monthly_payments:fields.MONTHLY_LOAN_PAYMENT+"__range",religious:fields.RELIGIOUS,serving:function(query,value,key){var field=[fields.MINORITY_SERVING,value].join(".");switch(value){case"men_only":field=fields.MEN_ONLY;break;case"women_only":field=fields.WOMEN_ONLY}query[field]=1,delete query[key]},state:fields.STATE,zip:function(query,value,key){query.distance||(query[fields.ZIP_CODE]=value,delete query[key])},control:function(query,value,key){value=mapControl(value),picc.data.rangify(query,fields.OWNERSHIP,value),delete query[key]},region:function(query,value,key){picc.data.rangify(query,fields.REGION_ID,value),delete query[key]},sort:function(query,value,key){var bits=String(value).split(":");value=bits[0],bits[0]=picc.form.mappings.sort[value],bits[0]||(console.warn("unmapped sort value:",value),bits[0]=value),query[key]=bits.join(":")},major:function(query,value,key){var subfield="degree";switch(query.degree){case"a":case"2":subfield="assoc";break;case"b":case"3":subfield="bachelors"}var k=[fields.PROGRAM_OFFERED,subfield,value].join(".");query[k+"__range"]="1..",delete query[key]},size:function(query,value,key){value=mapSize(value),query[picc.fields.SIZE+"__range"]=Array.isArray(value)?value.join(","):value,delete query[key]},degree:function(query,value,key){"a"===value?query[picc.fields.DEGREE_OFFERED+".assoc"]=!0:"b"===value&&(query[picc.fields.DEGREE_OFFERED+".bachelors"]=!0),delete query[key]},under_investigation:picc.fields.UNDER_INVESTIGATION};return function(params){var query=picc.data.extend({},params);query[fields.OPERATING]=1,query.distance&&!query.zip&&(console.warn("distance provided without zip; ignoring",query),delete query.distance),query.size||(query[fields.SIZE+"__range"]="0.."),query.degree||(query[fields.DEGREE_OFFERED+".assoc_or_bachelors"]=!0);for(var key in query){var v=query[key];if(empty(v))delete query[key];else{var k=alias[key];switch(typeof k){case"function":k(query,v,key);break;case"string":query[k]=v,delete query[key]}}}for(key in query)(null===query[key]||void 0===query[key])&&delete query[key];return query[picc.fields.PREDOMINANT_DEGREE+"__range"]="1..3",query[picc.fields.HIGHEST_DEGREE+"__range"]="2..4",query}}(),picc.ui={},picc.ui.expandAccordions=function(selector,expanded){return 1===arguments.length&&(expanded=selector,selector=null),selector||(selector="aria-accordion"),expanded=d3.functor(expanded),d3.selectAll(selector).filter(function(){return!!expanded.apply(this,arguments)}).property("expanded",!0)},picc.ready=function(callback){return"complete"===document.readyState?(callback(),!0):(window.addEventListener("load",callback),!1)},picc.debounce=function(fn,delay){var timeout;return function(){var context=this,args=arguments;return clearTimeout(timeout),timeout=setTimeout(function(){fn.apply(context,args)},delay)}},picc.delegate=function(root,qualify,event,listener){if(Array.isArray(event))return event.map(function(e){return picc.delegate(root,qualify,e,listener)});if("object"==typeof event){var listeners={};for(var e in event)listeners[e]=picc.delegate(root,qualify,e,event[e]);return listeners}var _listener=function(e){qualify.call(e.target,e)&&listener.call(e.target,e)};return root.addEventListener(event,_listener,!0),listener},picc.data={},picc.data.extend=function(obj,a,b){for(var i=1,len=arguments.length;len>i;i++){var arg=arguments[i];if("object"==typeof arg)for(var key in arg)obj[key]=arg[key]}return obj},picc.data.rangify=function(obj,key,values){if(Array.isArray(values))switch(values.length){case 0:values="";break;case 1:values=values[0]}if(!Array.isArray(values))return values=String(values),values.indexOf("..")>-1?obj[key+"__range"]=values:values&&(obj[key]=values),obj;values=values.map(Number).sort(d3.ascending);for(var range=[values.shift()],ranges=[range];values.length;){var value=values.shift(),previous=range[range.length-1];value===previous+1?range.push(value):ranges.push(range=[value])}return obj[key+"__range"]=ranges.map(function(range,i){var min=range.shift(),max=range.length?range.pop():min;if(min===max)switch(i){case 0:return".."+min;case ranges.length-1:return max+".."}return[min,max].join("..")}).join(","),obj},picc.data.selectKeys=function(obj,keys){var copy={};return keys.forEach(function(key){key in obj?copy[key]=obj[key]:console.warn("no such key in source object:",key,obj)}),copy},picc.tooltip={show:function(e){clearTimeout(this.__tooltipShowTimeout);var tooltip=this.tooltip;if(!tooltip){if(tooltip=document.getElementById(this.getAttribute("aria-describedby")),!tooltip)return console.warn("no tooltip found for:",this);this.tooltip=tooltip}var parent=this,ref=this.querySelector(".tooltip-target")||this,show=function(){tooltip.setAttribute("aria-hidden",!1);var click,win=d3.select(window).on("click.tooltip",click=function(e){win.on("click.tooltip",null),parent.contains(tooltip)?picc.tooltip.hide.call(parent,e):console.warn("ignoring click on unowned tooltip:",parent,tooltip)},!0);picc.tooltip.constrain(tooltip,ref)};"click"===e.type?show():this.__tooltipShowTimeout=setTimeout(show,200)},hide:function(){clearTimeout(this.__tooltipShowTimeout),this.tooltip&&(this.tooltip.setAttribute("aria-hidden",!0),this.tooltip.originalParent&&this.tooltip.originalParent.appendChild(this.tooltip),this.tooltip=null)},toggle:function(e){this.tooltip&&"false"!==this.tooltip.getAttribute("aria-hidden")?picc.tooltip.hide.call(this,e):picc.tooltip.show.call(this,e)},constrain:function(tooltip,parent){parent===tooltip.parentNode?parent.removeChild(tooltip):tooltip.originalParent=tooltip.parentNode;var content=tooltip.querySelector(".tooltip-content")||tooltip;content.style.removeProperty("left");var outer=parent.getBoundingClientRect();parent.appendChild(tooltip);var rect=content.getBoundingClientRect(),margin=10,offsetWidth=(rect.width-outer.width)/2,halfWidth=rect.width/2,bump=-halfWidth,left=outer.left-offsetWidth,leftEdge=margin/2,right=outer.right+offsetWidth,rightEdge=window.innerWidth-2*margin;right>rightEdge?bump-=right-rightEdge:leftEdge>left&&(bump+=leftEdge-left),bump?content.style.left=Math.round(bump)+"px":content.style.removeProperty("left");var bottom=outer.bottom+rect.height,above=bottom>window.innerHeight;tooltip.classList.toggle("tooltip_above",above),tooltip.classList.toggle("tooltip_below",!above)}},picc.pages={index:require("./index"),search:require("./search"),school:require("./school")},"undefined"!=typeof document&&(picc.ready(function(){var described="aria-describedby";picc.delegate(document.body,function(){return this.hasAttribute(described)&&this.getAttribute(described).match(/^tip-/)},document.body.ontouchstart?{focus:picc.tooltip.show,blur:picc.tooltip.hide,click:picc.tooltip.toggle}:{mouseenter:picc.tooltip.show,mouseleave:picc.tooltip.hide,focus:picc.tooltip.show,blur:picc.tooltip.hide})}),d3.select(document).on("mousedown",function(e){clearTimeout(this.__dragTimeout);var body=this.body;this.__dragTimeout=setTimeout(function(){body.classList.add("dragging")},100)}).on("mouseup",function(e){clearTimeout(this.__dragTimeout),this.body.classList.remove("dragging")}).on("click",function(e){clearTimeout(this.__dragTimeout),this.body.classList.remove("dragging")})),module.exports=picc;
},{"./components":3,"./d3":8,"./index":9,"./school":11,"./search":12,"aight":13,"async":14,"formdb":16,"querystring":20}],11:[function(require,module,exports){
var tagalong=require("tagalong"),d3=require("./d3");module.exports=function(){function hashChange(){var id=location.hash.substr(1),found=!1;return picc.ui.expandAccordions(function(){return this.id&&this.id===id}).each(function(){found=this}),found}function getSchoolId(){if(!location.search)return null;var match=location.search.match(/^\?(\d+)(\b|-)/);return match?match[1]:null}function showError(error){var container=document.querySelector("#error"),target=container.querySelector(".error-message")||container;return error=error.responseText||error,target.textContent=error,target}function createMap(school,container){if(!container)return console.error("got null container in createMap(); bailing"),!1;var location=picc.access.location(school);if(!location||!+location.lat||!+location.lon)return console.warn("missing or invalid location:",location,"; hiding the map"),container.classList.add("hidden"),!1;var center=L.latLng(location.lat,location.lon),map=L.map(container,{zoomControl:!1,panControl:!1,attributionControl:!1,dragging:!1,scrollWheelZoom:!1,touchZoom:!1,doubleClickZoom:!1,boxZoom:!1}).setView(center,10);L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png").addTo(map),L.control.attribution({position:"bottomleft",prefix:!1}).addAttribution(['Map tiles by <a href="http://stamen.com">Stamen Design</a>, under ','<a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>.','<br>Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, ','under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.'].join("")).addTo(map);var marker=L.circle(center,1200,{color:"black",opacity:1,strokeWidth:1,fillColor:"white",fillOpacity:1}).addTo(map);return marker.bindPopup(school.school.name),map}var loadable=d3.select(".loadable"),id=getSchoolId();if(!id)return loadable.classed("js-error",!0),showError(picc.errors.NO_SCHOOL_ID);d3.select("#referrer-link").attr("href",document.referrer||null),loadable.classed("js-loading",!0),picc.API.getAll({metadata:"data.json",school:[picc.API.getSchool,id]},function(error,data){if(loadable.classed("js-loading",!1),error)return loadable.classed("js-error",!0),showError(error);loadable.classed("js-loaded",!0);var root=document.querySelector("#school"),school=data.school,name=picc.access(picc.fields.NAME)(school);document.title=name,school.metadata=data.metadata,console.log("got school:",school),root.classList.remove("hidden");var averageLabels={above:"Above average",below:"Lower than average",about:"About average"};d3.selectAll("i.average-arrow[data-meter]").each(function(){var icon=d3.select(this),label=(d3.select("#"+this.getAttribute("data-meter")).on("update",function(){var match=this.className.match(/\b(\w+)_average\b/),state=match?match[1]:"na";icon.classed("above_average fa-arrow-up","above"===state).classed("below_average fa-arrow-down","below"===state).classed("about_average fa-check","about"===state);var text=averageLabels[state];icon.attr("title",text),label.classed("above_average","above"===state).classed("below_average","below"===state).classed("about_average","about"===state).text(text)}),d3.select(this.parentNode).select(".average-label"))});var sections=root.querySelectorAll(".section-card_container-school"),directives=picc.school.directives;[root].concat([].slice.call(sections)).forEach(function(node){tagalong(node,school,directives)});var bars=d3.selectAll("ol.bars").selectAll("li").datum(function(){return+this.querySelector(".value").textContent}).sort(d3.descending).each(function(){var label=this.querySelector(".label");if(label){var klass=label.textContent.toLowerCase().replace(/\W+/g,"-");this.classList.add("bar-"+klass)}});bars.select(".value").remove();var scale=d3.scale.linear().domain([0,1]).range(["1%","100%"]);bars.select(".bar").style("width",function(d){return d>.005?scale(d):d?"1px":0}),createMap(school,root.querySelector(".school-map"))}),window.addEventListener("hashchange",hashChange);var section=hashChange();section&&(location.hash="",location.hash="#"+section.id)};
},{"./d3":8,"tagalong":21}],12:[function(require,module,exports){
var tagalong=require("tagalong"),formdb=require("formdb"),querystring=require("querystring"),d3=require("./d3");module.exports=function(){function onChange(){if(!ready)return void console.warn("onChange() before ready!");if(!submit)return void(submit=!0);updateDistanceDisabled();var params=form.getData();for(var k in params)Array.isArray(params[k])&&!params[k][0]&&delete params[k];delete params._drawer,diffExcept(previousParams,params,["page"])&&delete params.page;var query=picc.form.prepareParams(params);query.fields=[picc.fields.ID,picc.fields.NAME,picc.fields.CITY,picc.fields.STATE,picc.fields.SIZE,picc.fields.OWNERSHIP,picc.fields.PREDOMINANT_DEGREE,picc.fields.NET_PRICE,picc.fields.COMPLETION_RATE,picc.fields.MEDIAN_EARNINGS,picc.fields.EARNINGS_GT_25K,picc.fields.UNDER_INVESTIGATION].join(",");var qs=querystring.stringify(params);qs="?"+qs.replace(/^&+/,"").replace(/&{2,}/g,"&").replace(/%3A/g,":"),poppingState||(alreadyLoaded&&diff(previousParams,params)?history.pushState(params,"search",qs):history.replaceState(params,"search",qs)),d3.select("a.results-share").attr("href",function(){return picc.template.resolve(this.getAttribute("data-href"),{url:encodeURIComponent(document.location.href)})}),req&&req.abort(),resultsRoot.classList.toggle("js-incremental",incremental),incremental||(resultsRoot.classList.add("js-loading"),resultsRoot.classList.remove("js-loaded"),resultsRoot.classList.remove("js-error")),paginator.classList.toggle("show-loading",incremental),console.time&&console.time("[load]"),req=picc.API.search(query,function(error,data){if(resultsRoot.classList.remove("js-loading"),resultsRoot.classList.remove("js-incremental"),paginator.classList.remove("show-loading"),bottomPaginator.classList.remove("show-loading"),previousParams=params,incremental=!1,console.timeEnd&&console.timeEnd("[load]"),error)return resultsRoot.classList.add("js-error"),showError(error);resultsRoot.classList.add("js-loaded");var format=picc.format;console.log("loaded schools:",data),console.time&&console.time("[render]");var meta=data.metadata||data,total=meta.total,heading=resultsRoot.querySelector(".results-main-alert");tagalong(heading,meta,{results_word:format.plural("total","Result"),results_total:format.number("total","0")});var page=+params.page||0,perPage=meta.per_page,pages=getPages(total,perPage,page);tagalong(paginator,{pages:pages},{pages:{"@data-index":function(d){return String(d.index)},"@class":function(d){return d.index===page?"pagination-page_selected":d.arrow?"pagination-arrow":null},link:{text:"page","@data-page":function(d){return String(d.index)},"@href":function(d){return d.index===page?null:d.index===!1?null:"?"+querystring.stringify(picc.data.extend({},params,{page:d.index}))}}}}),bottomPaginator.innerHTML=paginator.innerHTML;var pageLinks=d3.select(resultsRoot).selectAll("a.select-page").on("click",function(){d3.event.preventDefault();var _page=this.getAttribute("data-page");"false"!==_page&&(pageLinks.each(function(){var p=this.getAttribute("data-page"),selected=p==_page;this.parentNode.classList.toggle("pagination-page_selected",selected)}),form.set("page",_page),incremental=!0,change())}),resultsList=resultsRoot.querySelector(".schools-list");ie&&alreadyLoaded&&removeAllChildren(resultsList),tagalong(resultsList,data.results,directives),alreadyLoaded=!0,console.timeEnd&&console.timeEnd("[render]")})}function getPages(total,perPage,page){var numPages=Math.ceil(total/perPage),previous=!1,next=!1;if(numPages>MAX_PAGES){var end=Math.min(page+MAX_PAGES,numPages),start=end-MAX_PAGES;pages=d3.range(start,start+MAX_PAGES),previous=start>0,next=numPages>end}else pages=d3.range(0,numPages);if(pages=pages.map(function(page){return{page:page+1,index:page}}),previous){var first=pages[0];pages.unshift({index:first.index-1,page:"<",arrow:!0}),first.index>1&&pages.unshift({index:0,page:"<<",arrow:!0})}if(next){var last=pages[pages.length-1];pages.push({index:last.index+1,page:">",arrow:!0}),last.index<numPages-1&&pages.push({index:numPages-1,page:">>",arrow:!0})}return pages}function showError(error){console.error("error:",error);var message=resultsRoot.querySelector(".error-message");error=error.responseText||error,message.textContent=String(error)||"There was an unexpected API error."}function diffExcept(a,b,keys){return a=picc.data.extend({},a),b=picc.data.extend({},b),keys.forEach(function(key){delete a[key],delete b[key]}),diff(a,b)}function diff(a,b){if(typeof a!=typeof b)return!0;if("object"==typeof a){for(k in a)if(diff(a[k],b[k]))return!0;for(k in b)if(diff(a[k],b[k]))return!0;return!1}return a!=b}function copyUnsetKeys(from,into){var copy=picc.data.extend({},into);for(var key in from)copy.hasOwnProperty(key)||(copy[key]=null);return copy}function updateSlider(){var input=this.querySelector("input");if(input){var value=input.value.split("..").map(Number);2===value.length&&(this.lower=value[0]||this.min,this.upper=value[1]||this.max)}}function updateDistanceDisabled(){var zip=form.get("zip"),dist=form.getInputsByName("distance")[0];dist&&(dist.disabled=!zip)}function scrollIntoView(){try{form.element.scrollIntoView()}catch(error){console.warn("unable to scroll results into view:",error)}}function removeAllChildren(node){for(;node.lastChild;)node.removeChild(node.lastChild)}var req,resultsRoot=document.querySelector(".search-results"),paginator=resultsRoot.querySelector(".pagination"),bottomPaginator=resultsRoot.querySelector(".pagination_bottom"),form=new formdb.Form("#search-form"),query=querystring.parse(location.search.substr(1)),previousParams=query||{},poppingState=!1,ready=!1,alreadyLoaded=!1,ie="number"==typeof document.documentMode,incremental=!1,submit=!0,MAX_PAGES=6,change=picc.debounce(onChange,100),directives=picc.data.selectKeys(picc.school.directives,["title","school_link","name","city","state","under_investigation","size_number","average_cost","average_cost_meter","grad_rate","grad_rate_meter","average_salary","average_salary_meter","more_link"]),win=d3.select(window),sliders=d3.selectAll("picc-slider"),toggles=d3.selectAll(".toggle-accordion").on("open",function(){var opened=this;toggles.each(function(){this!==opened&&this.close()});var event="click.toggle";win.on(event,function(){opened.contains(d3.event.target)||(win.on(event,null),opened.close())})});win.on("keyup.toggle",function(){27===d3.event.keyCode&&toggles.property("expanded",!1)}),picc.ui.expandAccordions(".toggle-accordion aria-accordion",function(){var inputs=this.querySelectorAll("[name]");return[].some.call(inputs,function(input){return query[input.name]})}),picc.ready(function(){ready=!0,form.setData(query),sliders.each(updateSlider).on("change",picc.debounce(function(){var input=this.querySelector("input");if(input){if(this.lower>this.min||this.upper<this.max){var lower=this.lower>this.min?this.lower:"",upper=this.upper<this.max?this.upper:"";input.value=[lower,upper].join("..")}else input.value="";change()}},200)),change()}),form.on("change",change),form.on("change:sort",function(){incremental=!0}),form.on("change:zip",updateDistanceDisabled),form.on("change:_drawer",function(value,e){submit=!1}),form.on("submit",function(data,e){return toggles.property("expanded",!1),scrollIntoView(),change(),e.preventDefault(),!1}),window.addEventListener("popstate",function(e){if(e.state){var state=copyUnsetKeys(previousParams,e.state);form.setData(state),sliders.each(updateSlider),poppingState=!0,onChange(),poppingState=!1}})};
},{"./d3":8,"formdb":16,"querystring":20,"tagalong":21}],13:[function(require,module,exports){
(function(aight){function aliasInterface(ns,expectedName,nonStandardName){return ns[nonStandardName]&&!ns[expectedName]?(ns[expectedName]=ns[nonStandardName],!0):!1}function commonEventLoop(currentTarget,e,$handlers,synthetic){for(var continuePropagation,handlers=$handlers.slice(),evt=enrich(e,currentTarget),i=0,length=handlers.length;length>i&&(handler=handlers[i],"object"==typeof handler&&"function"==typeof handler.handleEvent?handler.handleEvent(evt):handler.call(currentTarget,evt),!evt.stoppedImmediatePropagation);i++);return continuePropagation=!evt.stoppedPropagation,synthetic&&continuePropagation&&currentTarget.parentNode?currentTarget.parentNode.dispatchEvent(evt):!evt.defaultPrevented}function commonDescriptor(get,set){return{configurable:!0,get:get,set:set}}function commonTextContent(protoDest,protoSource,property){var descriptor=getOwnPropertyDescriptor(protoSource||protoDest,property);defineProperty(protoDest,"textContent",commonDescriptor(function(){return descriptor.get.call(this)},function(textContent){descriptor.set.call(this,textContent)}))}function enrich(e,currentTarget){return e.currentTarget=currentTarget,e.eventPhase=e.target===e.currentTarget?2:3,e}function find(array,value){for(var i=array.length;i--&&array[i]!==value;);return i}function getTextContent(){if("BR"===this.tagName)return"\n";for(var textNode=this.firstChild,arrayContent=[];textNode;)8!==textNode.nodeType&&7!==textNode.nodeType&&arrayContent.push(textNode.textContent),textNode=textNode.nextSibling;return arrayContent.join("")}function onReadyState(e){!READYEVENTDISPATCHED&&readyStateOK.test(document.readyState)&&(READYEVENTDISPATCHED=!READYEVENTDISPATCHED,document.detachEvent(ONREADYSTATECHANGE,onReadyState),e=document.createEvent("Event"),e.initEvent(DOMCONTENTLOADED,!0,!0),document.dispatchEvent(e))}function setTextContent(textContent){for(var node;node=this.lastChild;)this.removeChild(node);null!=textContent&&this.appendChild(document.createTextNode(textContent))}function verify(self,e){return e||(e=window.event),e.target||(e.target=e.srcElement||e.fromElement||document),e.timeStamp||(e.timeStamp=(new Date).getTime()),e}aight.version="2.1.1";var nav=null,version=0,ie=!1;if("object"==typeof navigator&&(nav=navigator.appName,version=navigator.appVersion,ie="Microsoft Internet Explorer"===nav)){var match=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/);version=match?parseFloat(match[1]):0}if(aight.browser={name:nav,ie:ie?version:!1,ie9:ie&&version>=9&&10>version,ie8:ie&&version>=8&&9>version,ie7:ie&&version>=7&&8>version,ie6:ie&&version>=6&&7>version},"object"==typeof window){if(window.aight=aight,aliasInterface(window,"HTMLCommentElement","Comment"),aliasInterface(window,"HTMLDocument","Document"),aight.browser.ie<9){if(document.createEvent)return;var DUNNOABOUTDOMLOADED=!0,READYEVENTDISPATCHED=!1,ONREADYSTATECHANGE="onreadystatechange",DOMCONTENTLOADED="DOMContentLoaded",SECRET="__IE8__"+Math.random(),defineProperty=Object.defineProperty||function(object,property,descriptor){object[property]=descriptor.value},defineProperties=Object.defineProperties||function(object,descriptors){for(var key in descriptors)if(hasOwnProperty.call(descriptors,key))try{defineProperty(object,key,descriptors[key])}catch(o_O){window.console&&console.log(key+" failed on object:",object,o_O.message)}},getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,hasOwnProperty=Object.prototype.hasOwnProperty,ElementPrototype=window.Element.prototype,TextPrototype=window.Text.prototype,possiblyNativeEvent=/^[a-z]+$/,readyStateOK=/loaded|complete/,types={},div=document.createElement("div");commonTextContent(window.HTMLCommentElement.prototype,ElementPrototype,"nodeValue"),commonTextContent(window.HTMLScriptElement.prototype,null,"text"),commonTextContent(TextPrototype,null,"nodeValue"),commonTextContent(window.HTMLTitleElement.prototype,null,"text"),defineProperty(window.HTMLStyleElement.prototype,"textContent",function(descriptor){return commonDescriptor(function(){return descriptor.get.call(this.styleSheet)},function(textContent){descriptor.set.call(this.styleSheet,textContent)})}(getOwnPropertyDescriptor(window.CSSStyleSheet.prototype,"cssText"))),defineProperties(ElementPrototype,{textContent:{get:getTextContent,set:setTextContent},firstElementChild:{get:function(){for(var childNodes=this.childNodes||[],i=0,length=childNodes.length;length>i;i++)if(1==childNodes[i].nodeType)return childNodes[i]}},lastElementChild:{get:function(){for(var childNodes=this.childNodes||[],i=childNodes.length;i--;)if(1==childNodes[i].nodeType)return childNodes[i]}},previousElementSibling:{get:function(){for(var previousElementSibling=this.previousSibling;previousElementSibling&&1!=previousElementSibling.nodeType;)previousElementSibling=previousElementSibling.previousSibling;return previousElementSibling}},nextElementSibling:{get:function(){for(var nextElementSibling=this.nextSibling;nextElementSibling&&1!=nextElementSibling.nodeType;)nextElementSibling=nextElementSibling.nextSibling;return nextElementSibling}},childElementCount:{get:function(){for(var count=0,childNodes=this.childNodes||[],i=childNodes.length;i--;count+=1==childNodes[i].nodeType);return count}},addEventListener:{value:function(type,handler,capture){var e,self=this,ontype="on"+type,temple=self[SECRET]||defineProperty(self,SECRET,{value:{}})[SECRET],currentType=temple[ontype]||(temple[ontype]={}),handlers=currentType.h||(currentType.h=[]);if(!hasOwnProperty.call(currentType,"w")){if(currentType.w=function(e){return e[SECRET]||commonEventLoop(self,verify(self,e),handlers,!1)},!hasOwnProperty.call(types,ontype))if(possiblyNativeEvent.test(type))try{e=document.createEventObject(),e[SECRET]=!0,9!=self.nodeType&&null==self.parentNode&&div.appendChild(self),self.fireEvent(ontype,e),types[ontype]=!0}catch(e){for(types[ontype]=!1;div.hasChildNodes();)div.removeChild(div.firstChild)}else types[ontype]=!1;(currentType.n=types[ontype])&&self.attachEvent(ontype,currentType.w)}find(handlers,handler)<0&&handlers[capture?"unshift":"push"](handler)}},dispatchEvent:{value:function(e){var parentNode,self=this,ontype="on"+e.type,temple=self[SECRET],currentType=temple&&temple[ontype],valid=!!currentType;return e.target||(e.target=self),valid?currentType.n?self.fireEvent(ontype,e):commonEventLoop(self,e,currentType.h,!0):(parentNode=self.parentNode)?parentNode.dispatchEvent(e):!0,!e.defaultPrevented}},removeEventListener:{value:function(type,handler,capture){var self=this,ontype="on"+type,temple=self[SECRET],currentType=temple&&temple[ontype],handlers=currentType&&currentType.h,i=handlers?find(handlers,handler):-1;i>-1&&handlers.splice(i,1)}}}),defineProperties(TextPrototype,{addEventListener:{value:ElementPrototype.addEventListener},dispatchEvent:{value:ElementPrototype.dispatchEvent},removeEventListener:{value:ElementPrototype.removeEventListener}}),defineProperties(window.XMLHttpRequest.prototype,{addEventListener:{value:function(type,handler,capture){var self=this,ontype="on"+type,temple=self[SECRET]||defineProperty(self,SECRET,{value:{}})[SECRET],currentType=temple[ontype]||(temple[ontype]={}),handlers=currentType.h||(currentType.h=[]);find(handlers,handler)<0&&(self[ontype]||(self[ontype]=function(){var e=document.createEvent("Event");e.initEvent(type,!0,!0),self.dispatchEvent(e)}),handlers[capture?"unshift":"push"](handler))}},dispatchEvent:{value:function(e){var self=this,ontype="on"+e.type,temple=self[SECRET],currentType=temple&&temple[ontype],valid=!!currentType;return valid&&(currentType.n?self.fireEvent(ontype,e):commonEventLoop(self,e,currentType.h,!0))}},removeEventListener:{value:ElementPrototype.removeEventListener}}),defineProperties(window.Event.prototype,{bubbles:{value:!0,writable:!0},cancelable:{value:!0,writable:!0},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0,this.returnValue=!1)}},stopPropagation:{value:function(){this.stoppedPropagation=!0,this.cancelBubble=!0}},stopImmediatePropagation:{value:function(){this.stoppedImmediatePropagation=!0,this.stopPropagation()}},initEvent:{value:function(type,bubbles,cancelable){this.type=type,this.bubbles=!!bubbles,this.cancelable=!!cancelable,this.bubbles||this.stopPropagation()}}}),defineProperties(window.HTMLDocument.prototype,{textContent:{get:function(){return 11===this.nodeType?getTextContent.call(this):null},set:function(textContent){11===this.nodeType&&setTextContent.call(this,textContent)}},addEventListener:{value:function(type,handler,capture){var self=this;ElementPrototype.addEventListener.call(self,type,handler,capture),DUNNOABOUTDOMLOADED&&type===DOMCONTENTLOADED&&!readyStateOK.test(self.readyState)&&(DUNNOABOUTDOMLOADED=!1,self.attachEvent(ONREADYSTATECHANGE,onReadyState),window==top&&!function gonna(e){try{self.documentElement.doScroll("left"),onReadyState()}catch(o_O){setTimeout(gonna,50)}}())}},dispatchEvent:{value:ElementPrototype.dispatchEvent},removeEventListener:{value:ElementPrototype.removeEventListener},createEvent:{value:function(Class){var e;if("Event"!==Class)throw new Error("unsupported "+Class);return e=document.createEventObject(),e.timeStamp=(new Date).getTime(),e}}}),defineProperties(window.Window.prototype,{getComputedStyle:{value:function(){function ComputedStyle(_){this._=_}function PseudoComputedStyle(){}var notpixel=/^(?:[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/,position=/^(top|right|bottom|left)$/,re=/\-([a-z])/g,place=function(match,$1){return $1.toUpperCase()};return ComputedStyle.prototype.getPropertyValue=function(name){var result,left,rtLeft,el=this._,style=el.style,currentStyle=el.currentStyle,runtimeStyle=el.runtimeStyle;return name=("float"===name?"style-float":name).replace(re,place),result=currentStyle?currentStyle[name]:style[name],notpixel.test(result)&&!position.test(name)&&(left=style.left,rtLeft=runtimeStyle&&runtimeStyle.left,rtLeft&&(runtimeStyle.left=currentStyle.left),style.left="fontSize"===name?"1em":result,result=style.pixelLeft+"px",style.left=left,rtLeft&&(runtimeStyle.left=rtLeft)),null==result?result:result+""||"auto"},PseudoComputedStyle.prototype.getPropertyValue=function(){return null},function(el,pseudo){return pseudo?new PseudoComputedStyle(el):new ComputedStyle(el)}}()},addEventListener:{value:function(type,handler,capture){var handlers,self=window,ontype="on"+type;self[ontype]||(self[ontype]=function(e){return commonEventLoop(self,verify(self,e),handlers,!1)}),handlers=self[ontype][SECRET]||(self[ontype][SECRET]=[]),find(handlers,handler)<0&&handlers[capture?"unshift":"push"](handler)}},dispatchEvent:{value:function(e){var method=window["on"+e.type];return method?method.call(window,e)!==!1&&!e.defaultPrevented:!0}},removeEventListener:{value:function(type,handler,capture){var ontype="on"+type,handlers=(window[ontype]||Object)[SECRET],i=handlers?find(handlers,handler):-1;i>-1&&handlers.splice(i,1)}}})}if(function(window){"use strict";function textNodeIfString(node){return"string"==typeof node?window.document.createTextNode(node):node}function mutationMacro(nodes){if(1===nodes.length)return textNodeIfString(nodes[0]);for(var fragment=window.document.createDocumentFragment(),list=slice.call(nodes),i=0;i<nodes.length;i++)fragment.appendChild(textNodeIfString(list[i]));return fragment}for(var head,property,verifyToken,DOMTokenList,defineProperty=Object.defineProperty||function(object,property,descriptor){object.__defineGetter__(property,descriptor.get)},indexOf=[].indexOf||function(value){for(var length=this.length;length--&&this[length]!==value;);return length},trim=/^\s+|\s+$/g,spaces=/\s+/,SPACE=" ",toggle=function(token,force){return this.contains(token)?force||this.remove(token):(void 0===force||force)&&(force=!0,this.add(token)),!!force},ElementPrototype=(window.Element||window.Node||window.HTMLElement).prototype,properties=["matches",ElementPrototype.matchesSelector||ElementPrototype.webkitMatchesSelector||ElementPrototype.khtmlMatchesSelector||ElementPrototype.mozMatchesSelector||ElementPrototype.msMatchesSelector||ElementPrototype.oMatchesSelector||function(selector){var parentNode=this.parentNode;return!!parentNode&&-1<indexOf.call(parentNode.querySelectorAll(selector),this)},"closest",function(selector){for(var matches,parentNode=this;(matches=parentNode&&parentNode.matches)&&!parentNode.matches(selector);)parentNode=parentNode.parentNode;return matches?parentNode:null},"prepend",function(){var firstChild=this.firstChild,node=mutationMacro(arguments);firstChild?this.insertBefore(node,firstChild):this.appendChild(node)},"append",function(){this.appendChild(mutationMacro(arguments))},"before",function(){var parentNode=this.parentNode;parentNode&&parentNode.insertBefore(mutationMacro(arguments),this)},"after",function(){var parentNode=this.parentNode,nextSibling=this.nextSibling,node=mutationMacro(arguments);parentNode&&(nextSibling?parentNode.insertBefore(node,nextSibling):parentNode.appendChild(node))},"replace",function(){this.replaceWith.apply(this,arguments)},"replaceWith",function(){var parentNode=this.parentNode;parentNode&&parentNode.replaceChild(mutationMacro(arguments),this)},"remove",function(){var parentNode=this.parentNode;parentNode&&parentNode.removeChild(this)}],slice=properties.slice,i=properties.length;i;i-=2)property=properties[i-2],property in ElementPrototype||(ElementPrototype[property]=properties[i-1]);document.createElement("a").matches("a")||(ElementPrototype[property]=function(matches){return function(selector){return matches.call(this.parentNode?this:document.createDocumentFragment().appendChild(this),selector)}}(ElementPrototype[property])),"classList"in document.documentElement?(DOMTokenList=document.createElement("div").classList,DOMTokenList.add("a","b","a"),"a b"!=DOMTokenList&&(ElementPrototype=DOMTokenList.constructor.prototype,"add"in ElementPrototype||(ElementPrototype=window.DOMTokenList.prototype),verifyToken=function(original){return function(){for(var i=0;i<arguments.length;)original.call(this,arguments[i++])}},ElementPrototype.add=verifyToken(ElementPrototype.add),ElementPrototype.remove=verifyToken(ElementPrototype.remove),ElementPrototype.toggle=toggle)):(verifyToken=function(token){if(!token)throw"SyntaxError";if(spaces.test(token))throw"InvalidCharacterError";return token},DOMTokenList=function(node){this._svg="object"==typeof node.className;var className=(this._svg?node.className.baseVal:node.className).replace(trim,"");className&&properties.push.apply(this,className.split(spaces)),this._=node},DOMTokenList.prototype={length:0,add:function(){for(var token,j=0;j<arguments.length;j++)token=arguments[j],this.contains(token)||properties.push.call(this,property);this._svg?this._.className.baseVal=""+this:this._.className=""+this},contains:function(indexOf){return function(token){return i=indexOf.call(this,property=verifyToken(token)),i>-1}}([].indexOf||function(token){for(i=this.length;i--&&this[i]!==token;);return i}),item:function(i){return this[i]||null},remove:function(){for(var token,j=0;j<arguments.length;j++)token=arguments[j],this.contains(token)&&properties.splice.call(this,i,1);this._svg?this._.className.baseVal=""+this:this._.className=""+this},toggle:toggle,toString:function(){return properties.join.call(this,SPACE)}},defineProperty(ElementPrototype,"classList",{get:function(){return new DOMTokenList(this)},set:function(){}})),"head"in document||defineProperty(document,"head",{get:function(){return head||(head=document.getElementsByTagName("head")[0])}});try{new window.CustomEvent("?")}catch(o_O){window.CustomEvent=function(eventName,defaultInitDict){function CustomEvent(type,eventInitDict){var event=document.createEvent(eventName);if("string"!=typeof type)throw new Error("An event name must be provided");return"Event"==eventName&&(event.initCustomEvent=initCustomEvent),null==eventInitDict&&(eventInitDict=defaultInitDict),event.initCustomEvent(type,eventInitDict.bubbles,eventInitDict.cancelable,eventInitDict.detail),event}function initCustomEvent(type,bubbles,cancelable,detail){this.initEvent(type,bubbles,cancelable),this.detail=detail}return CustomEvent}(window.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}}(window),function(CSSSDProto){function getAttribute(property){return property.replace(/-[a-z]/g,function(bit){return bit[1].toUpperCase()})}"undefined"!=typeof CSSSDProto.setAttribute&&(CSSSDProto.setProperty=function(property,value){return this.setAttribute(getAttribute(property),String(value))},CSSSDProto.getPropertyValue=function(property){return this.getAttribute(getAttribute(property))||null},CSSSDProto.removeProperty=function(property){var value=this.getPropertyValue(property);return this.removeAttribute(getAttribute(property)),value})}(CSSStyleDeclaration.prototype),!("createElementNS"in document)){var DocumentPrototype=window.HTMLDocument.prototype;DocumentPrototype.createElementNS=function(ns,name){if(ns)throw new Error("sorry, this browser does not support namespaces");return DocumentPrototype.createElement.call(this,name)}}!function(window,document){function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;return p.innerHTML="x<style>"+cssText+"</style>",parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return"string"==typeof elements?elements.split(" "):elements}function addElements(newElements,ownerDocument){var elements=html5.elements;"string"!=typeof elements&&(elements=elements.join(" ")),"string"!=typeof newElements&&(newElements=newElements.join(" ")),html5.elements=elements+" "+newElements,shivDocument(ownerDocument)}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];return data||(data={},expanID++,ownerDocument[expando]=expanID,expandoData[expanID]=data),data}function createElement(nodeName,ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createElement(nodeName);data||(data=getExpandoData(ownerDocument));var node;return node=data.cache[nodeName]?data.cache[nodeName].cloneNode():saveClones.test(nodeName)?(data.cache[nodeName]=data.createElem(nodeName)).cloneNode():data.createElem(nodeName),!node.canHaveChildren||reSkip.test(nodeName)||node.tagUrn?node:data.frag.appendChild(node)}function createDocumentFragment(ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createDocumentFragment();data=data||getExpandoData(ownerDocument);for(var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;l>i;i++)clone.createElement(elems[i]);return clone}function shivMethods(ownerDocument,data){data.cache||(data.cache={},data.createElem=ownerDocument.createElement,data.createFrag=ownerDocument.createDocumentFragment,data.frag=data.createFrag()),ownerDocument.createElement=function(nodeName){return html5.shivMethods?createElement(nodeName,ownerDocument,data):data.createElem(nodeName)},ownerDocument.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+getElements().join().replace(/[\w\-:]+/g,function(nodeName){return data.createElem(nodeName),data.frag.createElement(nodeName),'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){ownerDocument||(ownerDocument=document);var data=getExpandoData(ownerDocument);return!html5.shivCSS||supportsHtml5Styles||data.hasCSS||(data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),supportsUnknownElements||shivMethods(ownerDocument,data),ownerDocument}var supportsHtml5Styles,supportsUnknownElements,version="3.7.2",options=window.html5||{},reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,expando="_html5shiv",expanID=0,expandoData={};!function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>",supportsHtml5Styles="hidden"in a,supportsUnknownElements=1==a.childNodes.length||function(){document.createElement("a");var frag=document.createDocumentFragment();return"undefined"==typeof frag.cloneNode||"undefined"==typeof frag.createDocumentFragment||"undefined"==typeof frag.createElement}()}catch(e){supportsHtml5Styles=!0,supportsUnknownElements=!0}}();var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:version,shivCSS:options.shivCSS!==!1,supportsUnknownElements:supportsUnknownElements,shivMethods:options.shivMethods!==!1,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment,addElements:addElements};window.html5=html5,shivDocument(document)}(this,document)}}).call(this,"object"==typeof module?module.exports:this.aight={}),function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory():root.returnExports=factory()}(this,function(){function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}function isPrimitive(input){var type=typeof input;return null===input||"undefined"===type||"boolean"===type||"number"===type||"string"===type}function toPrimitive(input){var val,valueOf,toStr;if(isPrimitive(input))return input;if(valueOf=input.valueOf,isFunction(valueOf)&&(val=valueOf.call(input),isPrimitive(val)))return val;if(toStr=input.toString,isFunction(toStr)&&(val=toStr.call(input),isPrimitive(val)))return val;throw new TypeError}function Empty(){}var defineProperty,ArrayPrototype=Array.prototype,ObjectPrototype=Object.prototype,FunctionPrototype=Function.prototype,StringPrototype=String.prototype,NumberPrototype=Number.prototype,array_slice=ArrayPrototype.slice,array_splice=ArrayPrototype.splice,array_unshift=(ArrayPrototype.push,ArrayPrototype.unshift),call=FunctionPrototype.call,_toString=ObjectPrototype.toString,isFunction=function(val){return"[object Function]"===ObjectPrototype.toString.call(val)},isRegex=function(val){return"[object RegExp]"===ObjectPrototype.toString.call(val)},isArray=function(obj){return"[object Array]"===_toString.call(obj)},isString=function(obj){return"[object String]"===_toString.call(obj)},isArguments=function(value){var str=_toString.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs=!isArray(value)&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&isFunction(value.callee)),isArgs},supportsDescriptors=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();defineProperty=supportsDescriptors?function(object,name,method,forceAssign){!forceAssign&&name in object||Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:method})}:function(object,name,method,forceAssign){!forceAssign&&name in object||(object[name]=method)};var defineProperties=function(object,map,forceAssign){for(var name in map)ObjectPrototype.hasOwnProperty.call(map,name)&&defineProperty(object,name,map[name],forceAssign)},toObject=function(o){if(null==o)throw new TypeError("can't convert "+o+" to object");return Object(o)},ToUint32=function(x){return x>>>0};defineProperties(FunctionPrototype,{bind:function(that){var target=this;if(!isFunction(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var args=array_slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(array_slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(array_slice.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;boundLength>i;i++)boundArgs.push("$"+i);var bound=Function("binder","return function ("+boundArgs.join(",")+"){return binder.apply(this,arguments)}")(binder);return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound}});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,owns=call.bind(ObjectPrototype.hasOwnProperty);(supportsAccessors=owns(ObjectPrototype,"__defineGetter__"))&&(defineGetter=call.bind(ObjectPrototype.__defineGetter__),defineSetter=call.bind(ObjectPrototype.__defineSetter__),lookupGetter=call.bind(ObjectPrototype.__lookupGetter__),lookupSetter=call.bind(ObjectPrototype.__lookupSetter__));var spliceNoopReturnsEmptyArray=function(){var a=[1,2],result=a.splice();return 2===a.length&&isArray(result)&&0===result.length}();defineProperties(ArrayPrototype,{splice:function(start,deleteCount){return 0===arguments.length?[]:array_splice.apply(this,arguments)}},spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=function(){var obj={};return ArrayPrototype.splice.call(obj,0,0,1),1===obj.length}();defineProperties(ArrayPrototype,{splice:function(start,deleteCount){if(0===arguments.length)return[];var args=arguments;return this.length=Math.max(toInteger(this.length),0),arguments.length>0&&"number"!=typeof deleteCount&&(args=array_slice.call(arguments),args.length<2?args.push(this.length-start):args[1]=toInteger(deleteCount)),array_splice.apply(this,args)}},!spliceWorksWithEmptyObject);var hasUnshiftReturnValueBug=1!==[].unshift(0);defineProperties(ArrayPrototype,{unshift:function(){return array_unshift.apply(this,arguments),this.length}},hasUnshiftReturnValueBug),defineProperties(Array,{isArray:isArray});var boxedString=Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0;return method&&(method.call("foo",function(_,__,context){"object"!=typeof context&&(properlyBoxesNonStrict=!1)}),method.call([1],function(){"use strict";properlyBoxesStrict="string"==typeof this},"x")),!!method&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function(fun){var object=toObject(this),self=splitString&&isString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(!isFunction(fun))throw new TypeError;for(;++i<length;)i in self&&fun.call(thisp,self[i],i,object)}},!properlyBoxesContext(ArrayPrototype.forEach)),defineProperties(ArrayPrototype,{map:function(fun){var object=toObject(this),self=splitString&&isString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(!isFunction(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}},!properlyBoxesContext(ArrayPrototype.map)),defineProperties(ArrayPrototype,{filter:function(fun){var value,object=toObject(this),self=splitString&&isString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if(!isFunction(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}},!properlyBoxesContext(ArrayPrototype.filter)),defineProperties(ArrayPrototype,{every:function(fun){var object=toObject(this),self=splitString&&isString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if(!isFunction(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}},!properlyBoxesContext(ArrayPrototype.every)),defineProperties(ArrayPrototype,{some:function(fun){var object=toObject(this),self=splitString&&isString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if(!isFunction(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=!1;ArrayPrototype.reduce&&(reduceCoercesToObject="object"==typeof ArrayPrototype.reduce.call("es5",function(_,__,___,list){return list})),defineProperties(ArrayPrototype,{reduce:function(fun){var object=toObject(this),self=splitString&&isString(this)?this.split(""):object,length=self.length>>>0;if(!isFunction(fun))throw new TypeError(fun+" is not a function");if(!length&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=!1;ArrayPrototype.reduceRight&&(reduceRightCoercesToObject="object"==typeof ArrayPrototype.reduceRight.call("es5",function(_,__,___,list){return list})),defineProperties(ArrayPrototype,{reduceRight:function(fun){var object=toObject(this),self=splitString&&isString(this)?this.split(""):object,length=self.length>>>0;if(!isFunction(fun))throw new TypeError(fun+" is not a function");if(!length&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>i)return result;do i in self&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function(sought){var self=splitString&&isString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=Array.prototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);defineProperties(ArrayPrototype,{lastIndexOf:function(sought){var self=splitString&&isString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}},hasFirefox2LastIndexOfBug);var hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),hasProtoEnumBug=function(){}.propertyIsEnumerable("prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;defineProperties(Object,{keys:function(object){var isFn=isFunction(object),isArgs=isArguments(object),isObject=null!==object&&"object"==typeof object,isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs)throw new TypeError("Object.keys called on a non-object");var theKeys=[],skipProto=hasProtoEnumBug&&isFn;if(isStr||isArgs)for(var i=0;i<object.length;++i)theKeys.push(String(i));else for(var name in object)skipProto&&"prototype"===name||!owns(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var ctor=object.constructor,skipConstructor=ctor&&ctor.prototype===object,j=0;dontEnumsLength>j;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!owns(object,dontEnum)||theKeys.push(dontEnum)}return theKeys}});var keysWorksWithArguments=Object.keys&&function(){return 2===Object.keys(arguments).length}(1,2),originalKeys=Object.keys;defineProperties(Object,{keys:function(object){return originalKeys(isArguments(object)?ArrayPrototype.slice.call(object):object)}},!keysWorksWithArguments);var negativeDate=-621987552e5,negativeYearString="-000001",hasNegativeDateBug=Date.prototype.toISOString&&-1===new Date(negativeDate).toISOString().indexOf(negativeYearString);
defineProperties(Date.prototype,{toISOString:function(){var result,length,value,year,month;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(year=this.getUTCFullYear(),month=this.getUTCMonth(),year+=Math.floor(month/12),month=(month%12+12)%12,result=[month+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],year=(0>year?"-":year>9999?"+":"")+("00000"+Math.abs(year)).slice(year>=0&&9999>=year?-4:-6),length=result.length;length--;)value=result[length],10>value&&(result[length]="0"+value);return year+"-"+result.slice(0,2).join("-")+"T"+result.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}},hasNegativeDateBug);var dateToJSONIsSupported=!1;try{dateToJSONIsSupported=Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(negativeDate).toJSON().indexOf(negativeYearString)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){}dateToJSONIsSupported||(Date.prototype.toJSON=function(key){var toISO,o=Object(this),tv=toPrimitive(o);if("number"==typeof tv&&!isFinite(tv))return null;if(toISO=o.toISOString,"function"!=typeof toISO)throw new TypeError("toISOString property is not callable");return toISO.call(o)});var supportsExtendedYears=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),doesNotParseY2KNewYear=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));(!Date.parse||doesNotParseY2KNewYear||acceptsInvalidDates||!supportsExtendedYears)&&(Date=function(NativeDate){function Date(Y,M,D,h,m,s,ms){var length=arguments.length;if(this instanceof NativeDate){var date=1===length&&String(Y)===Y?new NativeDate(Date.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,s,ms):length>=6?new NativeDate(Y,M,D,h,m,s):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y):new NativeDate;return date.constructor=Date,date}return NativeDate.apply(this,arguments)}function dayFromMonth(year,month){var t=month>1?1:0;return months[month]+Math.floor((year-1969+t)/4)-Math.floor((year-1901+t)/100)+Math.floor((year-1601+t)/400)+365*(year-1970)}function toUTC(t){return Number(new NativeDate(1970,0,1,0,0,0,t))}var isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),months=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var key in NativeDate)Date[key]=NativeDate[key];return Date.now=NativeDate.now,Date.UTC=NativeDate.UTC,Date.prototype=NativeDate.prototype,Date.prototype.constructor=Date,Date.parse=function(string){var match=isoDateExpression.exec(string);if(match){var result,year=Number(match[1]),month=Number(match[2]||1)-1,day=Number(match[3]||1)-1,hour=Number(match[4]||0),minute=Number(match[5]||0),second=Number(match[6]||0),millisecond=Math.floor(1e3*Number(match[7]||0)),isLocalTime=Boolean(match[4]&&!match[8]),signOffset="-"===match[9]?1:-1,hourOffset=Number(match[10]||0),minuteOffset=Number(match[11]||0);return(minute>0||second>0||millisecond>0?24:25)>hour&&60>minute&&60>second&&1e3>millisecond&&month>-1&&12>month&&24>hourOffset&&60>minuteOffset&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)&&(result=60*(24*(dayFromMonth(year,month)+day)+hour+hourOffset*signOffset),result=1e3*(60*(result+minute+minuteOffset*signOffset)+second)+millisecond,isLocalTime&&(result=toUTC(result)),result>=-864e13&&864e13>=result)?result:NaN}return NativeDate.parse.apply(this,arguments)},Date}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()});var hasToFixedBugs=NumberPrototype.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(n,c){for(var i=-1;++i<toFixedHelpers.size;)c+=n*toFixedHelpers.data[i],toFixedHelpers.data[i]=c%toFixedHelpers.base,c=Math.floor(c/toFixedHelpers.base)},divide:function(n){for(var i=toFixedHelpers.size,c=0;--i>=0;)c+=toFixedHelpers.data[i],toFixedHelpers.data[i]=Math.floor(c/n),c=c%n*toFixedHelpers.base},numToString:function(){for(var i=toFixedHelpers.size,s="";--i>=0;)if(""!==s||0===i||0!==toFixedHelpers.data[i]){var t=String(toFixedHelpers.data[i]);""===s?s=t:s+="0000000".slice(0,7-t.length)+t}return s},pow:function pow(x,n,acc){return 0===n?acc:n%2===1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function(x){for(var n=0;x>=4096;)n+=12,x/=4096;for(;x>=2;)n+=1,x/=2;return n}};defineProperties(NumberPrototype,{toFixed:function(fractionDigits){var f,x,s,m,e,z,j,k;if(f=Number(fractionDigits),f=f!==f?0:Math.floor(f),0>f||f>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(x=Number(this),x!==x)return"NaN";if(-1e21>=x||x>=1e21)return String(x);if(s="",0>x&&(s="-",x=-x),m="0",x>1e-21)if(e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69,z=0>e?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1),z*=4503599627370496,e=52-e,e>0){for(toFixedHelpers.multiply(0,z),j=f;j>=7;)toFixedHelpers.multiply(1e7,0),j-=7;for(toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0),j=e-1;j>=23;)toFixedHelpers.divide(1<<23),j-=23;toFixedHelpers.divide(1<<j),toFixedHelpers.multiply(1,1),toFixedHelpers.divide(2),m=toFixedHelpers.numToString()}else toFixedHelpers.multiply(0,z),toFixedHelpers.multiply(1<<-e,0),m=toFixedHelpers.numToString()+"0.00000000000000000000".slice(2,2+f);return f>0?(k=m.length,m=f>=k?s+"0.0000000000000000000".slice(0,f-k+2)+m:s+m.slice(0,k-f)+"."+m.slice(k-f)):m=s+m,m}},hasToFixedBugs);var string_split=StringPrototype.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var compliantExecNpcg=void 0===/()??/.exec("")[1];StringPrototype.split=function(separator,limit){var string=this;if(void 0===separator&&0===limit)return[];if("[object RegExp]"!==_toString.call(separator))return string_split.call(this,separator,limit);var separator2,match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.extended?"x":"")+(separator.sticky?"y":""),lastLastIndex=0;for(separator=new RegExp(separator.source,flags+"g"),string+="",compliantExecNpcg||(separator2=new RegExp("^"+separator.source+"$(?!\\s)",flags)),limit=void 0===limit?-1>>>0:ToUint32(limit);(match=separator.exec(string))&&(lastIndex=match.index+match[0].length,!(lastIndex>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),!compliantExecNpcg&&match.length>1&&match[0].replace(separator2,function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)}),match.length>1&&match.index<string.length&&ArrayPrototype.push.apply(output,match.slice(1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=limit)));)separator.lastIndex===match.index&&separator.lastIndex++;return lastLastIndex===string.length?(lastLength||!separator.test(""))&&output.push(""):output.push(string.slice(lastLastIndex)),output.length>limit?output.slice(0,limit):output}}():"0".split(void 0,0).length&&(StringPrototype.split=function(separator,limit){return void 0===separator&&0===limit?[]:string_split.call(this,separator,limit)});var str_replace=StringPrototype.replace,replaceReportsGroupsCorrectly=function(){var groups=[];return"x".replace(/x(.)?/g,function(match,group){groups.push(group)}),1===groups.length&&"undefined"==typeof groups[0]}();replaceReportsGroupsCorrectly||(StringPrototype.replace=function(searchValue,replaceValue){var isFn=isFunction(replaceValue),hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(isFn&&hasCapturingGroups){var wrappedReplaceValue=function(match){var length=arguments.length,originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];return searchValue.lastIndex=originalLastIndex,args.push(arguments[length-2],arguments[length-1]),replaceValue.apply(this,args)};return str_replace.call(this,searchValue,wrappedReplaceValue)}return str_replace.call(this,searchValue,replaceValue)});var string_substr=StringPrototype.substr,hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1);defineProperties(StringPrototype,{substr:function(start,length){return string_substr.call(this,0>start&&(start=this.length+start)<0?0:start,length)}},hasNegativeSubstrBug);var ws="	\n\x0B\f\r \u2028\u2029\ufeff",zeroWidth="",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!zeroWidth.trim());defineProperties(StringPrototype,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug),(8!==parseInt(ws+"08")||22!==parseInt(ws+"0x16"))&&(parseInt=function(origParseInt){var hexRegex=/^0[xX]/;return function(str,radix){return str=String(str).trim(),Number(radix)||(radix=hexRegex.test(str)?16:10),origParseInt(str,radix)}}(parseInt))}),function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory():root.returnExports=factory()}(this,function(){function doesGetOwnPropertyDescriptorWork(object){try{return object.sentinel=0,0===Object.getOwnPropertyDescriptor(object,"sentinel").value}catch(exception){}}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}var defineGetter,defineSetter,lookupGetter,lookupSetter,call=Function.prototype.call,prototypeOfObject=Object.prototype,owns=call.bind(prototypeOfObject.hasOwnProperty),supportsAccessors=owns(prototypeOfObject,"__defineGetter__");if(supportsAccessors&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){var proto=object.__proto__;return proto||null===proto?proto:object.constructor?object.constructor.prototype:prototypeOfObject}),Object.defineProperty){var getOwnPropertyDescriptorWorksOnObject=doesGetOwnPropertyDescriptorWork({}),getOwnPropertyDescriptorWorksOnDom="undefined"==typeof document||doesGetOwnPropertyDescriptorWork(document.createElement("div"));if(!getOwnPropertyDescriptorWorksOnDom||!getOwnPropertyDescriptorWorksOnObject)var getOwnPropertyDescriptorFallback=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||getOwnPropertyDescriptorFallback){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(getOwnPropertyDescriptorFallback)try{return getOwnPropertyDescriptorFallback.call(Object,object,property)}catch(exception){}if(owns(object,property)){var descriptor={enumerable:!0,configurable:!0};if(supportsAccessors){var prototype=object.__proto__,notPrototypeOfObject=object!==prototypeOfObject;notPrototypeOfObject&&(object.__proto__=prototypeOfObject);var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(notPrototypeOfObject&&(object.__proto__=prototype),getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor.writable=!0,descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty,supportsProto=!({__proto__:null}instanceof Object);createEmpty=supportsProto||"undefined"==typeof document?function(){return{__proto__:null}}:function(){function Empty(){}var iframe=document.createElement("iframe"),parent=document.body||document.documentElement;iframe.style.display="none",parent.appendChild(iframe),iframe.src="javascript:";var empty=iframe.contentWindow.Object.prototype;return parent.removeChild(iframe),iframe=null,delete empty.constructor,delete empty.hasOwnProperty,delete empty.propertyIsEnumerable,delete empty.isPrototypeOf,delete empty.toLocaleString,delete empty.toString,delete empty.valueOf,empty.__proto__=null,Empty.prototype=empty,createEmpty=function(){return new Empty},new Empty},Object.create=function(prototype,properties){function Type(){}var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype&&"function"!=typeof prototype)throw new TypeError("Object prototype may only be an Object or null");Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty,definePropertiesFallback=Object.defineProperties}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}(!Object.defineProperties||definePropertiesFallback)&&(Object.defineProperties=function(object,properties){if(definePropertiesFallback)try{return definePropertiesFallback.call(Object,object,properties)}catch(exception){}for(var property in properties)owns(properties,property)&&"__proto__"!==property&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(object){return!1}),Object.isFrozen||(Object.isFrozen=function(object){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)!==object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue})});
},{}],14:[function(require,module,exports){
(function (process,global){
!function(){function noop(){}function identity(v){return v}function toBool(v){return!!v}function notId(v){return!v}function only_once(fn){return function(){if(null===fn)throw new Error("Callback was already called.");fn.apply(this,arguments),fn=null}}function _once(fn){return function(){null!==fn&&(fn.apply(this,arguments),fn=null)}}function _isArrayLike(arr){return _isArray(arr)||"number"==typeof arr.length&&arr.length>=0&&arr.length%1===0}function _arrayEach(arr,iterator){for(var index=-1,length=arr.length;++index<length;)iterator(arr[index],index,arr)}function _map(arr,iterator){for(var index=-1,length=arr.length,result=Array(length);++index<length;)result[index]=iterator(arr[index],index,arr);return result}function _range(count){return _map(Array(count),function(v,i){return i})}function _reduce(arr,iterator,memo){return _arrayEach(arr,function(x,i,a){memo=iterator(memo,x,i,a)}),memo}function _forEachOf(object,iterator){_arrayEach(_keys(object),function(key){iterator(object[key],key)})}function _indexOf(arr,item){for(var i=0;i<arr.length;i++)if(arr[i]===item)return i;return-1}function _keyIterator(coll){var len,keys,i=-1;return _isArrayLike(coll)?(len=coll.length,function(){return i++,len>i?i:null}):(keys=_keys(coll),len=keys.length,function(){return i++,len>i?keys[i]:null})}function _restParam(func,startIndex){return startIndex=null==startIndex?func.length-1:+startIndex,function(){for(var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;length>index;index++)rest[index]=arguments[index+startIndex];switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest)}}}function _withoutIndex(iterator){return function(value,index,callback){return iterator(value,callback)}}function _eachOfLimit(limit){return function(obj,iterator,callback){callback=_once(callback||noop),obj=obj||[];var nextKey=_keyIterator(obj);if(0>=limit)return callback(null);var done=!1,running=0,errored=!1;!function replenish(){if(done&&0>=running)return callback(null);for(;limit>running&&!errored;){var key=nextKey();if(null===key)return done=!0,void(0>=running&&callback(null));running+=1,iterator(obj[key],key,only_once(function(err){running-=1,err?(callback(err),errored=!0):replenish()}))}}()}}function doParallel(fn){return function(obj,iterator,callback){return fn(async.eachOf,obj,iterator,callback)}}function doParallelLimit(fn){return function(obj,limit,iterator,callback){return fn(_eachOfLimit(limit),obj,iterator,callback)}}function doSeries(fn){return function(obj,iterator,callback){return fn(async.eachOfSeries,obj,iterator,callback)}}function _asyncMap(eachfn,arr,iterator,callback){callback=_once(callback||noop),arr=arr||[];var results=_isArrayLike(arr)?[]:{};eachfn(arr,function(value,index,callback){iterator(value,function(err,v){results[index]=v,callback(err)})},function(err){callback(err,results)})}function _filter(eachfn,arr,iterator,callback){var results=[];eachfn(arr,function(x,index,callback){iterator(x,function(v){v&&results.push({index:index,value:x}),callback()})},function(){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})}function _reject(eachfn,arr,iterator,callback){_filter(eachfn,arr,function(value,cb){iterator(value,function(v){cb(!v)})},callback)}function _createTester(eachfn,check,getResult){return function(arr,limit,iterator,cb){function done(){cb&&cb(getResult(!1,void 0))}function iteratee(x,_,callback){return cb?void iterator(x,function(v){cb&&check(v)&&(cb(getResult(!0,x)),cb=iterator=!1),callback()}):callback()}arguments.length>3?eachfn(arr,limit,iteratee,done):(cb=iterator,iterator=limit,eachfn(arr,iteratee,done))}}function _findGetResult(v,x){return x}function _parallel(eachfn,tasks,callback){callback=callback||noop;var results=_isArrayLike(tasks)?[]:{};eachfn(tasks,function(task,key,callback){task(_restParam(function(err,args){args.length<=1&&(args=args[0]),results[key]=args,callback(err)}))},function(err){callback(err,results)})}function _concat(eachfn,arr,fn,callback){var result=[];eachfn(arr,function(x,index,cb){fn(x,function(err,y){result=result.concat(y||[]),cb(err)})},function(err){callback(err,result)})}function _queue(worker,concurrency,payload){function _insert(q,data,pos,callback){if(null!=callback&&"function"!=typeof callback)throw new Error("task callback must be a function");return q.started=!0,_isArray(data)||(data=[data]),0===data.length&&q.idle()?async.setImmediate(function(){q.drain()}):(_arrayEach(data,function(task){var item={data:task,callback:callback||noop};pos?q.tasks.unshift(item):q.tasks.push(item),q.tasks.length===q.concurrency&&q.saturated()}),void async.setImmediate(q.process))}function _next(q,tasks){return function(){workers-=1;var removed=!1,args=arguments;_arrayEach(tasks,function(task){_arrayEach(workersList,function(worker,index){worker!==task||removed||(workersList.splice(index,1),removed=!0)}),task.callback.apply(task,args)}),q.tasks.length+workers===0&&q.drain(),q.process()}}if(null==concurrency)concurrency=1;else if(0===concurrency)throw new Error("Concurrency must not be zero");var workers=0,workersList=[],q={tasks:[],concurrency:concurrency,payload:payload,saturated:noop,empty:noop,drain:noop,started:!1,paused:!1,push:function(data,callback){_insert(q,data,!1,callback)},kill:function(){q.drain=noop,q.tasks=[]},unshift:function(data,callback){_insert(q,data,!0,callback)},process:function(){for(;!q.paused&&workers<q.concurrency&&q.tasks.length;){var tasks=q.payload?q.tasks.splice(0,q.payload):q.tasks.splice(0,q.tasks.length),data=_map(tasks,function(task){return task.data});0===q.tasks.length&&q.empty(),workers+=1,workersList.push(tasks[0]);var cb=only_once(_next(q,tasks));worker(data,cb)}},length:function(){return q.tasks.length},running:function(){return workers},workersList:function(){return workersList},idle:function(){return q.tasks.length+workers===0},pause:function(){q.paused=!0},resume:function(){if(q.paused!==!1){q.paused=!1;for(var resumeCount=Math.min(q.concurrency,q.tasks.length),w=1;resumeCount>=w;w++)async.setImmediate(q.process)}}};return q}function _console_fn(name){return _restParam(function(fn,args){fn.apply(null,args.concat([_restParam(function(err,args){"object"==typeof console&&(err?console.error&&console.error(err):console[name]&&_arrayEach(args,function(x){console[name](x)}))})]))})}function _times(mapper){return function(count,iterator,callback){mapper(_range(count),iterator,callback)}}function _applyEach(eachfn){return _restParam(function(fns,args){var go=_restParam(function(args){var that=this,callback=args.pop();return eachfn(fns,function(fn,_,cb){fn.apply(that,args.concat([cb]))},callback)});return args.length?go.apply(this,args):go})}function ensureAsync(fn){return _restParam(function(args){var callback=args.pop();args.push(function(){var innerArgs=arguments;sync?async.setImmediate(function(){callback.apply(null,innerArgs)}):callback.apply(null,innerArgs)});var sync=!0;fn.apply(this,args),sync=!1})}var previous_async,async={},root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=root&&(previous_async=root.async),async.noConflict=function(){return root.async=previous_async,async};var _toString=Object.prototype.toString,_isArray=Array.isArray||function(obj){return"[object Array]"===_toString.call(obj)},_isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_keys=Object.keys||function(obj){var keys=[];for(var k in obj)obj.hasOwnProperty(k)&&keys.push(k);return keys},_setImmediate="function"==typeof setImmediate&&setImmediate,_delay=_setImmediate?function(fn){_setImmediate(fn)}:function(fn){setTimeout(fn,0)};"object"==typeof process&&"function"==typeof process.nextTick?async.nextTick=process.nextTick:async.nextTick=_delay,async.setImmediate=_setImmediate?_delay:async.nextTick,async.forEach=async.each=function(arr,iterator,callback){return async.eachOf(arr,_withoutIndex(iterator),callback)},async.forEachSeries=async.eachSeries=function(arr,iterator,callback){return async.eachOfSeries(arr,_withoutIndex(iterator),callback)},async.forEachLimit=async.eachLimit=function(arr,limit,iterator,callback){return _eachOfLimit(limit)(arr,_withoutIndex(iterator),callback)},async.forEachOf=async.eachOf=function(object,iterator,callback){function done(err){completed--,err?callback(err):null===key&&0>=completed&&callback(null)}callback=_once(callback||noop),object=object||[];for(var key,iter=_keyIterator(object),completed=0;null!=(key=iter());)completed+=1,iterator(object[key],key,only_once(done));0===completed&&callback(null)},async.forEachOfSeries=async.eachOfSeries=function(obj,iterator,callback){function iterate(){var sync=!0;return null===key?callback(null):(iterator(obj[key],key,only_once(function(err){if(err)callback(err);else{if(key=nextKey(),null===key)return callback(null);sync?async.setImmediate(iterate):iterate()}})),void(sync=!1))}callback=_once(callback||noop),obj=obj||[];var nextKey=_keyIterator(obj),key=nextKey();iterate()},async.forEachOfLimit=async.eachOfLimit=function(obj,limit,iterator,callback){_eachOfLimit(limit)(obj,iterator,callback)},async.map=doParallel(_asyncMap),async.mapSeries=doSeries(_asyncMap),async.mapLimit=doParallelLimit(_asyncMap),async.inject=async.foldl=async.reduce=function(arr,memo,iterator,callback){async.eachOfSeries(arr,function(x,i,callback){iterator(memo,x,function(err,v){memo=v,callback(err)})},function(err){callback(err,memo)})},async.foldr=async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,identity).reverse();async.reduce(reversed,memo,iterator,callback)},async.transform=function(arr,memo,iterator,callback){3===arguments.length&&(callback=iterator,iterator=memo,memo=_isArray(arr)?[]:{}),async.eachOf(arr,function(v,k,cb){iterator(memo,v,k,cb)},function(err){callback(err,memo)})},async.select=async.filter=doParallel(_filter),async.selectLimit=async.filterLimit=doParallelLimit(_filter),async.selectSeries=async.filterSeries=doSeries(_filter),async.reject=doParallel(_reject),async.rejectLimit=doParallelLimit(_reject),async.rejectSeries=doSeries(_reject),async.any=async.some=_createTester(async.eachOf,toBool,identity),async.someLimit=_createTester(async.eachOfLimit,toBool,identity),async.all=async.every=_createTester(async.eachOf,notId,notId),async.everyLimit=_createTester(async.eachOfLimit,notId,notId),async.detect=_createTester(async.eachOf,identity,_findGetResult),async.detectSeries=_createTester(async.eachOfSeries,identity,_findGetResult),async.detectLimit=_createTester(async.eachOfLimit,identity,_findGetResult),async.sortBy=function(arr,iterator,callback){function comparator(left,right){var a=left.criteria,b=right.criteria;return b>a?-1:a>b?1:0}async.map(arr,function(x,callback){iterator(x,function(err,criteria){err?callback(err):callback(null,{value:x,criteria:criteria})})},function(err,results){return err?callback(err):void callback(null,_map(results.sort(comparator),function(x){return x.value}))})},async.auto=function(tasks,concurrency,callback){function addListener(fn){listeners.unshift(fn)}function removeListener(fn){var idx=_indexOf(listeners,fn);idx>=0&&listeners.splice(idx,1)}function taskComplete(){remainingTasks--,_arrayEach(listeners.slice(0),function(fn){fn()})}"function"==typeof arguments[1]&&(callback=concurrency,concurrency=null),callback=_once(callback||noop);var keys=_keys(tasks),remainingTasks=keys.length;if(!remainingTasks)return callback(null);concurrency||(concurrency=remainingTasks);var results={},runningTasks=0,hasError=!1,listeners=[];addListener(function(){remainingTasks||callback(null,results)}),_arrayEach(keys,function(k){function ready(){return concurrency>runningTasks&&_reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},!0)&&!results.hasOwnProperty(k)}function listener(){ready()&&(runningTasks++,removeListener(listener),task[task.length-1](taskCallback,results))}if(!hasError){for(var dep,task=_isArray(tasks[k])?tasks[k]:[tasks[k]],taskCallback=_restParam(function(err,args){if(runningTasks--,args.length<=1&&(args=args[0]),err){var safeResults={};_forEachOf(results,function(val,rkey){safeResults[rkey]=val}),safeResults[k]=args,hasError=!0,callback(err,safeResults)}else results[k]=args,async.setImmediate(taskComplete)}),requires=task.slice(0,task.length-1),len=requires.length;len--;){if(!(dep=tasks[requires[len]]))throw new Error("Has nonexistent dependency in "+requires.join(", "));if(_isArray(dep)&&_indexOf(dep,k)>=0)throw new Error("Has cyclic dependencies")}ready()?(runningTasks++,task[task.length-1](taskCallback,results)):addListener(listener)}})},async.retry=function(times,task,callback){function parseTimes(acc,t){if("number"==typeof t)acc.times=parseInt(t,10)||DEFAULT_TIMES;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);acc.times=parseInt(t.times,10)||DEFAULT_TIMES,acc.interval=parseInt(t.interval,10)||DEFAULT_INTERVAL}}function wrappedTask(wrappedCallback,wrappedResults){function retryAttempt(task,finalAttempt){return function(seriesCallback){task(function(err,result){seriesCallback(!err||finalAttempt,{err:err,result:result})},wrappedResults)}}function retryInterval(interval){return function(seriesCallback){setTimeout(function(){seriesCallback(null)},interval)}}for(;opts.times;){var finalAttempt=!(opts.times-=1);attempts.push(retryAttempt(opts.task,finalAttempt)),!finalAttempt&&opts.interval>0&&attempts.push(retryInterval(opts.interval))}async.series(attempts,function(done,data){data=data[data.length-1],(wrappedCallback||opts.callback)(data.err,data.result)})}var DEFAULT_TIMES=5,DEFAULT_INTERVAL=0,attempts=[],opts={times:DEFAULT_TIMES,interval:DEFAULT_INTERVAL},length=arguments.length;if(1>length||length>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=length&&"function"==typeof times&&(callback=task,task=times),"function"!=typeof times&&parseTimes(opts,times),opts.callback=callback,opts.task=task,opts.callback?wrappedTask():wrappedTask},async.waterfall=function(tasks,callback){function wrapIterator(iterator){return _restParam(function(err,args){if(err)callback.apply(null,[err].concat(args));else{var next=iterator.next();next?args.push(wrapIterator(next)):args.push(callback),ensureAsync(iterator).apply(null,args)}})}if(callback=_once(callback||noop),!_isArray(tasks)){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}return tasks.length?void wrapIterator(async.iterator(tasks))():callback()},async.parallel=function(tasks,callback){_parallel(async.eachOf,tasks,callback)},async.parallelLimit=function(tasks,limit,callback){_parallel(_eachOfLimit(limit),tasks,callback)},async.series=function(tasks,callback){_parallel(async.eachOfSeries,tasks,callback)},async.iterator=function(tasks){function makeCallback(index){function fn(){return tasks.length&&tasks[index].apply(null,arguments),fn.next()}return fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null},fn}return makeCallback(0)},async.apply=_restParam(function(fn,args){return _restParam(function(callArgs){return fn.apply(null,args.concat(callArgs))})}),async.concat=doParallel(_concat),async.concatSeries=doSeries(_concat),async.whilst=function(test,iterator,callback){if(callback=callback||noop,test()){var next=_restParam(function(err,args){err?callback(err):test.apply(this,args)?iterator(next):callback.apply(null,[null].concat(args))});iterator(next)}else callback(null)},async.doWhilst=function(iterator,test,callback){var calls=0;return async.whilst(function(){return++calls<=1||test.apply(this,arguments)},iterator,callback)},async.until=function(test,iterator,callback){return async.whilst(function(){return!test.apply(this,arguments)},iterator,callback)},async.doUntil=function(iterator,test,callback){return async.doWhilst(iterator,function(){return!test.apply(this,arguments)},callback)},async.during=function(test,iterator,callback){callback=callback||noop;var next=_restParam(function(err,args){err?callback(err):(args.push(check),test.apply(this,args))}),check=function(err,truth){err?callback(err):truth?iterator(next):callback(null)};test(check)},async.doDuring=function(iterator,test,callback){var calls=0;async.during(function(next){calls++<1?next(null,!0):test.apply(this,arguments)},iterator,callback)},async.queue=function(worker,concurrency){var q=_queue(function(items,cb){worker(items[0],cb)},concurrency,1);return q},async.priorityQueue=function(worker,concurrency){function _compareTasks(a,b){return a.priority-b.priority}function _binarySearch(sequence,item,compare){for(var beg=-1,end=sequence.length-1;end>beg;){var mid=beg+(end-beg+1>>>1);compare(item,sequence[mid])>=0?beg=mid:end=mid-1}return beg}function _insert(q,data,priority,callback){if(null!=callback&&"function"!=typeof callback)throw new Error("task callback must be a function");return q.started=!0,_isArray(data)||(data=[data]),0===data.length?async.setImmediate(function(){q.drain()}):void _arrayEach(data,function(task){var item={data:task,priority:priority,callback:"function"==typeof callback?callback:noop};q.tasks.splice(_binarySearch(q.tasks,item,_compareTasks)+1,0,item),q.tasks.length===q.concurrency&&q.saturated(),async.setImmediate(q.process)})}var q=async.queue(worker,concurrency);return q.push=function(data,priority,callback){_insert(q,data,priority,callback)},delete q.unshift,q},async.cargo=function(worker,payload){return _queue(worker,1,payload)},async.log=_console_fn("log"),async.dir=_console_fn("dir"),async.memoize=function(fn,hasher){var memo={},queues={},has=Object.prototype.hasOwnProperty;hasher=hasher||identity;var memoized=_restParam(function(args){var callback=args.pop(),key=hasher.apply(null,args);has.call(memo,key)?async.setImmediate(function(){callback.apply(null,memo[key])}):has.call(queues,key)?queues[key].push(callback):(queues[key]=[callback],fn.apply(null,args.concat([_restParam(function(args){memo[key]=args;var q=queues[key];delete queues[key];for(var i=0,l=q.length;l>i;i++)q[i].apply(null,args)})])))});return memoized.memo=memo,memoized.unmemoized=fn,memoized},async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}},async.times=_times(async.map),async.timesSeries=_times(async.mapSeries),async.timesLimit=function(count,limit,iterator,callback){return async.mapLimit(_range(count),limit,iterator,callback)},async.seq=function(){var fns=arguments;return _restParam(function(args){var that=this,callback=args[args.length-1];"function"==typeof callback?args.pop():callback=noop,async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([_restParam(function(err,nextargs){cb(err,nextargs)})]))},function(err,results){callback.apply(that,[err].concat(results))})})},async.compose=function(){return async.seq.apply(null,Array.prototype.reverse.call(arguments))},async.applyEach=_applyEach(async.eachOf),async.applyEachSeries=_applyEach(async.eachOfSeries),async.forever=function(fn,callback){function next(err){return err?done(err):void task(next)}var done=only_once(callback||noop),task=ensureAsync(fn);next()},async.ensureAsync=ensureAsync,async.constant=_restParam(function(values){var args=[null].concat(values);return function(callback){return callback.apply(this,args)}}),async.wrapSync=async.asyncify=function(func){return _restParam(function(args){var result,callback=args.pop();try{result=func.apply(this,args)}catch(e){return callback(e)}_isObject(result)&&"function"==typeof result.then?result.then(function(value){callback(null,value)})["catch"](function(err){callback(err.message?err:new Error(err))}):callback(null,result)})},"object"==typeof module&&module.exports?module.exports=async:"function"==typeof define&&define.amd?define([],function(){return async}):root.async=async}();
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":17}],15:[function(require,module,exports){
!function(e,t,n,r){"use strict";function rt(e,t){for(var n=0,r=e.length;r>n;n++)vt(e[n],t)}function it(e){for(var r,t=0,n=e.length;n>t;t++)r=e[t],nt(r,b[ot(r)])}function st(e){return function(t){j(t)&&(vt(t,e),rt(t.querySelectorAll(w),e))}}function ot(e){var t=e.getAttribute("is"),n=e.nodeName.toUpperCase(),r=S.call(y,t?v+t.toUpperCase():d+n);return t&&r>-1&&!ut(n,t)?-1:r}function ut(e,t){return-1<w.indexOf(e+'[is="'+t+'"]')}function at(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,i=e.target;Q&&(!i||i===t)&&t.attributeChangedCallback&&"style"!==r&&e.prevValue!==e.newValue&&t.attributeChangedCallback(r,n===e[a]?null:e.prevValue,n===e[l]?null:e.newValue)}function ft(e){var t=st(e);return function(e){X.push(t,e.target)}}function lt(e){K&&(K=!1,e.currentTarget.removeEventListener(h,lt)),rt((e.target||t).querySelectorAll(w),e.detail===o?o:s),B&&pt()}function ct(e,t){var n=this;q.call(n,e,t),G.call(n,{target:n})}function ht(e,t){D(e,t),et?et.observe(e,z):(J&&(e.setAttribute=ct,e[i]=Z(e),e.addEventListener(p,G)),e.addEventListener(c,at)),e.createdCallback&&Q&&(e.created=!0,e.createdCallback(),e.created=!1)}function pt(){for(var e,t=0,n=F.length;n>t;t++)e=F[t],E.contains(e)||(n--,F.splice(t--,1),vt(e,o))}function dt(e){throw new Error("A "+e+" type is already registered")}function vt(e,t){var n,r=ot(e);r>-1&&(tt(e,b[r]),r=0,t!==s||e[s]?t===o&&!e[o]&&(e[s]=!1,e[o]=!0,r=1):(e[o]=!1,e[s]=!0,r=1,B&&S.call(F,e)<0&&F.push(e)),r&&(n=e[t+"Callback"])&&n.call(e))}if(!(r in t)){var X,G,Y,Z,et,tt,nt,i="__"+r+(1e5*Math.random()>>0),s="attached",o="detached",u="extends",a="ADDITION",f="MODIFICATION",l="REMOVAL",c="DOMAttrModified",h="DOMContentLoaded",p="DOMSubtreeModified",d="<",v="=",m=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,g=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],y=[],b=[],w="",E=t.documentElement,S=y.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},x=n.prototype,T=x.hasOwnProperty,N=x.isPrototypeOf,C=n.defineProperty,k=n.getOwnPropertyDescriptor,L=n.getOwnPropertyNames,A=n.getPrototypeOf,O=n.setPrototypeOf,M=!!n.__proto__,_=n.create||function mt(e){return e?(mt.prototype=e,new mt):this},D=O||(M?function(e,t){return e.__proto__=t,e}:L&&k?function(){function e(e,t){for(var n,r=L(t),i=0,s=r.length;s>i;i++)n=r[i],T.call(e,n)||C(e,n,k(t,n))}return function(t,n){do e(t,n);while((n=A(n))&&!N.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),P=e.MutationObserver||e.WebKitMutationObserver,H=(e.HTMLElement||e.Element||e.Node).prototype,B=!N.call(H,E),j=B?function(e){return 1===e.nodeType}:function(e){return N.call(H,e)},F=B&&[],I=H.cloneNode,q=H.setAttribute,R=H.removeAttribute,U=t.createElement,z=P&&{attributes:!0,characterData:!0,attributeOldValue:!0},W=P||function(e){J=!1,E.removeEventListener(c,W)},V=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,10)},$=!1,J=!0,K=!0,Q=!0;O||M?(tt=function(e,t){N.call(t,e)||ht(e,t)},nt=ht):(tt=function(e,t){e[i]||(e[i]=n(!0),ht(e,t))},nt=tt),B?(J=!1,function(){var e=k(H,"addEventListener"),t=e.value,n=function(e){var t=new CustomEvent(c,{bubbles:!0});t.attrName=e,t.prevValue=this.getAttribute(e),t.newValue=null,t[l]=t.attrChange=2,R.call(this,e),this.dispatchEvent(t)},r=function(e,t){var n=this.hasAttribute(e),r=n&&this.getAttribute(e),i=new CustomEvent(c,{bubbles:!0});q.call(this,e,t),i.attrName=e,i.prevValue=n?r:null,i.newValue=t,n?i[f]=i.attrChange=1:i[a]=i.attrChange=0,this.dispatchEvent(i)},s=function(e){var s,t=e.currentTarget,n=t[i],r=e.propertyName;n.hasOwnProperty(r)&&(n=n[r],s=new CustomEvent(c,{bubbles:!0}),s.attrName=n.name,s.prevValue=n.value||null,s.newValue=n.value=t[r]||null,null==s.prevValue?s[a]=s.attrChange=0:s[f]=s.attrChange=1,t.dispatchEvent(s))};e.value=function(e,o,u){e===c&&this.attributeChangedCallback&&this.setAttribute!==r&&(this[i]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",s)),t.call(this,e,o,u)},C(H,"addEventListener",e)}()):P||(E.addEventListener(c,W),E.setAttribute(i,1),E.removeAttribute(i),J&&(G=function(e){var n,r,s,t=this;if(t===e.target){n=t[i],t[i]=r=Z(t);for(s in r){if(!(s in n))return Y(0,t,s,n[s],r[s],a);if(r[s]!==n[s])return Y(1,t,s,n[s],r[s],f)}for(s in n)if(!(s in r))return Y(2,t,s,n[s],r[s],l)}},Y=function(e,t,n,r,i,s){var o={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};o[s]=e,at(o)},Z=function(e){for(var t,n,r={},i=e.attributes,s=0,o=i.length;o>s;s++)t=i[s],n=t.name,"setAttribute"!==n&&(r[n]=t.value);return r})),t[r]=function(n,r){if(c=n.toUpperCase(),$||($=!0,P?(et=function(e,t){function n(e,t){for(var n=0,r=e.length;r>n;t(e[n++]));}return new P(function(r){for(var i,s,o,u=0,a=r.length;a>u;u++)i=r[u],"childList"===i.type?(n(i.addedNodes,e),n(i.removedNodes,t)):(s=i.target,Q&&s.attributeChangedCallback&&"style"!==i.attributeName&&(o=s.getAttribute(i.attributeName),o!==i.oldValue&&s.attributeChangedCallback(i.attributeName,i.oldValue,o)))})}(st(s),st(o)),et.observe(t,{childList:!0,subtree:!0})):(X=[],V(function E(){for(;X.length;)X.shift().call(null,X.shift());V(E)}),t.addEventListener("DOMNodeInserted",ft(s)),t.addEventListener("DOMNodeRemoved",ft(o))),t.addEventListener(h,lt),t.addEventListener("readystatechange",lt),t.createElement=function(e,n){var r=U.apply(t,arguments),i=""+e,s=S.call(y,(n?v:d)+(n||i).toUpperCase()),o=s>-1;return n&&(r.setAttribute("is",n=n.toLowerCase()),o&&(o=ut(i.toUpperCase(),n))),Q=!t.createElement.innerHTMLHelper,o&&nt(r,b[s]),r},H.cloneNode=function(e){var t=I.call(this,!!e),n=ot(t);return n>-1&&nt(t,b[n]),e&&it(t.querySelectorAll(w)),t}),-2<S.call(y,v+c)+S.call(y,d+c)&&dt(n),!m.test(c)||-1<S.call(g,c))throw new Error("The type "+n+" is invalid");var c,p,i=function(){return f?t.createElement(l,c):t.createElement(l)},a=r||x,f=T.call(a,u),l=f?r[u].toUpperCase():c;return f&&-1<S.call(y,d+l)&&dt(l),p=y.push((f?v:d)+c)-1,w=w.concat(w.length?",":"",f?l+'[is="'+n.toLowerCase()+'"]':l),i.prototype=b[p]=T.call(a,"prototype")?a.prototype:_(H),rt(t.querySelectorAll(w),s),i}}}(window,document,Object,"registerElement");
},{}],16:[function(require,module,exports){
!function(formdb){"use strict";function forEach(list,fn,that){return ARRAY.forEach.call(list,fn,that||list)}function filter(list,fn,that){return ARRAY.filter.call(list,fn,that||list)}function slice(list,start,len){return ARRAY.slice.call(list,start,len)}formdb.version="0.2.0";var Form=function(element){return this instanceof formdb.Form?(this.element="object"==typeof element?element:document.querySelector(element||"form"),this._inputs="[name]",void this.element.addEventListener("click",this._onClick.bind(this))):new formdb.Form(element)},LISTENER_PROPERTY="_elementdb_listener";Form.prototype={getData:function(){var data={};return this.getInputs().forEach(function(input){formdb.readInput(input,data)}),data},setData:function(data){for(var key in data)this.set(key,data[key]);return this},get:function(key){var data={};return this.getInputsByName(key).forEach(function(input){formdb.readInput(input,data)}),data[key]},set:function(key,value){var data={};return data[key]=value,this.getInputsByName(key).forEach(function(input){formdb.writeInput(input,data)}),this},reset:function(){if("function"==typeof this.element.reset)this.element.reset();else{var data={};this.getInputs().forEach(function(input){formdb.writeInput(input,data)})}return this},getInputs:function(filter){var inputs=slice(this.element.querySelectorAll(this._inputs));return filter?inputs.filter(filter):inputs},getInputsByName:function(name){return this.getInputs(function(input){return input.name==name})},on:function(type,callback){var listener,self=this;if(type.match(/^change:/)){var name=type.split(":").pop();listener=function(e){return e.target.name===name?callback.call(self,e.target.value,e):void 0},callback[LISTENER_PROPERTY]=listener,this.element.addEventListener("change",listener)}else"change"===type||"submit"===type?(listener=function(e){return callback.call(self,self.getData(),e)},callback[LISTENER_PROPERTY]=listener,this.element.addEventListener(type,listener)):this.element.addEventListener(type,callback);return this},off:function(type,callback){return type.match(/^change:/)&&(type="change"),this.element.removeEventListener(type,callback[LISTENER_PROPERTY]||callback),this},_onClick:function(e){var target=e.target;"submit"===target.type&&this.getInputs(function(input){return"submit"===input.type}).forEach(function(input){input.pressed=input===target})}},formdb.Form=Form,formdb.validInput=function(input){return input.name&&!input.disabled},formdb.readInput=function(input,data){if(!formdb.validInput(input))return!1;var value;switch(input.type){case"select-one":value=input.options[input.selectedIndex].value;break;case"select-multiple":value=filter(input.querySelectorAll("option"),function(option){return option.selected}).map(function(option){return option.value});break;case"checkbox":if(!input.checked)break;value=data[input.name],Array.isArray(value)?value.push(input.value):value="undefined"!=typeof value?[value,input.value||!0]:input.value||!0;break;case"radio":input.checked&&(value=input.value);break;case"submit":input.pressed&&(value=input.value);break;default:value=input.value}return"undefined"!=typeof value&&""!==value?(data[input.name]=value,!0):!1},formdb.writeInput=function(input,data){if(!formdb.validInput(input))return!1;var value=data[input.name]||"",list=Array.isArray(value)?value:[value];switch(list=list.map(String),input.type){case"select-one":return forEach(input.options,function(option){option.selected=option.value==value}),!0;case"select-multiple":return forEach(input.options,function(option){option.selected=list.indexOf(option.value)>-1}),!0;case"checkbox":return input.checked=input.value?list.indexOf(input.value)>-1:!!value,!0;case"radio":return input.checked=value==input.value,!0}return input.value=value,!0};var ARRAY=[]}("object"==typeof module?module.exports:this.formdb={});
},{}],17:[function(require,module,exports){
function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var timeout=setTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,clearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],18:[function(require,module,exports){
"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;len>i;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)};
},{}],19:[function(require,module,exports){
"use strict";function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res};
},{}],20:[function(require,module,exports){
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":18,"./encode":19}],21:[function(require,module,exports){
function bindObject(node,data,directives){for(var key in data)data.hasOwnProperty(key)&&bindKey(node,key,data[key],directives[key]);return node}function bindArray(node,data,directives){var nodes=getChildren(node),template=node[ARRAY_TEMPLATE]||(node[ARRAY_TEMPLATE]=nodes[0]),nodeCount=nodes.length,dataCount=data.length;if(dataCount>nodeCount)for(var last=nodes[nodeCount-1]||template;dataCount>nodeCount;){var clone=template.cloneNode(!0);nodeCount=nodes.push(node.insertBefore(clone,last.nextSibling)),last=clone}else if(nodeCount>dataCount)for(;nodeCount>dataCount;){var child=nodes.shift();node.removeChild(child),nodeCount--}for(var i=0;dataCount>i;i++)tagalong(nodes[i],data[i],directives);return node}function bindKey(node,key,value,directives){var target=findKeyNode(node,key);return target?tagalong(target,value,directives):!1}function bindScalar(node,data,directives){var stringify=directives.stringify||String;return node.textContent=stringify.call(node,data),node}function findKeyNode(node,key){var classed=node.getElementsByClassName(key)[0];if(classed)return classed;for(var children=node.querySelectorAll("[data-bind]"),i=0,len=children.length;len>i;i++)if(children[i].getAttribute("data-bind")==key)return children[i];return null}function getChildren(node){for(var children=[],child=node.firstChild;child;child=child.nextSibling)1===child.nodeType&&children.push(child);return children}function applyDirectives(node,data,directives){function access(key,attr){var value=directives[key];return"function"==typeof value?value.call(node,data):value===!0?data[attr||key]:"object"==typeof value?value:data[value]}var interpolated;for(var key in directives)if("@"===key.charAt(0)){var attr=key.substr(1),value=access(key,attr)||"";node.setAttribute(attr,value)}else{switch(key){case"text":node.textContent=access(key)||""}"object"==typeof directives[key]?bindKey(node,key,data,directives[key]):(interpolated||(interpolated={}),interpolated[key]=access(key))}return interpolated?tagalong(node,interpolated):node}function expandKeys(obj){var expanded={};for(var key in obj)if(key.indexOf(".")>0)for(var bits=key.split("."),value=obj[key],d=expanded;bits.length;)d=d[bits.shift()]=bits.length?{}:value;else expanded[key]=obj[key];return expanded}const ARRAY_TEMPLATE="__array_template__";var tagalong=function(node,data,directives){if("string"==typeof node){var selector=node;if(node=document.querySelector(node),!node)throw new Error("no such element: "+selector)}return directives="object"==typeof directives?expandKeys(directives):"function"==typeof directives?directives.call(node,data)||{}:{},Array.isArray(data)?bindArray(node,data,directives):(applyDirectives(node,data,directives),"object"==typeof data?bindObject(node,data,directives):bindScalar(node,data,directives))};tagalong.object=bindObject,tagalong.array=bindArray,tagalong.scalar=bindScalar,module.exports=tagalong;
},{}]},{},[10])(10)
});


//# sourceMappingURL=picc.js.map