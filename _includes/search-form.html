{% if search_form_nested != true %}
<form id="search-form" is="search-form"
  autocomplete="false"
  action="{{ site.baseurl }}/search/" method="GET">
{% endif %}

  {% capture common_input_attributes %}autocomplete="off" autocorrect="off" autocapitalize="off"{% endcapture %}

  <input type="hidden" name="under_investigation">

  <div class="container search-form-intro">

    <legend>Find Schools By:</legend>
    <h1 class="large_heading">Find Schools By:</h1>
    <p>Enter criteria that is important to you</p>

  </div>

  {% if show_search_filters %}
  <fieldset>

    <aria-accordion id="search-filters" class="container">

      <legend>Filters</legend>
      <h1 class="search_category">
        <a aria-expanded="false" aria-controls="filters-content">
          Filters
        </a>
      </h1>

      <div id="filters-content" aria-hidden="true" class="accordion-div">

        <div class="filter_section">
          <h2 aria-describedby="tip-avg-cost-year">Actual Cost
            <a class="tooltip-target">
              <i class="fa fa-info-circle"></i>
            </a>
          </h2>
          <picc-slider format="$"
            average="{{ site.data.national_stats.net_price.median }}"
            max="{{ site.data.national_stats.net_price.max }}"
            step="1000">
            <input type="hidden" name="avg_net_price">
          </picc-slider>
        </div>


        <div class="filter_section">
          <h2 aria-describedby="tip-graduation-rate">Graduation Rate
            <a class="tooltip-target">
              <i class="fa fa-info-circle"></i>
            </a>
          </h2>
          <picc-slider format="%" step=".01" max="1"
            average="{{ site.data.national_stats.completion_rate.median }}">
            <input type="hidden" name="completion_rate">
          </picc-slider>
        </div>

        <div class="filter_section">
          <h2 aria-describedby="tip-avg-salary">Salary After Graduation
            <a class="tooltip-target">
              <i class="fa fa-info-circle"></i>
            </a>
          </h2>
          <picc-slider format="$"
            average="{{ site.data.national_stats.median_earnings.median }}"
            max="{{ site.data.national_stats.median_earnings.max }}"
            step="1000">
            <input type="hidden" name="median_earnings">
          </picc-slider>
        </div>

        <div class="filter_section">
          <h2 aria-describedby="tip-repayment-rate">Monthly Student Loan Payment
            <a class="tooltip-target">
              <i class="fa fa-info-circle"></i>
            </a>
          </h2>
          <picc-slider format="$" max="550" step="50">
            <input type="hidden" name="monthly_payments">
          </picc-slider>
        </div>

      </div>

    </aria-accordion>

  </fieldset>
  {% endif %}


  <fieldset>

    <aria-accordion id="school-name" class="container">

      <legend>Name</legend>
      <h1 class="search_category">
        <a aria-expanded="true" aria-controls="name-content">
          Name
        </a>
      </h1>

      <div id="name-content" aria-hidden="false" class="accordion-div">
        <label for="name-school">School name</label>
        <input id="name-school" name="name" type="text" placeholder="e.g. USA University" {{ common_input_attributes }}>
      </div>

      <input type="submit" class="sr-only">

    </aria-accordion>

  </fieldset>

  <fieldset>

    <aria-accordion id="school-location" class="container">

      <legend>Location</legend>
      <h1 class="search_category">
        <a aria-expanded="false" aria-controls="location-content">
          Location
        </a>
      </h1>

      <div id="location-content" aria-hidden="true" class="accordion-div">

        <div class="input-add group_inline">

          <label for="select-state">
            Select one or more states
          </label>

          <multi-select>
            <div class="u-group_inline u-group_inline-left">
              <select name="state" class="select-state">
                <option value=""></option>
                {% for state in site.data.states|sort('name') %}
                <option value="{{ state.abbr }}">{{ state.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="u-group_inline u-group_inline-right u-nowrap">
              <button class="button button-add">
                Add State
              </button>
              <button class="button button-remove">
                &times;
              </button>
            </div>
          </multi-select>

        </div>

        <div class="input-add group_inline">

          <label for="select-region">
            Select one or more regions
          </label>

          <multi-select>
            <div class="u-group_inline u-group_inline-left">
              <select name="region" class="select-region">
                <option value=""></option>
                {% for region in site.data.regions|sort('name') %}
                <option value="{{ region.id }}" data-states="{{ region.states }}">{{ region.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="u-group_inline u-group_inline-right u-nowrap">
              <button class="button button-add">
                Add Region
              </button>
              <button class="button button-remove">
                &times;
              </button>
            </div>
          </multi-select>

        </div>

        <div class="group_inline">

          <label for="zip-code" class="group_inline-left">Enter a ZIP code
            <input id="zip-code" name="zip" type="number" placeholder="e.g. 45400" {{ common_input_attributes }}>
          </label>

          <label for="search-radius" class="group_inline-right">Mile radius
            <input name="distance" type="number" step=".1" placeholder="no limit" id="search-radius" {{ common_input_attributes }}>
          </label>

        </div>

        <label for="online" class="checkbox">
          <input id="online" type="checkbox" name="online" value="1" tabindex="0">
          <span tabindex="-1" class="checkbox-focus"></span>Include Online Only Schools
        </label>

      </div>

    </aria-accordion>

  </fieldset>

  <fieldset>

    <aria-accordion id="school-degree" class="container">

      <legend>Programs/Degree</legend>
      <h1 class="search_category">
        <a aria-expanded="false" aria-controls="major-content">
          Programs/Degree
        </a>
      </h1>
      <div id="major-content" aria-hidden="true" class="accordion-div">

        <label for="major">Choose a program
          <select id="major" name="major">
            <option value="">Any</option>
            {% for program in site.data.programs %}
            <option value="{{ program.key }}">{{ program.label }}</option>
            {% endfor %}
          </select>
        </label>

        <label for="major-type">Choose a degree
          <select id="major-type" name="degree">
            <option value="">Any</option>
            <option value="a">Associates</option>
            <option value="b">Bachelors</option>
          </select>
        </label>

      </div>

    </aria-accordion>

  </fieldset>

  <fieldset>

    <aria-accordion id="school-size" class="container">

      <legend>Size</legend>
      <h1 class="search_category">
        <a aria-expanded="false" aria-controls="size-content">
          Size
        </a>
      </h1>

      <div id="size-content" aria-hidden="true">
        <fieldset class="nested_fieldset">

          <legend>Undergraduate Student Body</legend>
          <h1>Undergraduate Student Body</h1>

          <ul>
            <li>
              <label for="size-small" class="checkbox">
                <input id="size-small" type="checkbox" name="size" value="small" tabindex="0">
                <span tabindex="-1" class="checkbox-focus"></span>Small (&lt; 2,000)
              </label>
            </li>
            <li>
              <label for="size-medium" class="checkbox">
                <input id="size-medium" type="checkbox" name="size" value="medium" tabindex="0">
                <span tabindex="-1" class="checkbox-focus"></span>Medium (2,000&ndash;15,000)
              </label>
            </li>
            <li>
              <label for="size-large" class="checkbox">
                <input id="size-large" type="checkbox" name="size" value="large" tabindex="0">
                <span tabindex="-1" class="checkbox-focus"></span>Large (&gt; 15,000)
              </label>
            </li>
          </ul>

        </fieldset>

      </div>

    </aria-accordion>

  </fieldset>

  <div class="container search_form-submit">

    <fieldset class="advanced_search">

      <aria-accordion>

          <legend>Advanced Search</legend>
          <div class="advanced_search-title">
            <a aria-expanded="false" aria-controls="advanced-content" class="button link-more advanced_search-control">
              Advanced Search <i class="fa fa-plus"></i>
            </a>
          </div>

        <div id="advanced-content" class="advanced-content" aria-hidden="false">

          <fieldset>

            <aria-accordion class="container">

              <legend>Institution Type</legend>
              <h1 class="search_category">
                <a aria-expanded="false" aria-controls="type-content">
                  Institution Type
                </a>
              </h1>

              <div id="type-content" aria-hidden="false">

                <fieldset class="nested_fieldset">

                  <legend>Type of school</legend>
                  <h1>Type of school</h1>

                  <ul>
                    <li>
                      <label for="type-public" class="checkbox">
                        <input id="type-public" type="checkbox" name="control" value="public" tabindex="0">
                        <span tabindex="-1" class="checkbox-focus"></span>Public
                      </label>
                    </li>
                    <li>
                      <label for="type-private" class="checkbox">
                        <input id="type-private" type="checkbox" name="control" value="private" tabindex="0">
                        <span tabindex="-1" class="checkbox-focus"></span>Private, Not-for-Profit
                      </label>
                    </li>
                    <li>
                      <label for="type-profit" class="checkbox">
                        <input id="type-profit" type="checkbox" name="control" value="profit" tabindex="0">
                        <span tabindex="-1" class="checkbox-focus"></span>Private, For-Profit
                      </label>
                    </li>
                  </ul>

                </fieldset>

                <label for="affiliation">Special designation
                  <select id="affiliation" name="serving">
                    <option value="">None</option>
                    {% for designation in site.data.special_designations %}
                    <option value="{{ designation[0] }}">{{ designation[1] }}</option>
                    {% endfor %}
                  </select>
                </label>

                <label for="affiliation">Religious affiliation
                  <select id="affiliation" name="religious">
                    <option value="">None</option>
                    {% for row in site.data.religious_affiliations:sort('label') %}
                    <option value="{{ row.value }}">{{ row.label }}</option>
                    {% endfor %}
                  </select>
                </label>

              </div>

            </aria-accordion>

          </fieldset>

        </div>

      </aria-accordion>

    </fieldset>

    <button id="search-submit" class="button button-primary search-button">
      Find Schools
    </button>

  </div>

{% if search_form_nested != true %}
</form>
{% endif %}
